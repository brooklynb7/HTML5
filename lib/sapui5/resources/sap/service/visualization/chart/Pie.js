/*!
 * CVOM HTML5 charts
 * 
 * 	(c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.service.visualization.chart.Pie");jQuery.sap.require("sap.service.visualization.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.service.visualization.chart.Pie",{metadata:{deprecated:true,library:"sap.service.visualization",properties:{"width":{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},"height":{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},"allDeSelectable":{type:"boolean",group:"Misc",defaultValue:true},"allSelectable":{type:"boolean",group:"Misc",defaultValue:true},"selectionMode":{type:"string",group:"Misc",defaultValue:'single'},"legendFirst":{type:"boolean",group:"Misc",defaultValue:false},"legendDirection":{type:"string",group:"Misc",defaultValue:'right'},"legendVerticalOffset":{type:"int",group:"Misc",defaultValue:0},"legendHorizontalOffset":{type:"int",group:"Misc",defaultValue:0},"defaultSelectedSliceIndexes":{type:"int[]",group:"Misc",defaultValue:null},"sectorColors":{type:"string[]",group:"Misc",defaultValue:['#748CB2','#9CC677','#EACF5E','#F9AD79','#D16A7C','#8873A2','#3A95B3','#B6D949','#FDD36C','#F47958','#A65084','#0063B1','#0DA841','#FCB71D','#F05620','#B22D6E','#3C368E','\'#8FB2CF']},"showLegend":{type:"boolean",group:"Misc",defaultValue:true},"legendFormatString":{type:"string[]",group:"Misc",defaultValue:['']},"title":{type:"string",group:"Misc",defaultValue:null},"titleHorizontalAlign":{type:"string",group:"Misc",defaultValue:'center'},"subTitle":{type:"string",group:"Misc",defaultValue:null},"subTitleHorizontalAlign":{type:"string",group:"Misc",defaultValue:'center'},"showTitle":{type:"boolean",group:"Misc",defaultValue:true},"titleFormatString":{type:"string",group:"Misc",defaultValue:''},"subTitleFormatString":{type:"string",group:"Misc",defaultValue:''},"tooltipTextFormatString":{type:"string[]",group:"Misc",defaultValue:null},"tooltipMainValueFormatString":{type:"string[]",group:"Misc",defaultValue:null},"tooltipSubValueFormatString":{type:"string[]",group:"Misc",defaultValue:null},"pieType":{type:"string",group:"Misc",defaultValue:'pie'}},aggregations:{"dataset":{type:"sap.service.visualization.dataset.SimpleDMDataset",multiple:false}},events:{"selectData":{}}}});sap.service.visualization.chart.Pie.M_EVENTS={'selectData':'selectData'};
/*!
 * @copyright@
 */
jQuery.sap.require("sap.service.visualization.chart.ChartSourceCode.libs.json2");jQuery.sap.require("sap.service.visualization.chart.ChartSourceCode.libs.saprivbase");jQuery.sap.require("sap.service.visualization.chart.ChartSourceCode.libs.sapcommonglobalization");jQuery.sap.require("sap.service.visualization.chart.ChartSourceCode.libs.saprivmodules");jQuery.sap.require("sap.ui.core.theming.Parameters");
sap.service.visualization.chart.Pie.prototype.isNumber=function(v){var p=/^(0|-?[1-9]\d*)$|^(0|-?[1-9]\d*)\.(\d+)$/;return p.exec(v)};
sap.service.visualization.chart.Pie.prototype.setWidth=function(w){this.setProperty("width",w);return this};
sap.service.visualization.chart.Pie.prototype.setHeight=function(h){this.setProperty("height",h);return this};
sap.service.visualization.chart.Pie.prototype.setAllSelectable=function(a){this.setProperty("allSelectable",a);if(this.pie!=undefined){var c={allSelectable:a};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setAllDeSelectable=function(a){this.setProperty("allDeSelectable",a);if(this.pie!=undefined){var c={allDeSelectable:a};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setSelectionMode=function(s){this.setProperty("selectionMode",s);if(this.pie!=undefined){if((s!='multiple')&&(s!='single')){s='single'}var c={selectionMode:s,};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setLegendFirst=function(l){this.setProperty("legendFirst",l);if(this.pie!=undefined){var c={layout:{legendFirst:l}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setLegendDirection=function(l){this.setProperty("legendDirection",l);if(this.pie!=undefined){var a=this.getLegendVerticalOffset();var b=this.getLegendHorizontalOffset();if(l=='left'||l=='right'){a=(this.isNumber(a))?parseInt(a):0;}else{b=(this.isNumber(b))?parseInt(b):0}var c={legend:{position:l,verticalOffset:a,horizontalOffset:b}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setLegendVerticalOffset=function(l){this.setProperty("legendVerticalOffset",l);if(this.pie!=undefined){var a=this.getLegendDirection();var l=0;var c;if(a=='left'||a=='right'){l=(this.isNumber(l))?parseInt(l):0;c={legend:{verticalOffset:l,}}}this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setLegendHorizontalOffset=function(l){this.setProperty("legendHorizontalOffset",l);if(this.pie!=undefined){var a=this.getLegendDirection();var l=0;var c;if(a=='top'||a=='left'){l=(this.isNumber(l))?parseInt(l):0;c={legend:{horizontalOffset:l,}}}this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setDefaultSelectedSliceIndexes=function(d){this.setProperty("defaultSelectedSliceIndexes",d);if(this.pie!=undefined){var c={defaultSelectedSectorIndexes:d};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setSectorColors=function(s){this.setProperty("sectorColors",s);if(this.pie!=undefined){var c={measures:[{sectorColors:s}]};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setLegendFormatString=function(l){this.setProperty("legendFormatString",l);if(this.pie!=undefined){var c={legend:{legendFormatString:l}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setTitleFormatString=function(t){this.setProperty("titleFormatString",t);if(this.pie!=undefined){var c={title:{main:{formatString:t}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setSubTitleFormatString=function(s){this.setProperty("subTitleFormatString",s);if(this.pie!=undefined){var c={title:{main:{formatString:s}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setTooltipTextFormatString=function(t){this.setProperty("tooltipTextFormatString",t);if(this.pie!=undefined){var c={tooltip:{text:{formatSting:t}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setTooltipMainValueFormatString=function(t){this.setProperty("tooltipMainValueFormatString",t);if(this.pie!=undefined){var c={tooltip:{mainValue:{formatSting:t}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setTooltipSubValueFormatString=function(t){this.setProperty("tooltipSubValueFormatString",t);if(this.pie!=undefined){var c={tooltip:{subValue:{formatSting:t}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setShowLegend=function(s){this.setProperty("showLegend",s);if(this.pie!=undefined){var c={legend:{visible:(s!=undefined)?s:true},};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setLegendFirst=function(l){this.setProperty("legendFirst",l);if(this.pie!=undefined){var c={layout:{legendFirst:(l!=undefined)?l:true},};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setTitle=function(t){this.setProperty("title",t);if(this.pie!=undefined){var c={title:{main:{text:t}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setSubTitle=function(s){this.setProperty("subTitle",s);if(this.pie!=undefined){var c={title:{sub:{text:s}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setShowTitle=function(s){this.setProperty("showTitle",s);if(this.pie!=undefined){var c={title:{main:{visible:(s!=undefined)?s:true},sub:{visible:(s!=undefined)?s:true}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setTitleHorizontalAlign=function(t){this.setProperty("titleHorizontalAlign",t);if(this.pie!=undefined){var c={title:{mian:{HorizontalAlign:t}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setSubTitleHorizontalAlign=function(s){this.setProperty("subTitleHorizontalAlign",s);if(this.pie!=undefined){var c={title:{sub:{HorizontalAlign:s}}};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.setPieType=function(p){this.setProperty("pieType",p);if(this.pie!=undefined){var c={pieType:p};this.pie.updateProperties(c)}return this};
sap.service.visualization.chart.Pie.prototype.onAfterRendering=function(e){var E=sap.riv.viz.Environment;var d=this.getDataset().dataset;var c=this;var r=this.getId();var s=this.getSelectionMode();var a=this.getAllDeSelectable();var b=this.getAllSelectable();var l=this.getLegendDirection();var f=this.getLegendVerticalOffset();var g=this.getLegendHorizontalOffset();var h=this.getShowLegend();var i=this.getLegendFirst();var j=this.getLegendFormatString();var k=this.getDefaultSelectedSliceIndexes();var m=this.getSectorColors();var t=this.getTitle();var n=this.getTitleHorizontalAlign();var o=this.getSubTitle();var p=this.getSubTitleHorizontalAlign();var q=this.getShowTitle();var u=this.getTitleFormatString();var v=this.getSubTitleFormatString();var w=this.getTooltipTextFormatString();var x=this.getTooltipMainValueFormatString();var y=this.getTooltipSubValueFormatString();var z=this.getPieType();this.pie=null;var A=new sap.service.visualization.Themings().getCorrespondingThemings("Pie");var B=A.bgColor;var C=A.chartPadding;var D={};D.visible=h;D.position=l;D.verticalOffset=f;D.horizontalOffset=g;D.formatString=j;D.titleFont=A.legendTitleFont;D.titleColor=A.legendTitleFontColor;D.labelFont=A.legendFont;D.labelColor=A.legendColor;var F={};F.text=t;F.visible=q;F.font=A.mainTitleFont;F.color=A.mainTitleColor;F.horizontalAlign=n;F.formatString=u;var G={};G.text=o;G.visible=q;G.font=A.subTitleFont;G.color=A.subTitleColor;G.horizontalAlign=p;G.formatString=v;var H=A.toolTipMainValueFont;var I=A.toolTipMainValueColor;var J=A.toolTipSubValueFont;var K=A.toolTipSubValueColor;var L=A.toolTipTextFont;var M=A.toolTipTextColor;E.initialize({'locale':'en_US','log':'debug'});var N={layout:{legendFirst:i,padding:C},background:{color:B},tooltip:{mainValue:{font:H,color:I,formatString:x},subValue:{font:J,color:K,formatString:y},text:{font:L,color:M,formatString:w}},legend:D,title:{main:F,sub:G},sort:'asc',selectionMode:s,allSelectable:b,allDeSelectable:a,selectedDataIndexes:k,pieType:(z==undefined)?'pie':z,measures:[{sectorColors:m}]};c.pie=new sap.riv.viz.PieChart(jQuery.sap.byId(r),N,d);c.pie.addListener('selectData',function(P){c.fireSelectData({Id:r,Data:P.data,EventName:P.name})});var O=function(P){var A=new sap.service.visualization.Themings().getCorrespondingThemings("Pie");var B=A.bgColor;var Q=A.mainTitleFont;var R=A.mainTitleColor;var S=A.subTitleFont;var T=A.subTitleColor;var U=A.legendTitleFont;var V=A.legendTitleFontColor;var W=A.legendFont;var X=A.legendColor;var H=A.toolTipMainValueFont;var I=A.toolTipMainValueColor;var J=A.toolTipSubValueFont;var K=A.toolTipSubValueColor;var L=A.toolTipTextFont;var M=A.toolTipTextColor;var N={background:{color:B},tooltip:{text:{font:L,color:M},mainValue:{font:H,color:I},subValue:{font:J,color:K}},legend:{labelFont:W,labelColor:X,titleFont:U,titleColor:V},title:{main:{color:R,font:Q},sub:{color:T,font:S}}};P.updateProperties(N)};sap.ui.getCore().attachThemeChanged(function(P){O(c.pie)})};
