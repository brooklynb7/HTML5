/*!
 * CVOM HTML5 charts
 * 
 * 	(c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.service.visualization.chart.Bar");jQuery.sap.require("sap.service.visualization.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.service.visualization.chart.Bar",{metadata:{deprecated:true,library:"sap.service.visualization",properties:{"width":{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},"height":{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},"deselectEnabled":{type:"boolean",group:"Misc",defaultValue:true},"selectionMode":{type:"string",group:"Misc",defaultValue:'single'},"legendFirst":{type:"boolean",group:"Misc",defaultValue:false},"legendDirection":{type:"string",group:"Misc",defaultValue:'right'},"legendVerticalOffset":{type:"int",group:"Misc",defaultValue:0},"legendHorizontalOffset":{type:"int",group:"Misc",defaultValue:0},"defaultSelectedItems":{type:"object[]",group:"Misc",defaultValue:null},"measures":{type:"object[]",group:"Misc",defaultValue:null},"barMarker":{type:"object",group:"Misc",defaultValue:null},"showLegend":{type:"boolean",group:"Misc",defaultValue:true},"legendFormatString":{type:"string[]",group:"Misc",defaultValue:['']},"title":{type:"string",group:"Misc",defaultValue:null},"titleHorizontalAlign":{type:"string",group:"Misc",defaultValue:'center'},"subTitle":{type:"string",group:"Misc",defaultValue:null},"subTitleHorizontalAlign":{type:"string",group:"Misc",defaultValue:'center'},"showTitle":{type:"boolean",group:"Misc",defaultValue:true},"titleFormatString":{type:"string",group:"Misc",defaultValue:''},"subTitleFormatString":{type:"string",group:"Misc",defaultValue:''},"xAxis":{type:"object[]",group:"Misc",defaultValue:null},"yAxis":{type:"object[]",group:"Misc",defaultValue:null}},aggregations:{"dataset":{type:"sap.service.visualization.dataset.SimpleDMDataset",multiple:false}},events:{"selectData":{}}}});sap.service.visualization.chart.Bar.M_EVENTS={'selectData':'selectData'};
/*!
 * @copyright@
 */
jQuery.sap.require("sap.service.visualization.chart.ChartSourceCode.libs.json2");jQuery.sap.require("sap.service.visualization.chart.ChartSourceCode.libs.saprivbase");jQuery.sap.require("sap.service.visualization.chart.ChartSourceCode.libs.sapcommonglobalization");jQuery.sap.require("sap.service.visualization.chart.ChartSourceCode.libs.saprivmodules");jQuery.sap.require("sap.ui.core.theming.Parameters");
sap.service.visualization.chart.Bar.prototype.isNumber=function(v){var p=/^(0|-?[1-9]\d*)$|^(0|-?[1-9]\d*)\.(\d+)$/;return p.exec(v)};
sap.service.visualization.chart.Bar.prototype.setWidth=function(w){this.setProperty("width",w);return this};
sap.service.visualization.chart.Bar.prototype.setHeight=function(h){this.setProperty("height",h);return this};
sap.service.visualization.chart.Bar.prototype.setDeselectEnabled=function(d){this.setProperty("deselectEnabled",d);if(this.bar!=undefined){var c={selectbility:{deSelectable:(d!=undefined)?d:true}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setSelectionMode=function(s){this.setProperty("selectionMode",s);if(this.bar!=undefined){if((s!='multiple')&&(s!='single')){s='single'}var c={selectbility:{selectionMode:s,}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setTitleHorizontalAlign=function(t){this.setProperty("titleHorizontalAlign",t);if(this.bar!=undefined){var c={title:{main:{HorizontalAlign:t}}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setSubTitleHorizontalAlign=function(s){this.setProperty("subTitleHorizontalAlign",s);if(this.bar!=undefined){var c={title:{sub:{HorizontalAlign:s}}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setLegendDirection=function(l){this.setProperty("legendDirection",l);if(this.bar!=undefined){var a=this.getLegendVerticalOffset();var b=this.getLegendHorizontalOffset();if(l=='left'||l=='right'){a=(this.isNumber(a))?parseInt(a):0;}else{b=(this.isNumber(b))?parseInt(b):0}var c={legend:{position:l,verticalOffset:a,horizontalOffset:b}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setLegendVerticalOffset=function(l){this.setProperty("legendVerticalOffset",l);if(this.bar!=undefined){var a=this.getLegendDirection();var l=0;var c;if(a=='left'||a=='right'){l=(this.isNumber(l))?parseInt(l):0;c={legend:{verticalOffset:l,}}}this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setLegendHorizontalOffset=function(l){this.setProperty("legendHorizontalOffset",l);if(this.bar!=undefined){var a=this.getLegendDirection();var l=0;var c;if(a=='top'||a=='left'){l=(this.isNumber(l))?parseInt(l):0;c={legend:{horizontalOffset:l,}}}this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setLegendFirst=function(l){this.setProperty("legendFirst",l);if(this.bar!=undefined){var l=this.getLegendFirst();var c={layout:{legendFirst:(l!=undefined)?l:true}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setDefaultSelectedItems=function(d){this.setProperty("defaultSelectedItems",d);if(this.bar!=undefined){var c={selectability:{defaultSelectedItems:d},};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setShowLegend=function(s){this.setProperty("showLegend",s);if(this.bar!=undefined){var c={legend:{visible:(s!=undefined)?s:true},};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setTitle=function(t){this.setProperty("title",t);if(this.bar!=undefined){var c={};if(t===""){c={title:{main:{text:t},sub:{visible:false}}}}else{c={title:{main:{text:t}}}}this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setSubTitle=function(s){this.setProperty("subTitle",s);if(this.bar!=undefined){var c={title:{sub:{text:s}}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setShowTitle=function(s){this.setProperty("showTitle",s);if(this.bar!=undefined){var c={title:{main:{visible:(s!=undefined)?s:true},sub:{visible:(s!=undefined)?s:true}}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setLegendFormatString=function(l){this.setProperty("legendFormatString",l);if(this.bar!=undefined){var c={legend:{legendFormatString:l}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setTitleFormatString=function(t){this.setProperty("titleFormatString",t);if(this.bar!=undefined){var c={title:{main:{formatString:t}}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setSubTitleFormatString=function(s){this.setProperty("subTitleFormatString",s);if(this.bar!=undefined){var c={title:{main:{formatString:s}}};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setMeasures=function(m){this.setProperty("measures",m);if(this.bar!=undefined){var c={measures:m};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setBarMarker=function(b){this.setProperty("barMarker",b);if(this.bar!=undefined){var c={bar:b};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setXAxis=function(x){this.setProperty("xAxis",x);if(this.bar!=undefined){var c={xAxis:x};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.setYAxis=function(y){this.setProperty("yAxis",y);if(this.bar!=undefined){var c={yAxis:y};this.bar.updateProperties(c)}return this};
sap.service.visualization.chart.Bar.prototype.onAfterRendering=function(e){var c=this;var r=this.getId();var d=this.getDataset().dataset;var o=new sap.service.visualization.ChartOption();var a=o.getXYChartOption(c,'Bar');sap.riv.viz.Environment.initialize({'locale':'en_US','log':'debug'});c.bar=new sap.riv.viz.BarChart(jQuery.sap.byId(r),a,d);c.bar.addListener('selectData',function(b){c.fireSelectData({Id:r,Data:b.data,EventName:b.name})});sap.ui.getCore().attachThemeChanged(function(b){var t=new sap.service.visualization.Themings();t.applyCurrentThemeToXYChart(c,'Bar')})};
