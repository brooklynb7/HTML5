/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.m.SegmentedButton");jQuery.sap.require("sap.m.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.m.SegmentedButton",{metadata:{publicMethods:["createButton"],library:"sap.m",properties:{"width":{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},"visible":{type:"boolean",group:"Appearance",defaultValue:true}},defaultAggregation:"buttons",aggregations:{"buttons":{type:"sap.m.Button",multiple:true,singularName:"button"}},associations:{"selectedButton":{type:"sap.m.Button",multiple:false}},events:{"select":{}}}});sap.m.SegmentedButton.M_EVENTS={'select':'select'};
sap.m.SegmentedButton.prototype.init=function(){if(jQuery.os.android||jQuery.os.blackberry){sap.m.SegmentedButton.prototype.ontouchstart=this._ontouchstart;sap.m.SegmentedButton.prototype.ontouchend=this._ontouchend}jQuery(window).resize(jQuery.proxy(this._fHandleResize,this))};
sap.m.SegmentedButton.prototype.onAfterRendering=function(){this._bInsideBar=(this.$().closest('.sapMBar').length>0)?true:false;this._fCalcBtnWidth()};
sap.m.SegmentedButton.prototype.onThemeChanged=function(e){this._fCalcBtnWidth()};
sap.m.SegmentedButton.prototype._fCalcBtnWidth=function(){var I=this.getButtons().length;if(I===0||!this.$().is(":visible")){return}var b=[],m=5,$=this.$(),a=$.children('#'+this.getButtons()[0].getId()).outerWidth(true)-$.children('#'+this.getButtons()[0].getId()).width(),c=$.outerWidth(true)-$.width();var p=(window.screen.width<$.parent().width())?window.screen.width:$.parent().width();if(this.getWidth()&&this.getWidth().indexOf("%")===-1){m=parseInt(this.getWidth())/I;for(var i=0;i<I;i++){b.push($.children('#'+this.getButtons()[i].getId()).outerWidth()-$.children('#'+this.getButtons()[i].getId()).width())}var M=Math.max.apply(null,b);m=m-M}else{for(var i=0;i<I;i++){b.push($.children('#'+this.getButtons()[i].getId()).outerWidth(true))}m=Math.max.apply(null,b);if(((p-c)>m*I||this._bInsideBar)&&this.getWidth().indexOf("%")===-1){m=m-a}else{m=(p-c)/I;m=m-a}}for(var i=0;i<I;i++){if(!isNaN(m))$.children('#'+this.getButtons()[i].getId()).width(m).css('visibility','visible')}};
sap.m.SegmentedButton.prototype._fHandleResize=function(){if(!this.getWidth()||this.getWidth().indexOf("%")!==-1){for(var i=0;i<this.getButtons().length;i++){this.$().children('#'+this.getButtons()[i].getId()).width('').css('visibility','hidden')}this._fCalcBtnWidth()}};
sap.m.SegmentedButton.prototype.createButton=function(t,u,e){var b=new sap.m.Button();if(u===null&&t!==null){b.setText(t)}else if(u!==null&&t===null){b.setIcon(u)}else throw new Error("in control: "+this.toString()+": method createButton() just accepts text or icon");if(e||e===undefined){b.setEnabled(true)}else{b.setEnabled(false)}this.addButton(b);return b};
sap.m.SegmentedButton.prototype.addButton=function(b){var t=this;b.attachTap(function(e){t.$().children().removeClass('sapMSegBBtnSel');e.getSource().$().addClass('sapMSegBBtnSel');if(t.getSelectedButton()!==e.getSource().getId()){t.setAssociation('selectedButton',e.getSource(),true);t.fireSelect({button:e.getSource(),id:e.getSource().getId()})}});this.addAggregation('buttons',b);return this};
sap.m.SegmentedButton.prototype.insertButton=function(b){var t=this;b.attachTap(function(e){t.$().children().removeClass('sapMSegBBtnSel');e.getSource().$().addClass('sapMSegBBtnSel');if(t.getSelectedButton()!==e.getSource().getId()){t.setAssociation('selectedButton',e.getSource(),true);t.fireSelect({button:e.getSource(),id:e.getSource().getId()})}});this.insertAggregation('buttons',b);return this};
sap.m.SegmentedButton.prototype._ontouchstart=function(e){if(e.srcControl.getEnabled())jQuery(e.target).toggleClass('sapMSegBBtnTouched',true)};
sap.m.SegmentedButton.prototype._ontouchend=function(e){if(e.srcControl.getEnabled())jQuery(e.target).toggleClass('sapMSegBBtnTouched',false)};
