(function(a){var b=/^\s*|\s*$/g,e,g='B'.replace(/A(.)|B/,'$1')==='$1';var h={majorVersion:'3',minorVersion:'5.8',releaseDate:'2012-11-20',_init:function(){var t=this,d=document,c=navigator,u=c.userAgent,i,f,n,j,p,v;t.isOpera=a.opera&&opera.buildNumber;t.isWebKit=/WebKit/.test(u);t.isIE=!t.isWebKit&&!t.isOpera&&(/MSIE/gi).test(u)&&(/Explorer/gi).test(c.appName);t.isIE6=t.isIE&&/MSIE [56]/.test(u);t.isIE7=t.isIE&&/MSIE [7]/.test(u);t.isIE8=t.isIE&&/MSIE [8]/.test(u);t.isIE9=t.isIE&&/MSIE [9]/.test(u);t.isGecko=!t.isWebKit&&/Gecko/.test(u);t.isMac=u.indexOf('Mac')!=-1;t.isAir=/adobeair/i.test(u);t.isIDevice=/(iPad|iPhone)/.test(u);t.isIOS5=t.isIDevice&&u.match(/AppleWebKit\/(\d*)/)[1]>=534;if(a.tinyMCEPreInit){t.suffix=tinyMCEPreInit.suffix;t.baseURL=tinyMCEPreInit.base;t.query=tinyMCEPreInit.query;return}t.suffix='';f=d.getElementsByTagName('base');for(i=0;i<f.length;i++){v=f[i].href;if(v){if(/^https?:\/\/[^\/]+$/.test(v))v+='/';j=v?v.match(/.*\//)[0]:''}}function k(n){if(n.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(n.src)){if(/_(src|dev)\.js/g.test(n.src))t.suffix='_src';if((p=n.src.indexOf('?'))!=-1)t.query=n.src.substring(p+1);t.baseURL=n.src.substring(0,n.src.lastIndexOf('/'));if(j&&t.baseURL.indexOf('://')==-1&&t.baseURL.indexOf('/')!==0)t.baseURL=j+t.baseURL;return t.baseURL}return null};f=d.getElementsByTagName('script');for(i=0;i<f.length;i++){if(k(f[i]))return}n=d.getElementsByTagName('head')[0];if(n){f=n.getElementsByTagName('script');for(i=0;i<f.length;i++){if(k(f[i]))return}}return},is:function(o,t){if(!t)return o!==e;if(t=='array'&&h.isArray(o))return true;return typeof(o)==t},isArray:Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},makeMap:function(c,d,m){var i;c=c||[];d=d||',';if(typeof(c)=="string")c=c.split(d);m=m||{};i=c.length;while(i--)m[c[i]]={};return m},each:function(o,c,s){var n,l;if(!o)return 0;s=s||o;if(o.length!==e){for(n=0,l=o.length;n<l;n++){if(c.call(s,o[n],n,o)===false)return 0}}else{for(n in o){if(o.hasOwnProperty(n)){if(c.call(s,o[n],n,o)===false)return 0}}}return 1},trim:function(s){return(s?''+s:'').replace(b,'')},create:function(s,p,r){var t=this,d,i,j,k,c,l=0;s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s);j=s[3].match(/(^|\.)(\w+)$/i)[2];i=t.createNS(s[3].replace(/\.\w+$/,''),r);if(i[j])return;if(s[2]=='static'){i[j]=p;if(this.onCreate)this.onCreate(s[2],s[3],i[j]);return}if(!p[j]){p[j]=function(){};l=1}i[j]=p[j];t.extend(i[j].prototype,p);if(s[5]){d=t.resolve(s[5]).prototype;k=s[5].match(/\.(\w+)$/i)[1];c=i[j];if(l){i[j]=function(){return d[k].apply(this,arguments)}}else{i[j]=function(){this.parent=d[k];return c.apply(this,arguments)}}i[j].prototype[j]=i[j];t.each(d,function(f,n){i[j].prototype[n]=d[n]});t.each(p,function(f,n){if(d[n]){i[j].prototype[n]=function(){this.parent=d[n];return f.apply(this,arguments)}}else{if(n!=j)i[j].prototype[n]=f}})}t.each(p['static'],function(f,n){i[j][n]=f});if(this.onCreate)this.onCreate(s[2],s[3],i[j].prototype)},walk:function(o,f,n,s){s=s||this;if(o){if(n)o=o[n];h.each(o,function(o,i){if(f.call(s,o,i,n)===false)return false;h.walk(o,f,n,s)})}},createNS:function(n,o){var i,v;o=o||a;n=n.split('.');for(i=0;i<n.length;i++){v=n[i];if(!o[v])o[v]={};o=o[v]}return o},resolve:function(n,o){var i,l;o=o||a;n=n.split('.');for(i=0,l=n.length;i<l;i++){o=o[n[i]];if(!o)break}return o},addUnload:function(f,s){var t=this,u;u=function(){var l=t.unloads,o,n;if(l){for(n in l){o=l[n];if(o&&o.func)o.func.call(o.scope,1)}if(a.detachEvent){a.detachEvent('onbeforeunload',c);a.detachEvent('onunload',u)}else if(a.removeEventListener)a.removeEventListener('unload',u,false);t.unloads=o=l=w=u=0;if(a.CollectGarbage)CollectGarbage()}};function c(){var d=document;function i(){d.detachEvent('onstop',i);if(u)u();d=0};if(d.readyState=='interactive'){if(d)d.attachEvent('onstop',i);a.setTimeout(function(){if(d)d.detachEvent('onstop',i)},0)}};f={func:f,scope:s||this};if(!t.unloads){if(a.attachEvent){a.attachEvent('onunload',u);a.attachEvent('onbeforeunload',c)}else if(a.addEventListener)a.addEventListener('unload',u,false);t.unloads=[f]}else t.unloads.push(f);return f},removeUnload:function(f){var u=this.unloads,r=null;h.each(u,function(o,i){if(o&&o.func==f){u.splice(i,1);r=f;return false}});return r},explode:function(s,d){if(!s||h.is(s,'array')){return s}return h.map(s.split(d||','),h.trim)},_addVer:function(u){var v;if(!this.query)return u;v=(u.indexOf('?')==-1?'?':'&')+this.query;if(u.indexOf('#')==-1)return u+v;return u.replace('#',v+'#')},_replace:function(f,r,s){if(g){return s.replace(f,function(){var v=r,c=arguments,i;for(i=0;i<c.length-2;i++){if(c[i]===e){v=v.replace(new RegExp('\\$'+i,'g'),'')}else{v=v.replace(new RegExp('\\$'+i,'g'),c[i])}}return v})}return s.replace(f,r)}};h._init();a.tinymce=a.tinyMCE=h})(window);(function($,b){var d=b.is,e=/^(href|src|style)$/i,u;if(!$&&window.console){return console.log("Load jQuery first!")}b.$=$;b.adapter={patchEditor:function(a){var f=$.fn;function c(n,v){var s=this;if(v)s.removeAttr('data-mce-style');return f.css.apply(s,arguments)};function h(n,v){var s=this;if(e.test(n)){if(v!==u){s.each(function(i,j){a.dom.setAttrib(j,n,v)});return s}else return s.attr('data-mce-'+n)}return f.attr.apply(s,arguments)};function p(j){if(j.css!==c){j.css=c;j.attr=h;j.tinymce=a;j.pushStack=function(){return p(f.pushStack.apply(this,arguments))}}return j};a.$=function(s,i){var j=a.getDoc();return p($(s||j,j||i))}}};b.extend=$.extend;b.extend(b,{map:$.map,grep:function(a,f){return $.grep(a,f||function(){return 1})},inArray:function(a,v){return $.inArray(v,a||[])}});var g={'tinymce.dom.DOMUtils':{select:function(p,s){var t=this;return $.find(p,t.get(s)||t.get(t.settings.root_element)||t.doc,[])},is:function(n,p){return $(this.get(n)).is(p)}}};b.onCreate=function(t,c,p){b.extend(p,g[c])}})(window.jQuery,tinymce);tinymce.create('tinymce.util.Dispatcher',{scope:null,listeners:null,inDispatch:false,Dispatcher:function(s){this.scope=s||this;this.listeners=[]},add:function(c,s){this.listeners.push({cb:c,scope:s||this.scope});return c},addToTop:function(c,s){var a=this,l={cb:c,scope:s||a.scope};if(a.inDispatch){a.listeners=[l].concat(a.listeners)}else{a.listeners.unshift(l)}return c},remove:function(c){var l=this.listeners,o=null;tinymce.each(l,function(a,i){if(c==a.cb){o=a;l.splice(i,1);return false}});return o},dispatch:function(){var s=this,r,a=arguments,i,l=s.listeners,b;s.inDispatch=true;for(i=0;i<l.length;i++){b=l[i];r=b.cb.apply(b.scope,a.length>0?a:[b.scope]);if(r===false)break}s.inDispatch=false;return r}});(function(){var e=tinymce.each;tinymce.create('tinymce.util.URI',{URI:function(u,s){var t=this,o,a,b,c;u=tinymce.trim(u);s=t.settings=s||{};if(/^([\w\-]+):([^\/]{2})/i.test(u)||/^\s*#/.test(u)){t.source=u;return}if(u.indexOf('/')===0&&u.indexOf('//')!==0)u=(s.base_uri?s.base_uri.protocol||'http':'http')+'://mce_host'+u;if(!/^[\w\-]*:?\/\//.test(u)){c=s.base_uri?s.base_uri.path:new tinymce.util.URI(location.href).directory;u=((s.base_uri&&s.base_uri.protocol)||'http')+'://mce_host'+t.toAbsPath(c,u)}u=u.replace(/@@/g,'(mce_at)');u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(u);e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(v,i){var s=u[i];if(s)s=s.replace(/\(mce_at\)/g,'@@');t[v]=s});b=s.base_uri;if(b){if(!t.protocol)t.protocol=b.protocol;if(!t.userInfo)t.userInfo=b.userInfo;if(!t.port&&t.host==='mce_host')t.port=b.port;if(!t.host||t.host==='mce_host')t.host=b.host;t.source=''}},setPath:function(p){var t=this;p=/^(.*?)\/?(\w+)?$/.exec(p);t.path=p[0];t.directory=p[1];t.file=p[2];t.source='';t.getURI()},toRelative:function(u){var t=this,o;if(u==="./")return u;u=new tinymce.util.URI(u,{base_uri:t});if((u.host!='mce_host'&&t.host!=u.host&&u.host)||t.port!=u.port||t.protocol!=u.protocol)return u.getURI();var a=t.getURI(),b=u.getURI();if(a==b||(a.charAt(a.length-1)=="/"&&a.substr(0,a.length-1)==b))return a;o=t.toRelPath(t.path,u.path);if(u.query)o+='?'+u.query;if(u.anchor)o+='#'+u.anchor;return o},toAbsolute:function(u,n){u=new tinymce.util.URI(u,{base_uri:this});return u.getURI(this.host==u.host&&this.protocol==u.protocol?n:0)},toRelPath:function(b,p){var a,c=0,o='',i,l;b=b.substring(0,b.lastIndexOf('/'));b=b.split('/');a=p.split('/');if(b.length>=a.length){for(i=0,l=b.length;i<l;i++){if(i>=a.length||b[i]!=a[i]){c=i+1;break}}}if(b.length<a.length){for(i=0,l=a.length;i<l;i++){if(i>=b.length||b[i]!=a[i]){c=i+1;break}}}if(c===1)return p;for(i=0,l=b.length-(c-1);i<l;i++)o+="../";for(i=c-1,l=a.length;i<l;i++){if(i!=c-1)o+="/"+a[i];else o+=a[i]}return o},toAbsPath:function(b,p){var i,n=0,o=[],t,a;t=/\/$/.test(p)?'/':'';b=b.split('/');p=p.split('/');e(b,function(k){if(k)o.push(k)});b=o;for(i=p.length-1,o=[];i>=0;i--){if(p[i].length===0||p[i]===".")continue;if(p[i]==='..'){n++;continue}if(n>0){n--;continue}o.push(p[i])}i=b.length-n;if(i<=0)a=o.reverse().join('/');else a=b.slice(0,i).join('/')+'/'+o.reverse().join('/');if(a.indexOf('/')!==0)a='/'+a;if(t&&a.lastIndexOf('/')!==a.length-1)a+=t;return a},getURI:function(n){var s,t=this;if(!t.source||n){s='';if(!n){if(t.protocol)s+=t.protocol+'://';if(t.userInfo)s+=t.userInfo+'@';if(t.host)s+=t.host;if(t.port)s+=':'+t.port}if(t.path)s+=t.path;if(t.query)s+='?'+t.query;if(t.anchor)s+='#'+t.anchor;t.source=s}return t.source}})})();(function(){var a=tinymce.each;tinymce.create('static tinymce.util.Cookie',{getHash:function(n){var v=this.get(n),h;if(v){a(v.split('&'),function(v){v=v.split('=');h=h||{};h[unescape(v[0])]=unescape(v[1])})}return h},setHash:function(n,v,e,p,d,s){var o='';a(v,function(v,k){o+=(!o?'':'&')+escape(k)+'='+escape(v)});this.set(n,o,e,p,d,s)},get:function(n){var c=document.cookie,e,p=n+"=",b;if(!c)return;b=c.indexOf("; "+p);if(b==-1){b=c.indexOf(p);if(b!==0)return null}else b+=2;e=c.indexOf(";",b);if(e==-1)e=c.length;return unescape(c.substring(b+p.length,e))},set:function(n,v,e,p,d,s){document.cookie=n+"="+escape(v)+((e)?"; expires="+e.toGMTString():"")+((p)?"; path="+escape(p):"")+((d)?"; domain="+d:"")+((s)?"; secure":"")},remove:function(n,p,d){var b=new Date();b.setTime(b.getTime()-1000);this.set(n,'',b,p,d)}})})();(function(){function serialize(o,q){var i,v,t,n;q=q||'"';if(o==null)return'null';t=typeof o;if(t=='string'){v='\bb\tt\nn\ff\rr\""\'\'\\\\';return q+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(q==='"'&&a==="'")return a;i=v.indexOf(b);if(i+1)return'\\'+v.charAt(i+1);a=b.charCodeAt().toString(16);return'\\u'+'0000'.substring(a.length)+a})+q}if(t=='object'){if(o.hasOwnProperty&&Object.prototype.toString.call(o)==='[object Array]'){for(i=0,v='[';i<o.length;i++)v+=(i>0?',':'')+serialize(o[i],q);return v+']'}v='{';for(n in o){if(o.hasOwnProperty(n)){v+=typeof o[n]!='function'?(v.length>1?','+q:q)+n+q+':'+serialize(o[n],q):''}}return v+'}'}return''+o};tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval('('+s+')')}catch(ex){}}}})();tinymce.create('static tinymce.util.XHR',{send:function(o){var x,t,w=window,c=0;function r(){if(!o.async||x.readyState==4||c++>10000){if(o.success&&c<10000&&x.status==200)o.success.call(o.success_scope,''+x.responseText,x,o);else if(o.error)o.error.call(o.error_scope,c>10000?'TIMED_OUT':'GENERAL',x,o);x=null}else w.setTimeout(r,10)};o.scope=o.scope||this;o.success_scope=o.success_scope||o.scope;o.error_scope=o.error_scope||o.scope;o.async=o.async===false?false:true;o.data=o.data||'';function g(s){x=0;try{x=new ActiveXObject(s)}catch(e){}return x};x=w.XMLHttpRequest?new XMLHttpRequest():g('Microsoft.XMLHTTP')||g('Msxml2.XMLHTTP');if(x){if(x.overrideMimeType)x.overrideMimeType(o.content_type);x.open(o.type||(o.data?'POST':'GET'),o.url,o.async);if(o.content_type)x.setRequestHeader('Content-Type',o.content_type);x.setRequestHeader('X-Requested-With','XMLHttpRequest');x.send(o.data);if(!o.async)return r();t=w.setTimeout(r,10)}}});(function(){var e=tinymce.extend,J=tinymce.util.JSON,X=tinymce.util.XHR;tinymce.create('tinymce.util.JSONRequest',{JSONRequest:function(s){this.settings=e({},s);this.count=0},send:function(o){var a=o.error,s=o.success;o=e(this.settings,o);o.success=function(c,x){c=J.parse(c);if(typeof(c)=='undefined'){c={error:'JSON Parse error.'}}if(c.error)a.call(o.error_scope||o.scope,c.error,x);else s.call(o.success_scope||o.scope,c.result)};o.error=function(t,x){if(a)a.call(o.error_scope||o.scope,t,x)};o.data=J.serialize({id:o.id||'c'+(this.count++),method:o.method,params:o.params});o.content_type='application/json';X.send(o)},'static':{sendRPC:function(o){return new tinymce.util.JSONRequest().send(o)}}})}());(function(t){t.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(e){return t.isMac?e.metaKey:e.ctrlKey&&!e.altKey}}})(tinymce);
tinymce.util.Quirks=function(a){var V=tinymce.VK,B=V.BACKSPACE,D=V.DELETE,d=a.dom,s=a.selection,b=a.settings,p=a.parser,c=a.serializer,f=tinymce.each;function g(e,i){try{a.getDoc().execCommand(e,false,i)}catch(j){}}function h(){var e=a.getDoc().documentMode;return e?e:6};function k(e){return e.isDefaultPrevented()};function l(){function i(e){var j,o,N,O;j=s.getRng();o=d.getParent(j.startContainer,d.isBlock);if(e){o=d.getNext(o,d.isBlock)}if(o){N=o.firstChild;while(N&&N.nodeType==3&&N.nodeValue.length===0){N=N.nextSibling}if(N&&N.nodeName==='SPAN'){O=N.cloneNode(false)}}f(d.select('span',o),function(P){P.setAttribute('data-mce-mark','1')});a.getDoc().execCommand(e?'ForwardDelete':'Delete',false,null);o=d.getParent(j.startContainer,d.isBlock);f(d.select('span',o),function(P){var Q=s.getBookmark();if(O){d.replace(O.cloneNode(false),P,true)}else if(!P.getAttribute('data-mce-mark')){d.remove(P,true)}else{P.removeAttribute('data-mce-mark')}s.moveToBookmark(Q)})}a.onKeyDown.add(function(a,e){var j;j=e.keyCode==D;if(!k(e)&&(j||e.keyCode==B)&&!V.modifierPressed(e)){e.preventDefault();i(j)}});a.addCommand('Delete',function(){i()})};function m(){function i(e){var o=d.create("body");var N=e.cloneContents();o.appendChild(N);return s.serializer.serialize(o,{format:'html'})}function j(e){var s=i(e);var o=d.createRng();o.selectNode(a.getBody());var N=i(o);return s===N}a.onKeyDown.add(function(a,e){var o=e.keyCode,N;if(!k(e)&&(o==D||o==B)){N=a.selection.isCollapsed();if(N&&!d.isEmpty(a.getBody())){return}if(tinymce.isIE&&!N){return}if(!N&&!j(a.selection.getRng())){return}a.setContent('');a.selection.setCursorLocation(a.getBody(),0);a.nodeChanged()}})};function n(){a.onKeyDown.add(function(a,e){if(!k(e)&&e.keyCode==65&&V.metaKeyPressed(e)){e.preventDefault();a.execCommand('SelectAll')}})};function q(){if(!a.settings.content_editable){d.bind(a.getDoc(),'focusin',function(e){s.setRng(s.getRng())});d.bind(a.getDoc(),'mousedown',function(e){if(e.target==a.getDoc().documentElement){a.getWin().focus();s.setRng(s.getRng())}})}};function r(){a.onKeyDown.add(function(a,e){if(!k(e)&&e.keyCode===B){if(s.isCollapsed()&&s.getRng(true).startOffset===0){var i=s.getNode();var j=i.previousSibling;if(j&&j.nodeName&&j.nodeName.toLowerCase()==="hr"){d.remove(j);tinymce.dom.Event.cancel(e)}}}})}function t(){if(!Range.prototype.getClientRects){a.onMouseDown.add(function(a,e){if(!k(e)&&e.target.nodeName==="HTML"){var i=a.getBody();i.blur();setTimeout(function(){i.focus()},0)}})}};function u(){a.onClick.add(function(a,e){e=e.target;if(/^(IMG|HR)$/.test(e.nodeName)){s.getSel().setBaseAndExtent(e,0,e,1)}if(e.nodeName=='A'&&d.hasClass(e,'mceItemAnchor')){s.select(e)}a.nodeChanged()})};function v(){function i(){var e=d.getAttribs(s.getStart().cloneNode(false));return function(){var N=s.getStart();if(N!==a.getBody()){d.setAttrib(N,"style",null);f(e,function(O){N.setAttributeNode(O.cloneNode(true))})}}}function j(){return!s.isCollapsed()&&d.getParent(s.getStart(),d.isBlock)!=d.getParent(s.getEnd(),d.isBlock)}function o(a,e){e.preventDefault();return false}a.onKeyPress.add(function(a,e){var N;if(!k(e)&&(e.keyCode==8||e.keyCode==46)&&j()){N=i();a.getDoc().execCommand('delete',false,null);N();e.preventDefault();return false}});d.bind(a.getDoc(),'cut',function(e){var N;if(!k(e)&&j()){N=i();a.onKeyUp.addToTop(o);setTimeout(function(){N();a.onKeyUp.remove(o)},0)}})}function w(){var e,i;d.bind(a.getDoc(),'selectionchange',function(){if(i){clearTimeout(i);i=0}i=window.setTimeout(function(){var j=s.getRng();if(!e||!tinymce.dom.RangeUtils.compareRanges(j,e)){a.nodeChanged();e=j}},50)})}function x(){document.body.setAttribute("role","application")}function y(){a.onKeyDown.add(function(a,e){if(!k(e)&&e.keyCode===B){if(s.isCollapsed()&&s.getRng(true).startOffset===0){var i=s.getNode().previousSibling;if(i&&i.nodeName&&i.nodeName.toLowerCase()==="table"){return tinymce.dom.Event.cancel(e)}}}})}function z(){if(h()>7){return}g('RespectVisibilityInDesign',true);a.contentStyles.push('.mceHideBrInPre pre br {display: none}');d.addClass(a.getBody(),'mceHideBrInPre');p.addNodeFilter('pre',function(e,o){var i=e.length,N,j,O,P;while(i--){N=e[i].getAll('br');j=N.length;while(j--){O=N[j];P=O.prev;if(P&&P.type===3&&P.value.charAt(P.value-1)!='\n'){P.value+='\n'}else{O.parent.insert(new tinymce.html.Node('#text',3),O,true).value='\n'}}}});c.addNodeFilter('pre',function(e,o){var i=e.length,N,j,O,P;while(i--){N=e[i].getAll('br');j=N.length;while(j--){O=N[j];P=O.prev;if(P&&P.type==3){P.value=P.value.replace(/\r?\n$/,'')}}}})}function A(){d.bind(a.getBody(),'mouseup',function(e){var i,j=s.getNode();if(j.nodeName=='IMG'){if(i=d.getStyle(j,'width')){d.setAttrib(j,'width',i.replace(/[^0-9%]+/g,''));d.setStyle(j,'width','')}if(i=d.getStyle(j,'height')){d.setAttrib(j,'height',i.replace(/[^0-9%]+/g,''));d.setStyle(j,'height','')}}})}function C(){a.onKeyDown.add(function(a,e){var i,j,o,N,O,P,Q;i=e.keyCode==D;if(!k(e)&&(i||e.keyCode==B)&&!V.modifierPressed(e)){j=s.getRng();o=j.startContainer;N=j.startOffset;Q=j.collapsed;if(o.nodeType==3&&o.nodeValue.length>0&&((N===0&&!Q)||(Q&&N===(i?0:1)))){nonEmptyElements=a.schema.getNonEmptyElements();e.preventDefault();O=d.create('br',{id:'__tmp'});o.parentNode.insertBefore(O,o);a.getDoc().execCommand(i?'ForwardDelete':'Delete',false,null);o=s.getRng().startContainer;P=o.previousSibling;if(P&&P.nodeType==1&&!d.isBlock(P)&&d.isEmpty(P)&&!nonEmptyElements[P.nodeName.toLowerCase()]){d.remove(P)}d.remove('__tmp')}}})}function E(){a.onKeyDown.add(function(a,e){var i,j,o,N,O;if(k(e)||e.keyCode!=V.BACKSPACE){return}i=s.getRng();j=i.startContainer;o=i.startOffset;N=d.getRoot();O=j;if(!i.collapsed||o!==0){return}while(O&&O.parentNode&&O.parentNode.firstChild==O&&O.parentNode!=N){O=O.parentNode}if(O.tagName==='BLOCKQUOTE'){a.formatter.toggle('blockquote',null,O);i=d.createRng();i.setStart(j,0);i.setEnd(j,0);s.setRng(i)}})};function F(){function e(){a._refreshContentEditable();g("StyleWithCSS",false);g("enableInlineTableEditing",false);if(!b.object_resizing){g("enableObjectResizing",false)}};if(!b.readonly){a.onBeforeExecCommand.add(e);a.onMouseDown.add(e)}};function G(){function e(a,o){f(d.select('a'),function(i){var j=i.parentNode,N=d.getRoot();if(j.lastChild===i){while(j&&!d.isBlock(j)){if(j.parentNode.lastChild!==j||j===N){return}j=j.parentNode}d.add(j,'br',{'data-mce-bogus':1})}})};a.onExecCommand.add(function(a,i){if(i==='CreateLink'){e(a)}});a.onSetContent.add(s.onSetContent.add(e))};function H(){if(b.forced_root_block){a.onInit.add(function(){g('DefaultParagraphSeparator',b.forced_root_block)})}}function I(){function e(i,j){if(!i||!j.initial){a.execCommand('mceRepaint')}};a.onUndo.add(e);a.onRedo.add(e);a.onSetContent.add(e)};function J(){a.onKeyDown.add(function(a,e){var i;if(!k(e)&&e.keyCode==B){i=a.getDoc().selection.createRange();if(i&&i.item){e.preventDefault();a.undoManager.beforeChange();d.remove(i.item(0));a.undoManager.add()}}})};function K(){var e;if(h()>=10){e='';f('p div h1 h2 h3 h4 h5 h6'.split(' '),function(j,i){e+=(i>0?',':'')+j+':empty'});a.contentStyles.push(e+'{padding-right: 1px !important}')}};function L(){var j,o,N,O,P,Q,R,S,T,U,W,X,Y,Z=document,$=a.getDoc();if(!b.object_resizing||b.webkit_fake_resize===false){return}g("enableObjectResizing",false);W={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};function _(e){var i,e1;i=e.screenX-Q;e1=e.screenY-R;X=i*P[2]+S;Y=e1*P[3]+T;X=X<5?5:X;Y=Y<5?5:Y;if(V.modifierPressed(e)||(N.nodeName=="IMG"&&P[2]*P[3]!==0)){X=Math.round(Y/U);Y=Math.round(X*U)}d.setStyles(O,{width:X,height:Y});if(P[2]<0&&O.clientWidth<=X){d.setStyle(O,'left',j+(S-X))}if(P[3]<0&&O.clientHeight<=Y){d.setStyle(O,'top',o+(T-Y))}}function a1(){function e(i,e1){if(e1){if(N.style[i]||!a.schema.isValid(N.nodeName.toLowerCase(),i)){d.setStyle(N,i,e1)}else{d.setAttrib(N,i,e1)}}}e('width',X);e('height',Y);d.unbind($,'mousemove',_);d.unbind($,'mouseup',a1);if(Z!=$){d.unbind(Z,'mousemove',_);d.unbind(Z,'mouseup',a1)}d.remove(O);b1(N)}function b1(i){var e1,f1,g1;c1();e1=d.getPos(i);j=e1.x;o=e1.y;f1=i.offsetWidth;g1=i.offsetHeight;if(N!=i){N=i;X=Y=0}f(W,function(h1,i1){var j1;j1=d.get('mceResizeHandle'+i1);if(!j1){j1=d.add($.documentElement,'div',{id:'mceResizeHandle'+i1,'class':'mceResizeHandle',style:'cursor:'+i1+'-resize; margin:0; padding:0'});d.bind(j1,'mousedown',function(e){e.preventDefault();a1();Q=e.screenX;R=e.screenY;S=N.clientWidth;T=N.clientHeight;U=T/S;P=h1;O=N.cloneNode(true);d.addClass(O,'mceClonedResizable');d.setStyles(O,{left:j,top:o,margin:0});$.documentElement.appendChild(O);d.bind($,'mousemove',_);d.bind($,'mouseup',a1);if(Z!=$){d.bind(Z,'mousemove',_);d.bind(Z,'mouseup',a1)}})}else{d.show(j1)}d.setStyles(j1,{left:(f1*h1[0]+j)-(j1.offsetWidth/2),top:(g1*h1[1]+o)-(j1.offsetHeight/2)})});if(!tinymce.isOpera&&N.nodeName=="IMG"){N.setAttribute('data-mce-selected','1')}}function c1(){if(N){N.removeAttribute('data-mce-selected')}for(var e in W){d.hide('mceResizeHandle'+e)}}a.contentStyles.push('.mceResizeHandle {'+'position: absolute;'+'border: 1px solid black;'+'background: #FFF;'+'width: 5px;'+'height: 5px;'+'z-index: 10000'+'}'+'.mceResizeHandle:hover {'+'background: #000'+'}'+'img[data-mce-selected] {'+'outline: 1px solid black'+'}'+'img.mceClonedResizable, table.mceClonedResizable {'+'position: absolute;'+'outline: 1px dashed black;'+'opacity: .5;'+'z-index: 10000'+'}');function d1(){var e=d.getParent(s.getNode(),'table,img');f(d.select('img[data-mce-selected]'),function(i){i.removeAttribute('data-mce-selected')});if(e){b1(e)}else{c1()}}a.onNodeChange.add(d1);d.bind($,'selectionchange',d1);a.serializer.addAttributeFilter('data-mce-selected',function(e,e1){var i=e.length;while(i--){e[i].attr(e1,null)}})}function M(){if(h()<9){p.addNodeFilter('noscript',function(e){var i=e.length,j,o;while(i--){j=e[i];o=j.firstChild;if(o){j.attr('data-mce-innertext',o.value)}}});c.addNodeFilter('noscript',function(e){var i=e.length,j,o,N;while(i--){j=e[i];o=e[i].firstChild;if(o){o.value=tinymce.html.Entities.decode(o.value)}else{N=j.attributes.map['data-mce-innertext'];if(N){j.attr('data-mce-innertext',null);o=new tinymce.html.Node('#text',3);o.value=N;o.raw=true;j.append(o)}}}})}}y();E();m();if(tinymce.isWebKit){C();l();q();u();H();if(tinymce.isIDevice){w()}else{L();n()}}if(tinymce.isIE){r();x();z();A();J();K();M()}if(tinymce.isGecko){r();t();v();F();G();I()}if(tinymce.isOpera){L()}};
(function(t){var n,b,r,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[<>&\"\']/g,e=/&(#x|#)?([\w]+);/g,f={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};b={'\"':'&quot;',"'":'&#39;','<':'&lt;','>':'&gt;','&':'&amp;'};r={'&lt;':'<','&gt;':'>','&amp;':'&','&quot;':'"','&apos;':"'"};function g(i){var j;j=document.createElement("div");j.innerHTML=i;return j.textContent||j.innerText||i};function h(j,k){var i,l,m,o={};if(j){j=j.split(',');k=k||10;for(i=0;i<j.length;i+=2){l=String.fromCharCode(parseInt(j[i],k));if(!b[l]){m='&'+j[i+1]+';';o[l]=m;o[m]=l}}return o}};n=h('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,'+'5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,'+'5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,'+'5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,'+'68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,'+'6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,'+'6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,'+'75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,'+'7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,'+'7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,'+'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,'+'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,'+'t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,'+'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,'+'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,'+'81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,'+'8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,'+'8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,'+'8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,'+'8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,'+'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,'+'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,'+'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,'+'80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,'+'811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro',32);t.html=t.html||{};t.html.Entities={encodeRaw:function(i,j){return i.replace(j?a:c,function(k){return b[k]||k})},encodeAllRaw:function(i){return(''+i).replace(d,function(j){return b[j]||j})},encodeNumeric:function(i,j){return i.replace(j?a:c,function(k){if(k.length>1)return'&#'+(((k.charCodeAt(0)-0xD800)*0x400)+(k.charCodeAt(1)-0xDC00)+0x10000)+';';return b[k]||'&#'+k.charCodeAt(0)+';'})},encodeNamed:function(i,j,k){k=k||n;return i.replace(j?a:c,function(l){return b[l]||k[l]||l})},getEncodeFunc:function(i,j){var E=t.html.Entities;j=h(j)||n;function k(m,o){return m.replace(o?a:c,function(p){return b[p]||j[p]||'&#'+p.charCodeAt(0)+';'||p})};function l(m,o){return E.encodeNamed(m,o,j)};i=t.makeMap(i.replace(/\+/g,','));if(i.named&&i.numeric)return k;if(i.named){if(j)return l;return E.encodeNamed}if(i.numeric)return E.encodeNumeric;return E.encodeRaw},decode:function(i){return i.replace(e,function(j,k,v){if(k){v=parseInt(v,k.length===2?16:10);if(v>0xFFFF){v-=0x10000;return String.fromCharCode(0xD800+(v>>10),0xDC00+(v&0x3FF))}else return f[v]||String.fromCharCode(v)}return r[j]||n[j]||g(j)})}}})(tinymce);
tinymce.html.Styles=function(s,d){var e=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,u=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,t=/\s+$/,h=/rgb/,j,i,k={},m;s=s||{};m='\\" \\\' \\; \\: ; : \uFEFF'.split(' ');for(i=0;i<m.length;i++){k[m[i]]='\uFEFF'+i;k['\uFEFF'+i]=m[i]}function n(a,r,g,b){function c(v){v=parseInt(v).toString(16);return v.length>1?v:'0'+v};return'#'+c(r)+c(g)+c(b)};return{toHex:function(c){return c.replace(e,n)},parse:function(g){var l={},o,p,v,q,r=s.url_converter,w=s.url_converter_scope||this;function x(a,b){var c,D,E,F;c=l[a+'-top'+b];if(!c)return;D=l[a+'-right'+b];if(c!=D)return;E=l[a+'-bottom'+b];if(D!=E)return;F=l[a+'-left'+b];if(E!=F)return;l[a+b]=F;delete l[a+'-top'+b];delete l[a+'-right'+b];delete l[a+'-bottom'+b];delete l[a+'-left'+b]};function y(a){var v=l[a],i;if(!v||v.indexOf(' ')<0)return;v=v.split(' ');i=v.length;while(i--){if(v[i]!==v[0])return false}l[a]=v[0];return true};function z(D,a,b,c){if(!y(a))return;if(!y(b))return;if(!y(c))return;l[D]=l[a]+' '+l[b]+' '+l[c];delete l[a];delete l[b];delete l[c]};function A(a){q=true;return k[a]};function B(a,b){if(q){a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a]})}if(!b)a=a.replace(/\\([\'\";:])/g,"$1");return a};function C(a,b,c,D,E,F){E=E||F;if(E){E=B(E);return"'"+E.replace(/\'/g,"\\'")+"'"}b=B(b||c||D);if(r)b=r.call(w,b,'style');return"url('"+b.replace(/\'/g,"\\'")+"')"};if(g){g=g.replace(/\\[\"\';:\uFEFF]/g,A).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,A)});while(o=f.exec(g)){p=o[1].replace(t,'').toLowerCase();v=o[2].replace(t,'');if(p&&v.length>0){if(p==='font-weight'&&v==='700')v='bold';else if(p==='color'||p==='background-color')v=v.toLowerCase();v=v.replace(e,n);v=v.replace(u,C);l[p]=q?B(v,true):v}f.lastIndex=o.index+o[0].length}x("border","");x("border","-width");x("border","-color");x("border","-style");x("padding","");x("margin","");z('border','border-width','border-style','border-color');if(l.border==='medium none')delete l.border}return l},serialize:function(a,b){var c='',g,v;function o(g){var p,i,l,v;p=d.styles[g];if(p){for(i=0,l=p.length;i<l;i++){g=p[i];v=a[g];if(v!==j&&v.length>0)c+=(c.length>0?' ':'')+g+': '+v+';'}}};if(b&&d&&d.styles){o('*');o(b)}else{for(g in a){v=a[g];if(v!==j&&v.length>0)c+=(c.length>0?' ':'')+g+': '+v+';'}}return c}}};
(function(t){var m={},a=t.makeMap,e=t.each;function s(c,d){return c.split(d||',')};function u(l,d){var k,c={};function r(v){return v.replace(/[A-Z]+/g,function(k){return r(l[k])})};for(k in l){if(l.hasOwnProperty(k))l[k]=r(l[k])}r(d).replace(/#/g,'#text').replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(f,n,h,i){h=s(h,'|');c[n]={attributes:a(h),attributesOrder:h,children:a(i,'|',{'#comment':{}})}});return c};function g(){var h=m.html5;if(!h){h=m.html5=u({A:'id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup',B:'#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|'+'meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr',C:'#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|'+'figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|'+'p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video'},'html[A|manifest][body|head]'+'head[A][base|command|link|meta|noscript|script|style|title]'+'title[A][#]'+'base[A|href|target][]'+'link[A|href|rel|media|type|sizes][]'+'meta[A|http-equiv|name|content|charset][]'+'style[A|type|media|scoped][#]'+'script[A|charset|type|src|defer|async][#]'+'noscript[A][C]'+'body[A][C]'+'section[A][C]'+'nav[A][C]'+'article[A][C]'+'aside[A][C]'+'h1[A][B]'+'h2[A][B]'+'h3[A][B]'+'h4[A][B]'+'h5[A][B]'+'h6[A][B]'+'hgroup[A][h1|h2|h3|h4|h5|h6]'+'header[A][C]'+'footer[A][C]'+'address[A][C]'+'p[A][B]'+'br[A][]'+'pre[A][B]'+'dialog[A][dd|dt]'+'blockquote[A|cite][C]'+'ol[A|start|reversed][li]'+'ul[A][li]'+'li[A|value][C]'+'dl[A][dd|dt]'+'dt[A][B]'+'dd[A][C]'+'a[A|href|target|ping|rel|media|type][B]'+'em[A][B]'+'strong[A][B]'+'small[A][B]'+'cite[A][B]'+'q[A|cite][B]'+'dfn[A][B]'+'abbr[A][B]'+'code[A][B]'+'var[A][B]'+'samp[A][B]'+'kbd[A][B]'+'sub[A][B]'+'sup[A][B]'+'i[A][B]'+'b[A][B]'+'mark[A][B]'+'progress[A|value|max][B]'+'meter[A|value|min|max|low|high|optimum][B]'+'time[A|datetime][B]'+'ruby[A][B|rt|rp]'+'rt[A][B]'+'rp[A][B]'+'bdo[A][B]'+'span[A][B]'+'ins[A|cite|datetime][B]'+'del[A|cite|datetime][B]'+'figure[A][C|legend|figcaption]'+'figcaption[A][C]'+'img[A|alt|src|height|width|usemap|ismap][]'+'iframe[A|name|src|height|width|sandbox|seamless][]'+'embed[A|src|height|width|type][]'+'object[A|data|type|height|width|usemap|name|form|classid][param]'+'param[A|name|value][]'+'details[A|open][C|legend]'+'command[A|type|label|icon|disabled|checked|radiogroup][]'+'menu[A|type|label][C|li]'+'legend[A][C|B]'+'div[A][C]'+'source[A|src|type|media][]'+'audio[A|src|autobuffer|autoplay|loop|controls][source]'+'video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]'+'hr[A][]'+'form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]'+'fieldset[A|disabled|form|name][C|legend]'+'label[A|form|for][B]'+'input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|'+'multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]'+'button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]'+'select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]'+'datalist[A][B|option]'+'optgroup[A|disabled|label][option]'+'option[A|disabled|selected|label|value][]'+'textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]'+'keygen[A|autofocus|challenge|disabled|form|keytype|name][]'+'output[A|for|form|name][B]'+'canvas[A|width|height][]'+'map[A|name][B|C]'+'area[A|shape|coords|href|alt|target|media|rel|ping|type][]'+'mathml[A][]'+'svg[A][]'+'table[A|border][caption|colgroup|thead|tfoot|tbody|tr]'+'caption[A][C]'+'colgroup[A|span][col]'+'col[A|span][]'+'thead[A][tr]'+'tfoot[A][tr]'+'tbody[A][tr]'+'tr[A][th|td]'+'th[A|headers|rowspan|colspan|scope][B]'+'td[A|headers|rowspan|colspan][C]'+'wbr[A][]')}return h};function b(){var h=m.html4;if(!h){h=m.html4=u({Z:'H|K|N|O|P',Y:'X|form|R|Q',ZG:'E|span|width|align|char|charoff|valign',X:'p|T|div|U|W|isindex|fieldset|table',ZF:'E|align|char|charoff|valign',W:'pre|hr|blockquote|address|center|noframes',ZE:'abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height',ZD:'[E][S]',U:'ul|ol|dl|menu|dir',ZC:'p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q',T:'h1|h2|h3|h4|h5|h6',ZB:'X|S|Q',S:'R|P',ZA:'a|G|J|M|O|P',R:'a|H|K|N|O',Q:'noscript|P',P:'ins|del|script',O:'input|select|textarea|label|button',N:'M|L',M:'em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym',L:'sub|sup',K:'J|I',J:'tt|i|b|u|s|strike',I:'big|small|font|basefont',H:'G|F',G:'br|span|bdo',F:'object|applet|img|map|iframe',E:'A|B|C',D:'accesskey|tabindex|onfocus|onblur',C:'onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup',B:'lang|xml:lang|dir',A:'id|class|style|title'},'script[id|charset|type|language|src|defer|xml:space][]'+'style[B|id|type|media|title|xml:space][]'+'object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]'+'param[id|name|value|valuetype|type][]'+'p[E|align][#|S]'+'a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]'+'br[A|clear][]'+'span[E][#|S]'+'bdo[A|C|B][#|S]'+'applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]'+'h1[E|align][#|S]'+'img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]'+'map[B|C|A|name][X|form|Q|area]'+'h2[E|align][#|S]'+'iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]'+'h3[E|align][#|S]'+'tt[E][#|S]'+'i[E][#|S]'+'b[E][#|S]'+'u[E][#|S]'+'s[E][#|S]'+'strike[E][#|S]'+'big[E][#|S]'+'small[E][#|S]'+'font[A|B|size|color|face][#|S]'+'basefont[id|size|color|face][]'+'em[E][#|S]'+'strong[E][#|S]'+'dfn[E][#|S]'+'code[E][#|S]'+'q[E|cite][#|S]'+'samp[E][#|S]'+'kbd[E][#|S]'+'var[E][#|S]'+'cite[E][#|S]'+'abbr[E][#|S]'+'acronym[E][#|S]'+'sub[E][#|S]'+'sup[E][#|S]'+'input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]'+'select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]'+'optgroup[E|disabled|label][option]'+'option[E|selected|disabled|label|value][]'+'textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]'+'label[E|for|accesskey|onfocus|onblur][#|S]'+'button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]'+'h4[E|align][#|S]'+'ins[E|cite|datetime][#|Y]'+'h5[E|align][#|S]'+'del[E|cite|datetime][#|Y]'+'h6[E|align][#|S]'+'div[E|align][#|Y]'+'ul[E|type|compact][li]'+'li[E|type|value][#|Y]'+'ol[E|type|compact|start][li]'+'dl[E|compact][dt|dd]'+'dt[E][#|S]'+'dd[E][#|Y]'+'menu[E|compact][li]'+'dir[E|compact][li]'+'pre[E|width|xml:space][#|ZA]'+'hr[E|align|noshade|size|width][]'+'blockquote[E|cite][#|Y]'+'address[E][#|S|p]'+'center[E][#|Y]'+'noframes[E][#|Y]'+'isindex[A|B|prompt][]'+'fieldset[E][#|legend|Y]'+'legend[E|accesskey|align][#|S]'+'table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]'+'caption[E|align][#|S]'+'col[ZG][]'+'colgroup[ZG][col]'+'thead[ZF][tr]'+'tr[ZF|bgcolor][th|td]'+'th[E|ZE][#|Y]'+'form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]'+'noscript[E][#|Y]'+'td[E|ZE][#|Y]'+'tfoot[ZF][tr]'+'tbody[ZF][tr]'+'area[E|D|shape|coords|href|nohref|alt|target][]'+'base[id|href|target][]'+'body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]')}return h};t.html.Schema=function(c){var d=this,f={},h={},p=[],v,j;var w,k,l,n,o,q,r={};function x(i,E,F){var G=c[i];if(!G){G=m[i];if(!G){G=a(E,' ',a(E.toUpperCase(),' '));G=t.extend(G,F);m[i]=G}}else{G=a(G,',',a(G.toUpperCase(),' '))}return G};c=c||{};j=c.schema=="html5"?g():b();if(c.verify_html===false)c.valid_elements='*[*]';if(c.valid_styles){v={};e(c.valid_styles,function(i,E){v[E]=t.explode(i)})}w=x('whitespace_elements','pre script noscript style textarea');k=x('self_closing_elements','colgroup dd dt li option p td tfoot th thead tr');l=x('short_ended_elements','area base basefont br col frame hr img input isindex link meta param embed source wbr');n=x('boolean_attributes','checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls');q=x('non_empty_elements','td th iframe video audio object',l);textBlockElementsMap=x('text_block_elements','h1 h2 h3 h4 h5 h6 p div address pre form '+'blockquote center dir fieldset header footer article section hgroup aside nav figure');o=x('block_elements','hr table tbody thead tfoot '+'th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup',textBlockElementsMap);function y(i){return new RegExp('^'+i.replace(/([?+*])/g,'.$1')+'$')};function z(i){var E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,_=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,a1=/[*?+]/;if(i){i=s(i);if(f['@']){U=f['@'].attributes;V=f['@'].attributesOrder}for(E=0,F=i.length;E<F;E++){J=$.exec(i[E]);if(J){S=J[1];N=J[2];T=J[3];M=J[4];Q={};R=[];K={attributes:Q,attributesOrder:R};if(S==='#')K.paddEmpty=true;if(S==='-')K.removeEmpty=true;if(U){for(X in U)Q[X]=U[X];R.push.apply(R,V)}if(M){M=s(M,'|');for(G=0,H=M.length;G<H;G++){J=_.exec(M[G]);if(J){L={};P=J[1];O=J[2].replace(/::/g,':');S=J[3];Z=J[4];if(P==='!'){K.attributesRequired=K.attributesRequired||[];K.attributesRequired.push(O);L.required=true}if(P==='-'){delete Q[O];R.splice(t.inArray(R,O),1);continue}if(S){if(S==='='){K.attributesDefault=K.attributesDefault||[];K.attributesDefault.push({name:O,value:Z});L.defaultValue=Z}if(S===':'){K.attributesForced=K.attributesForced||[];K.attributesForced.push({name:O,value:Z});L.forcedValue=Z}if(S==='<')L.validValues=a(Z,'?')}if(a1.test(O)){K.attributePatterns=K.attributePatterns||[];L.pattern=y(O);K.attributePatterns.push(L)}else{if(!Q[O])R.push(O);Q[O]=L}}}}if(!U&&N=='@'){U=Q;V=R}if(T){K.outputName=N;f[T]=K}if(a1.test(N)){K.pattern=y(N);p.push(K)}else f[N]=K}}}};function A(i){f={};p=[];z(i);e(j,function(E,F){h[F]=E.children})};function B(i){var E=/^(~)?(.+)$/;if(i){e(s(i),function(F){var G=E.exec(F),H=G[1]==='~',I=H?'span':'div',J=G[2];h[J]=h[I];r[J]=I;if(!H){o[J.toUpperCase()]={};o[J]={}}if(!f[J]){f[J]=f[I]}e(h,function(K,L){if(K[I])K[J]=K[I]})})}};function C(i){var E=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(i){e(s(i),function(F){var G=E.exec(F),H,I;if(G){I=G[1];if(I)H=h[G[2]];else H=h[G[2]]={'#comment':{}};H=h[G[2]];e(s(G[3],'|'),function(J){if(I==='-')delete H[J];else H[J]={}})}})}};function D(E){var F=f[E],i;if(F)return F;i=p.length;while(i--){F=p[i];if(F.pattern.test(E))return F}};if(!c.valid_elements){e(j,function(i,E){f[E]={attributes:i.attributes,attributesOrder:i.attributesOrder};h[E]=i.children});if(c.schema!="html5"){e(s('strong/b,em/i'),function(i){i=s(i,'/');f[i[1]].outputName=i[0]})}f.img.attributesDefault=[{name:'alt',value:''}];e(s('ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i'),function(i){if(f[i]){f[i].removeEmpty=true}});e(s('p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption'),function(i){f[i].paddEmpty=true})}else A(c.valid_elements);B(c.custom_elements);C(c.valid_children);z(c.extended_valid_elements);C('+ol[ul|ol],+ul[ul|ol]');if(c.invalid_elements){t.each(t.explode(c.invalid_elements),function(i){if(f[i])delete f[i]})}if(!D('span'))z('span[!data-mce-type|*]');d.children=h;d.styles=v;d.getBoolAttrs=function(){return n};d.getBlockElements=function(){return o};d.getTextBlockElements=function(){return textBlockElementsMap};d.getShortEndedElements=function(){return l};d.getSelfClosingElements=function(){return k};d.getNonEmptyElements=function(){return q};d.getWhiteSpaceElements=function(){return w};d.isValidChild=function(i,E){var F=h[i];return!!(F&&F[E])};d.isValid=function(E,F){var G,i,H=D(E);if(H){if(F){if(H.attributes[F]){return true}G=H.attributePatterns;if(G){i=G.length;while(i--){if(G[i].pattern.test(E)){return true}}}}else{return true}}return false};d.getElementRule=D;d.getCustomElements=function(){return r};d.addValidElements=z;d.setValidElements=A;d.addCustomElements=B;d.addValidChildren=C;d.elements=f}})(tinymce);(function(t){t.html.SaxParser=function(s,a){var b=this,n=function(){};s=s||{};b.schema=a=a||new t.html.Schema();if(s.fix_self_closing!==false)s.fix_self_closing=true;t.each('comment cdata text start end pi doctype'.split(' '),function(c){if(c)b[c]=s[c]||n});b.parse=function(h){var b=this,m,c=0,v,e,d=[],f,i,g,j,k,r,l,o,p,q,u,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=0,L=t.html.Entities.decode,M,N;function O(j){var Q,i;Q=d.length;while(Q--){if(d[Q].name===j)break}if(Q>=0){for(i=d.length-1;i>=Q;i--){j=d[i];if(j.valid)b.end(j.name)}d.length=Q}};function P(Q,j,v,R,S){var T,i;j=j.toLowerCase();v=j in o?j:L(v||R||S||'');if(q&&!k&&j.indexOf('data-')!==0){T=A[j];if(!T&&B){i=B.length;while(i--){T=B[i];if(T.pattern.test(j))break}if(i===-1)T=null}if(!T)return;if(T.validValues&&!(v in T.validValues))return}f.map[j]=v;f.push({name:j,value:v})};G=new RegExp('<(?:'+'(?:!--([\\w\\W]*?)-->)|'+'(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|'+'(?:!DOCTYPE([\\w\\W]*?)>)|'+'(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|'+'(?:\\/([^>]+)>)|'+'(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\\/|\\s+)>)'+')','g');H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;I={'script':/<\/script[^>]*>/gi,'style':/<\/style[^>]*>/gi,'noscript':/<\/noscript[^>]*>/gi};l=a.getShortEndedElements();F=s.self_closing_elements||a.getSelfClosingElements();o=a.getBoolAttrs();q=s.validate;r=s.remove_internals;M=s.fix_self_closing;N=t.isIE;z=/^:/;while(m=G.exec(h)){if(c<m.index)b.text(L(h.substr(c,m.index-c)));if(v=m[6]){v=v.toLowerCase();if(N&&z.test(v))v=v.substr(1);O(v)}else if(v=m[7]){v=v.toLowerCase();if(N&&z.test(v))v=v.substr(1);p=v in l;if(M&&F[v]&&d.length>0&&d[d.length-1].name===v)O(v);if(!q||(u=a.getElementRule(v))){w=true;if(q){A=u.attributes;B=u.attributePatterns}if(y=m[8]){k=y.indexOf('data-mce-type')!==-1;if(k&&r)w=false;f=[];f.map={};y.replace(H,P)}else{f=[];f.map={}}if(q&&!k){C=u.attributesRequired;D=u.attributesDefault;E=u.attributesForced;if(E){i=E.length;while(i--){x=E[i];j=x.name;J=x.value;if(J==='{$uid}')J='mce_'+K++;f.map[j]=J;f.push({name:j,value:J})}}if(D){i=D.length;while(i--){x=D[i];j=x.name;if(!(j in f.map)){J=x.value;if(J==='{$uid}')J='mce_'+K++;f.map[j]=J;f.push({name:j,value:J})}}}if(C){i=C.length;while(i--){if(C[i]in f.map)break}if(i===-1)w=false}if(f.map['data-mce-bogus'])w=false}if(w)b.start(v,f,p)}else w=false;if(e=I[v]){e.lastIndex=c=m.index+m[0].length;if(m=e.exec(h)){if(w)g=h.substr(c,m.index-c);c=m.index+m[0].length}else{g=h.substr(c);c=h.length}if(w&&g.length>0)b.text(g,true);if(w)b.end(v);G.lastIndex=c;continue}if(!p){if(!y||y.indexOf('/')!=y.length-1)d.push({name:v,valid:w});else if(w)b.end(v)}}else if(v=m[1]){b.comment(v)}else if(v=m[2]){b.cdata(v)}else if(v=m[3]){b.doctype(v)}else if(v=m[4]){b.pi(v,m[5])}c=m.index+m[0].length}if(c<h.length)b.text(L(h.substr(c)));for(i=d.length-1;i>=0;i--){v=d[i];if(v.valid)b.end(v.name)}}}})(tinymce);(function(t){var w=/^[ \t\r\n]*$/,a={'#text':3,'#comment':8,'#cdata':4,'#pi':7,'#doctype':10,'#document-fragment':11};function b(n,r,p){var s,c,d=p?'lastChild':'firstChild',e=p?'prev':'next';if(n[d])return n[d];if(n!==r){s=n[e];if(s)return s;for(c=n.parent;c&&c!==r;c=c.parent){s=c[e];if(s)return s}}};function N(n,c){this.name=n;this.type=c;if(c===1){this.attributes=[];this.attributes.map={}}}t.extend(N.prototype,{replace:function(n){var s=this;if(n.parent)n.remove();s.insert(n,s);s.remove();return s},attr:function(n,v){var s=this,c,i,u;if(typeof n!=="string"){for(i in n)s.attr(i,n[i]);return s}if(c=s.attributes){if(v!==u){if(v===null){if(n in c.map){delete c.map[n];i=c.length;while(i--){if(c[i].name===n){c=c.splice(i,1);return s}}}return s}if(n in c.map){i=c.length;while(i--){if(c[i].name===n){c[i].value=v;break}}}else c.push({name:n,value:v});c.map[n]=v;return s}else{return c.map[n]}}},clone:function(){var s=this,c=new N(s.name,s.type),i,l,d,e,f;if(d=s.attributes){f=[];f.map={};for(i=0,l=d.length;i<l;i++){e=d[i];if(e.name!=='id'){f[f.length]={name:e.name,value:e.value};f.map[e.name]=e.value}}c.attributes=f}c.value=s.value;c.shortEnded=s.shortEnded;return c},wrap:function(c){var s=this;s.parent.insert(c,s);c.append(s);return s},unwrap:function(){var s=this,n,c;for(n=s.firstChild;n;){c=n.next;s.insert(n,s,true);n=c}s.remove()},remove:function(){var s=this,p=s.parent,n=s.next,c=s.prev;if(p){if(p.firstChild===s){p.firstChild=n;if(n)n.prev=null}else{c.next=n}if(p.lastChild===s){p.lastChild=c;if(c)c.next=null}else{n.prev=c}s.parent=s.next=s.prev=null}return s},append:function(n){var s=this,l;if(n.parent)n.remove();l=s.lastChild;if(l){l.next=n;n.prev=l;s.lastChild=n}else s.lastChild=s.firstChild=n;n.parent=s;return n},insert:function(n,r,c){var p;if(n.parent)n.remove();p=r.parent||this;if(c){if(r===p.firstChild)p.firstChild=n;else r.prev.next=n;n.prev=r.prev;n.next=r;r.prev=n}else{if(r===p.lastChild)p.lastChild=n;else r.next.prev=n;n.next=r.next;n.prev=r;r.next=n}n.parent=p;return n},getAll:function(n){var s=this,c,d=[];for(c=s.firstChild;c;c=b(c,s)){if(c.name===n)d.push(c)}return d},empty:function(){var s=this,n,i,c;if(s.firstChild){n=[];for(c=s.firstChild;c;c=b(c,s))n.push(c);i=n.length;while(i--){c=n[i];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}s.firstChild=s.lastChild=null;return s},isEmpty:function(e){var s=this,n=s.firstChild,i,c;if(n){do{if(n.type===1){if(n.attributes.map['data-mce-bogus'])continue;if(e[n.name])return false;i=n.attributes.length;while(i--){c=n.attributes[i].name;if(c==="name"||c.indexOf('data-mce-')===0)return false}}if(n.type===8)return false;if((n.type===3&&!w.test(n.value)))return false}while(n=b(n,s))}return true},walk:function(p){return b(this,null,p)}});t.extend(N,{create:function(n,c){var d,e;d=new N(n,a[n]||1);if(c){for(e in c)d.attr(e,c[e])}return d}});t.html.Node=N})(tinymce);(function(t){var N=t.html.Node;t.html.DomParser=function(s,a){var b=this,n={},c=[],m={},d={};s=s||{};s.validate="validate"in s?s.validate:true;s.root_name=s.root_name||'body';b.schema=a=a||new t.html.Schema();function f(e){var g,h,p,j,k,l,o,q,i,r,u,v,w,x,y;v=t.makeMap('tr,td,th,tbody,thead,tfoot,table');u=a.getNonEmptyElements();w=a.getTextBlockElements();for(g=0;g<e.length;g++){h=e[g];if(!h.parent||h.fixed)continue;if(w[h.name]&&h.parent.name=='li'){x=h.next;while(x){if(w[x.name]){x.name='li';x.fixed=true;h.parent.insert(x,h.parent)}else{break}x=x.next}h.unwrap(h);continue}j=[h];for(p=h.parent;p&&!a.isValidChild(p.name,h.name)&&!v[p.name];p=p.parent)j.push(p);if(p&&j.length>1){j.reverse();k=l=b.filterNode(j[0].clone());for(i=0;i<j.length-1;i++){if(a.isValidChild(l.name,j[i].name)){o=b.filterNode(j[i].clone());l.append(o)}else o=l;for(q=j[i].firstChild;q&&q!=j[i+1];){y=q.next;o.append(q);q=y}l=o}if(!k.isEmpty(u)){p.insert(k,j[0],true);p.insert(h,k)}else{p.insert(h,j[0],true)}p=j[0];if(p.isEmpty(u)||p.firstChild===p.lastChild&&p.firstChild.name==='br'){p.empty().remove()}}else if(h.parent){if(h.name==='li'){x=h.prev;if(x&&(x.name==='ul'||x.name==='ul')){x.append(h);continue}x=h.next;if(x&&(x.name==='ul'||x.name==='ul')){x.insert(h,x.firstChild,true);continue}h.wrap(b.filterNode(new N('ul',1)));continue}if(a.isValidChild(h.parent.name,'div')&&a.isValidChild('div',h.name)){h.wrap(b.filterNode(new N('div',1)))}else{if(h.name==='style'||h.name==='script')h.empty().remove();else h.unwrap()}}}};b.filterNode=function(e){var i,g,l;if(g in n){l=m[g];if(l)l.push(e);else m[g]=[e]}i=c.length;while(i--){g=c[i].name;if(g in e.attributes.map){l=d[g];if(l)l.push(e);else d[g]=[e]}}return e};b.addNodeFilter=function(e,g){t.each(t.explode(e),function(e){var l=n[e];if(!l)n[e]=l=[];l.push(g)})};b.addAttributeFilter=function(e,g){t.each(t.explode(e),function(e){var i;for(i=0;i<c.length;i++){if(c[i].name===e){c[i].callbacks.push(g);return}}c.push({name:e,callbacks:[g]})})};b.parse=function(h,e){var p,r,g,j,i,l,k,o,q,u,v,w,x,y=[],z,A,B,C,D,E,F,G;e=e||{};m={};d={};w=t.extend(t.makeMap('script,style,head,html,body,title,meta,param'),a.getBlockElements());F=a.getNonEmptyElements();E=a.children;v=s.validate;G="forced_root_block"in e?e.forced_root_block:s.forced_root_block;D=a.getWhiteSpaceElements();x=/^[ \t\r\n]+/;A=/[ \t\r\n]+$/;B=/[ \t\r\n]+/g;C=/^[ \t\r\n]+$/;function H(){var g=r.firstChild,L,M;while(g){L=g.next;if(g.type==3||(g.type==1&&g.name!=='p'&&!w[g.name]&&!g.attr('data-mce-type'))){if(!M){M=I(G,1);r.insert(M,g);M.append(g)}else M.append(g)}else{M=null}g=L}};function I(u,L){var g=new N(u,L),q;if(u in n){q=m[u];if(q)q.push(g);else m[u]=[g]}return g};function J(g){var L,M,O;for(L=g.prev;L&&L.type===3;){M=L.value.replace(A,'');if(M.length>0){L.value=M;L=L.prev}else{O=L.prev;L.remove();L=O}}};function K(L){var u,M={};for(u in L){if(u!=='li'&&u!='p'){M[u]=L[u]}}return M};p=new t.html.SaxParser({validate:v,self_closing_elements:K(a.getSelfClosingElements()),cdata:function(L){g.append(I('#cdata',4)).value=L},text:function(L,M){var O;if(!z){L=L.replace(B,' ');if(g.lastChild&&w[g.lastChild.name])L=L.replace(x,'')}if(L.length!==0){O=I('#text',3);O.raw=!!M;g.append(O).value=L}},comment:function(L){g.append(I('#comment',8)).value=L},pi:function(u,L){g.append(I(u,7)).value=L;J(g)},doctype:function(L){var M;M=g.append(I('#doctype',10));M.value=L;J(g)},start:function(u,L,M){var O,P,Q,R,S,T,U,V;Q=v?a.getElementRule(u):{};if(Q){O=I(Q.outputName||u,1);O.attributes=L;O.shortEnded=M;g.append(O);V=E[g.name];if(V&&E[O.name]&&!V[O.name])y.push(O);P=c.length;while(P--){S=c[P].name;if(S in L.map){q=d[S];if(q)q.push(O);else d[S]=[O]}}if(w[u])J(O);if(!M)g=O;if(!z&&D[u]){z=true}}},end:function(u){var L,M,O,P,Q;M=v?a.getElementRule(u):{};if(M){if(w[u]){if(!z){L=g.firstChild;if(L&&L.type===3){O=L.value.replace(x,'');if(O.length>0){L.value=O;L=L.next}else{P=L.next;L.remove();L=P}while(L&&L.type===3){O=L.value;P=L.next;if(O.length===0||C.test(O)){L.remove();L=P}L=P}}L=g.lastChild;if(L&&L.type===3){O=L.value.replace(A,'');if(O.length>0){L.value=O;L=L.prev}else{P=L.prev;L.remove();L=P}while(L&&L.type===3){O=L.value;P=L.prev;if(O.length===0||C.test(O)){L.remove();L=P}L=P}}}}if(z&&D[u]){z=false}if(M.removeEmpty||M.paddEmpty){if(g.isEmpty(F)){if(M.paddEmpty)g.empty().append(new N('#text','3')).value='\u00a0';else{if(!g.attributes.map.name&&!g.attributes.map.id){Q=g.parent;g.empty().remove();g=Q;return}}}}g=g.parent}}},a);r=g=new N(e.context||s.root_name,11);p.parse(h);if(v&&y.length){if(!e.context)f(y);else e.invalid=true}if(G&&r.name=='body')H();if(!e.invalid){for(u in m){q=n[u];j=m[u];k=j.length;while(k--){if(!j[k].parent)j.splice(k,1)}for(i=0,l=q.length;i<l;i++)q[i](j,u,e)}for(i=0,l=c.length;i<l;i++){q=c[i];if(q.name in d){j=d[q.name];k=j.length;while(k--){if(!j[k].parent)j.splice(k,1)}for(k=0,o=q.callbacks.length;k<o;k++)q.callbacks[k](j,q.name,e)}}}return r};if(s.remove_trailing_brs){b.addNodeFilter('br',function(e,g){var i,l=e.length,h,j=t.extend({},a.getBlockElements()),k=a.getNonEmptyElements(),p,o,q,r;j.body=1;for(i=0;i<l;i++){h=e[i];p=h.parent;if(j[h.parent.name]&&h===p.lastChild){q=h.prev;while(q){r=q.name;if(r!=="span"||q.attr('data-mce-type')!=='bookmark'){if(r!=="br")break;if(r==='br'){h=null;break}}q=q.prev}if(h){h.remove();if(p.isEmpty(k)){elementRule=a.getElementRule(p.name);if(elementRule){if(elementRule.removeEmpty)p.remove();else if(elementRule.paddEmpty)p.empty().append(new t.html.Node('#text',3)).value='\u00a0'}}}}else{o=h;while(p.firstChild===o&&p.lastChild===o){o=p;if(j[p.name]){break}p=p.parent}if(o===p){textNode=new t.html.Node('#text',3);textNode.value='\u00a0';h.replace(textNode)}}}})}if(!s.allow_html_in_named_anchor){b.addAttributeFilter('id,name',function(e,g){var i=e.length,h,p,j,k;while(i--){k=e[i];if(k.name==='a'&&k.firstChild&&!k.attr('href')){j=k.parent;h=k.lastChild;do{p=h.prev;j.insert(h,k);h=p}while(h)}}})}}})(tinymce);
tinymce.html.Writer=function(s){var h=[],a,b,c,e,d;s=s||{};a=s.indent;b=tinymce.makeMap(s.indent_before||'');c=tinymce.makeMap(s.indent_after||'');e=tinymce.html.Entities.getEncodeFunc(s.entity_encoding||'raw',s.entities);d=s.element_format=="html";return{start:function(n,f,g){var i,l,j,v;if(a&&b[n]&&h.length>0){v=h[h.length-1];if(v.length>0&&v!=='\n')h.push('\n')}h.push('<',n);if(f){for(i=0,l=f.length;i<l;i++){j=f[i];h.push(' ',j.name,'="',e(j.value,true),'"')}}if(!g||d)h[h.length]='>';else h[h.length]=' />';if(g&&a&&c[n]&&h.length>0){v=h[h.length-1];if(v.length>0&&v!=='\n')h.push('\n')}},end:function(n){var v;h.push('</',n,'>');if(a&&c[n]&&h.length>0){v=h[h.length-1];if(v.length>0&&v!=='\n')h.push('\n')}},text:function(t,r){if(t.length>0)h[h.length]=r?t:e(t)},cdata:function(t){h.push('<![CDATA[',t,']]>')},comment:function(t){h.push('<!--',t,'-->')},pi:function(n,t){if(t)h.push('<?',n,' ',t,'?>');else h.push('<?',n,'?>');if(a)h.push('\n')},doctype:function(t){h.push('<!DOCTYPE',t,'>',a?'\n':'')},reset:function(){h.length=0},getContent:function(){return h.join('').replace(/\n$/,'')}}};
(function(t){t.html.Serializer=function(s,a){var b=this,w=new t.html.Writer(s);s=s||{};s.validate="validate"in s?s.validate:true;b.schema=a=a||new t.html.Schema();b.writer=w;b.serialize=function(n){var h,v;v=s.validate;h={3:function(n,r){w.text(n.value,n.raw)},8:function(n){w.comment(n.value)},7:function(n){w.pi(n.name,n.value)},10:function(n){w.doctype(n.value)},4:function(n){w.cdata(n.value)},11:function(n){if((n=n.firstChild)){do{c(n)}while(n=n.next)}}};w.reset();function c(n){var d=h[n.type],e,f,g,j,k,m,i,l,o;if(!d){e=n.name;f=n.shortEnded;g=n.attributes;if(v&&g&&g.length>1){m=[];m.map={};o=a.getElementRule(n.name);for(i=0,l=o.attributesOrder.length;i<l;i++){j=o.attributesOrder[i];if(j in g.map){k=g.map[j];m.map[j]=k;m.push({name:j,value:k})}}for(i=0,l=g.length;i<l;i++){j=g[i].name;if(!(j in m.map)){k=g.map[j];m.map[j]=k;m.push({name:j,value:k})}}g=m}w.start(n.name,g,f);if(!f){if((n=n.firstChild)){do{c(n)}while(n=n.next)}w.end(e)}}else d(n)}if(n.type==1&&!s.inner)c(n);else h[11](n);return w.getContent()}}})(tinymce);tinymce.dom={};(function(n,a){var w=!!document.addEventListener;function b(t,d,e,g){if(t.addEventListener){t.addEventListener(d,e,g||false)}else if(t.attachEvent){t.attachEvent('on'+d,e)}}function r(t,d,e,g){if(t.removeEventListener){t.removeEventListener(d,e,g||false)}else if(t.detachEvent){t.detachEvent('on'+d,e)}}function f(o,d){var e,g=d||{};function h(){return false}function i(){return true}for(e in o){if(e!=="layerX"&&e!=="layerY"){g[e]=o[e]}}if(!g.target){g.target=g.srcElement||document}g.preventDefault=function(){g.isDefaultPrevented=i;if(o){if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}}};g.stopPropagation=function(){g.isPropagationStopped=i;if(o){if(o.stopPropagation){o.stopPropagation()}else{o.cancelBubble=true}}};g.stopImmediatePropagation=function(){g.isImmediatePropagationStopped=i;g.stopPropagation()};if(!g.isDefaultPrevented){g.isDefaultPrevented=h;g.isPropagationStopped=h;g.isImmediatePropagationStopped=h}return g}function c(d,e,g){var h=d.document,i={type:'ready'};function j(){if(!g.domLoaded){g.domLoaded=true;e(i)}}if(h.readyState=="complete"){j();return}if(w){b(d,'DOMContentLoaded',j)}else{b(h,"readystatechange",function(){if(h.readyState==="complete"){r(h,"readystatechange",arguments.callee);j()}});if(h.documentElement.doScroll&&d===d.top){(function(){try{
// If IE is used, use the trick by Diego Perini licensed under MIT by request to the author.
h.documentElement.doScroll("left")}catch(k){setTimeout(arguments.callee,0);return}j()})()}}b(d,'load',j)}function E(p){var s=this,d={},g,h,j,k,m;k="onmouseenter"in document.documentElement;j="onfocusin"in document.documentElement;m={mouseenter:'mouseover',mouseleave:'mouseout'};g=1;s.domLoaded=false;s.events=d;function o(e,q){var t,i,l,u;t=d[q][e.type];if(t){for(i=0,l=t.length;i<l;i++){u=t[i];if(u&&u.func.call(u.scope,e)===false){e.preventDefault()}if(e.isImmediatePropagationStopped()){return}}}}s.bind=function(t,e,l,q){var u,v,i,x,y,z,A,B=window;function C(D){o(f(D||B.event),u)}if(!t||t.nodeType===3||t.nodeType===8){return}if(!t[a]){u=g++;t[a]=u;d[u]={}}else{u=t[a];if(!d[u]){d[u]={}}}q=q||t;e=e.split(' ');i=e.length;while(i--){x=e[i];z=C;y=A=false;if(x==="DOMContentLoaded"){x="ready"}if((s.domLoaded||t.readyState=='complete')&&x==="ready"){s.domLoaded=true;l.call(q,f({type:x}));continue}if(!k){y=m[x];if(y){z=function(D){var F,G;F=D.currentTarget;G=D.relatedTarget;if(G&&F.contains){G=F.contains(G)}else{while(G&&G!==F){G=G.parentNode}}if(!G){D=f(D||B.event);D.type=D.type==='mouseout'?'mouseleave':'mouseenter';D.target=F;o(D,u)}}}}if(!j&&(x==="focusin"||x==="focusout")){A=true;y=x==="focusin"?"focus":"blur";z=function(D){D=f(D||B.event);D.type=D.type==='focus'?'focusin':'focusout';o(D,u)}}v=d[u][x];if(!v){d[u][x]=v=[{func:l,scope:q}];v.fakeName=y;v.capture=A;v.nativeHandler=z;if(!w){v.proxyHandler=p(u)}if(x==="ready"){c(t,z,s)}else{b(t,y||x,w?z:v.proxyHandler,A)}}else{v.push({func:l,scope:q})}}t=v=0;return l};s.unbind=function(t,e,l){var q,u,i,v,x,y;if(!t||t.nodeType===3||t.nodeType===8){return s}q=t[a];if(q){y=d[q];if(e){e=e.split(' ');i=e.length;while(i--){x=e[i];u=y[x];if(u){if(l){v=u.length;while(v--){if(u[v].func===l){u.splice(v,1)}}}if(!l||u.length===0){delete y[x];r(t,u.fakeName||x,w?u.nativeHandler:u.proxyHandler,u.capture)}}}}else{for(x in y){u=y[x];r(t,u.fakeName||x,w?u.nativeHandler:u.proxyHandler,u.capture)}y={}}for(x in y){return s}delete d[q];try{delete t[a]}catch(z){t[a]=null}}return s};s.fire=function(t,e,i){var l,q;if(!t||t.nodeType===3||t.nodeType===8){return s}q=f(null,i);q.type=e;do{l=t[a];if(l){o(q,l)}t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!q.isPropagationStopped());return s};s.clean=function(t){var i,e,u=s.unbind;if(!t||t.nodeType===3||t.nodeType===8){return s}if(t[a]){u(t)}if(!t.getElementsByTagName){t=t.document}if(t&&t.getElementsByTagName){u(t);e=t.getElementsByTagName('*');i=e.length;while(i--){t=e[i];if(t[a]){u(t)}}}return s};s.callNativeHandler=function(i,e){if(d){d[i][e.type].nativeHandler(e)}};s.destory=function(){d={}};s.add=function(t,d,e,l){if(typeof(t)==="string"){t=document.getElementById(t)}if(t&&t instanceof Array){var i=t.length;while(i--){s.add(t[i],d,e,l)}return}if(d==="init"){d="ready"}return s.bind(t,d instanceof Array?d.join(' '):d,e,l)};s.remove=function(t,d,e,l){if(!t){return s}if(typeof(t)==="string"){t=document.getElementById(t)}if(t instanceof Array){var i=t.length;while(i--){s.remove(t[i],d,e,l)}return s}return s.unbind(t,d instanceof Array?d.join(' '):d,e)};s.clear=function(t){if(typeof(t)==="string"){t=document.getElementById(t)}return s.clean(t)};s.cancel=function(e){if(e){s.prevent(e);s.stop(e)}return false};s.prevent=function(e){if(!e.preventDefault){e=f(e)}e.preventDefault();return false};s.stop=function(e){if(!e.stopPropagation){e=f(e)}e.stopPropagation();return false}}n.EventUtils=E;n.Event=new E(function(i){return function(e){tinymce.dom.Event.callNativeHandler(i,e)}});n.Event.bind(window,'ready',function(){});n=0})(tinymce.dom,'data-mce-expando');
tinymce.dom.TreeWalker=function(s,r){var n=s;function f(n,a,b,c){var d,p;if(n){if(!c&&n[a])return n[a];if(n!=r){d=n[b];if(d)return d;for(p=n.parentNode;p&&p!=r;p=p.parentNode){d=p[b];if(d)return d}}}};this.current=function(){return n};this.next=function(a){return(n=f(n,'firstChild','nextSibling',a))};this.prev=function(a){return(n=f(n,'lastChild','previousSibling',a))}};
(function(g){var j=g.each,l=g.is,m=g.isWebKit,q=g.isIE,E=g.html.Entities,z=/^([a-z0-9],?)+$/i,A=/^[ \t\r\n]*$/;g.create('tinymce.dom.DOMUtils',{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(d,s){var t=this,a,n,b;t.doc=d;t.win=window;t.files={};t.cssFlicker=false;t.counter=0;t.stdMode=!g.isIE||d.documentMode>=8;t.boxModel=!g.isIE||d.compatMode=="CSS1Compat"||t.stdMode;t.hasOuterHTML="outerHTML"in d.createElement("a");t.settings=s=g.extend({keep_values:false,hex_colors:1},s);t.schema=s.schema;t.styles=new g.html.Styles({url_converter:s.url_converter,url_converter_scope:s.url_converter_scope},s.schema);if(g.isIE6){try{d.execCommand('BackgroundImageCache',false,true)}catch(e){t.cssFlicker=true}}t.fixDoc(d);t.events=s.ownEvents?new g.dom.EventUtils(s.proxy):g.dom.Event;g.addUnload(t.destroy,t);b=s.schema?s.schema.getBlockElements():{};t.isBlock=function(c){if(!c){return false}var f=c.nodeType;if(f)return!!(f===1&&b[c.nodeName]);return!!b[c]}},fixDoc:function(d){var s=this.settings,n;if(q&&s.schema){('abbr article aside audio canvas '+'details figcaption figure footer '+'header hgroup mark menu meter nav '+'output progress section summary '+'time video').replace(/\w+/g,function(n){d.createElement(n)});for(n in s.schema.getCustomElements()){d.createElement(n)}}},clone:function(n,d){var s=this,c,a;if(!q||n.nodeType!==1||d){return n.cloneNode(d)}a=s.doc;if(!d){c=a.createElement(n.nodeName);j(s.getAttribs(n),function(b){s.setAttrib(c,b.nodeName,s.getAttrib(n,b.nodeName))});return c}return c.firstChild},getRoot:function(){var t=this,s=t.settings;return(s&&t.get(s.root_element))||t.doc.body},getViewPort:function(w){var d,b;w=!w?this.win:w;d=w.document;b=this.boxModel?d.documentElement:d.body;return{x:w.pageXOffset||b.scrollLeft,y:w.pageYOffset||b.scrollTop,w:w.innerWidth||b.clientWidth,h:w.innerHeight||b.clientHeight}},getRect:function(e){var p,t=this,s;e=t.get(e);p=t.getPos(e);s=t.getSize(e);return{x:p.x,y:p.y,w:s.w,h:s.h}},getSize:function(e){var t=this,w,h;e=t.get(e);w=t.getStyle(e,'width');h=t.getStyle(e,'height');if(w.indexOf('px')===-1)w=0;if(h.indexOf('px')===-1)h=0;return{w:parseInt(w,10)||e.offsetWidth||e.clientWidth,h:parseInt(h,10)||e.offsetHeight||e.clientHeight}},getParent:function(n,f,r){return this.getParents(n,f,r,false)},getParents:function(n,f,r,c){var t=this,a,s=t.settings,o=[];n=t.get(n);c=c===undefined;if(s.strict_root)r=r||t.getRoot();if(l(f,'string')){a=f;if(f==='*'){f=function(n){return n.nodeType==1}}else{f=function(n){return t.is(n,a)}}}while(n){if(n==r||!n.nodeType||n.nodeType===9)break;if(!f||f(n)){if(c)o.push(n);else return n}n=n.parentNode}return c?o:null},get:function(e){var n;if(e&&this.doc&&typeof(e)=='string'){n=e;e=this.doc.getElementById(e);if(e&&e.id!==n)return this.doc.getElementsByName(n)[1]}return e},getNext:function(n,s){return this._findSib(n,s,'nextSibling')},getPrev:function(n,s){return this._findSib(n,s,'previousSibling')},add:function(p,n,a,h,c){var t=this;return this.run(p,function(p){var e,k;e=l(n,'string')?t.doc.createElement(n):n;t.setAttribs(e,a);if(h){if(h.nodeType)e.appendChild(h);else t.setHTML(e,h)}return!c?p.appendChild(e):e})},create:function(n,a,h){return this.add(this.doc.createElement(n),n,a,h,1)},createHTML:function(n,a,h){var o='',t=this,k;o+='<'+n;for(k in a){if(a.hasOwnProperty(k))o+=' '+k+'="'+t.encode(a[k])+'"'}if(typeof(h)!="undefined")return o+'>'+h+'</'+n+'>';return o+' />'},remove:function(n,k){return this.run(n,function(n){var c,p=n.parentNode;if(!p)return null;if(k){while(c=n.firstChild){if(!g.isIE||c.nodeType!==3||c.nodeValue)p.insertBefore(c,n);else n.removeChild(c)}}return p.removeChild(n)})},setStyle:function(n,c,v){var t=this;return t.run(n,function(e){var s,i;s=e.style;c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});if(t.pixelStyles.test(c)&&(g.is(v,'number')||/^[\-0-9\.]+$/.test(v)))v+='px';switch(c){case'opacity':if(q){s.filter=v===''?'':"alpha(opacity="+(v*100)+")";if(!n.currentStyle||!n.currentStyle.hasLayout)s.display='inline-block'}s[c]=s['-moz-opacity']=s['-khtml-opacity']=v||'';break;case'float':q?s.styleFloat=v:s.cssFloat=v;break;default:s[c]=v||''}if(t.settings.update_styles)t.setAttrib(e,'data-mce-style')})},getStyle:function(n,d,c){n=this.get(n);if(!n)return;if(this.doc.defaultView&&c){d=d.replace(/[A-Z]/g,function(a){return'-'+a});try{return this.doc.defaultView.getComputedStyle(n,null).getPropertyValue(d)}catch(e){return null}}d=d.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});if(d=='float')d=q?'styleFloat':'cssFloat';if(n.currentStyle&&c)return n.currentStyle[d];return n.style?n.style[d]:undefined},setStyles:function(e,o){var t=this,s=t.settings,a;a=s.update_styles;s.update_styles=0;j(o,function(v,n){t.setStyle(e,n,v)});s.update_styles=a;if(s.update_styles)t.setAttrib(e,s.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var i,a=e.attributes;for(i=a.length-1;i>=0;i--){e.removeAttributeNode(a.item(i))}})},setAttrib:function(e,n,v){var t=this;if(!e||!n)return;if(t.settings.strict)n=n.toLowerCase();return this.run(e,function(e){var s=t.settings;var o=e.getAttribute(n);if(v!==null){switch(n){case"style":if(!l(v,'string')){j(v,function(v,n){t.setStyle(e,n,v)});return}if(s.keep_values){if(v&&!t._isRes(v))e.setAttribute('data-mce-style',v,2);else e.removeAttribute('data-mce-style',2)}e.style.cssText=v;break;case"class":e.className=v||'';break;case"src":case"href":if(s.keep_values){if(s.url_converter)v=s.url_converter.call(s.url_converter_scope||t,v,n,e);t.setAttrib(e,'data-mce-'+n,v,2)}break;case"shape":e.setAttribute('data-mce-style',v);break}}if(l(v)&&v!==null&&v.length!==0)e.setAttribute(n,''+v,2);else e.removeAttribute(n,2);if(tinyMCE.activeEditor&&o!=v){var a=tinyMCE.activeEditor;a.onSetAttrib.dispatch(a,e,n,v)}})},setAttribs:function(e,o){var t=this;return this.run(e,function(e){j(o,function(v,n){t.setAttrib(e,n,v)})})},getAttrib:function(e,n,d){var v,t=this,u;e=t.get(e);if(!e||e.nodeType!==1)return d===u?false:d;if(!l(d))d='';if(/^(src|href|style|coords|shape)$/.test(n)){v=e.getAttribute("data-mce-"+n);if(v)return v}if(q&&t.props[n]){v=e[t.props[n]];v=v&&v.nodeValue?v.nodeValue:v}if(!v)v=e.getAttribute(n,2);if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(n)){if(e[t.props[n]]===true&&v==='')return n;return v?n:''}if(e.nodeName==="FORM"&&e.getAttributeNode(n))return e.getAttributeNode(n).nodeValue;if(n==='style'){v=v||e.style.cssText;if(v){v=t.serializeStyle(t.parseStyle(v),e.nodeName);if(t.settings.keep_values&&!t._isRes(v))e.setAttribute('data-mce-style',v)}}if(m&&n==="class"&&v)v=v.replace(/(apple|webkit)\-[a-z\-]+/gi,'');if(q){switch(n){case'rowspan':case'colspan':if(v===1)v='';break;case'size':if(v==='+0'||v===20||v===0)v='';break;case'width':case'height':case'vspace':case'checked':case'disabled':case'readonly':if(v===0)v='';break;case'hspace':if(v===-1)v='';break;case'maxlength':case'tabindex':if(v===32768||v===2147483647||v==='32768')v='';break;case'multiple':case'compact':case'noshade':case'nowrap':if(v===65535)return n;return d;case'shape':v=v.toLowerCase();break;default:if(n.indexOf('on')===0&&v)v=g._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,'$1',''+v)}}return(v!==u&&v!==null&&v!=='')?''+v:d},getPos:function(n,a){var t=this,x=0,y=0,e,d=t.doc,r;n=t.get(n);a=a||d.body;if(n){if(n.getBoundingClientRect){n=n.getBoundingClientRect();e=t.boxModel?d.documentElement:d.body;x=n.left+(d.documentElement.scrollLeft||d.body.scrollLeft)-e.clientTop;y=n.top+(d.documentElement.scrollTop||d.body.scrollTop)-e.clientLeft;return{x:x,y:y}}r=n;while(r&&r!=a&&r.nodeType){x+=r.offsetLeft||0;y+=r.offsetTop||0;r=r.offsetParent}r=n.parentNode;while(r&&r!=a&&r.nodeType){x-=r.scrollLeft||0;y-=r.scrollTop||0;r=r.parentNode}}return{x:x,y:y}},parseStyle:function(s){return this.styles.parse(s)},serializeStyle:function(o,n){return this.styles.serialize(o,n)},addStyle:function(c){var d=this.doc,h;styleElm=d.getElementById('mceDefaultStyles');if(!styleElm){styleElm=d.createElement('style'),styleElm.id='mceDefaultStyles';styleElm.type='text/css';h=d.getElementsByTagName('head')[0];if(h.firstChild){h.insertBefore(styleElm,h.firstChild)}else{h.appendChild(styleElm)}}if(styleElm.styleSheet){styleElm.styleSheet.cssText+=c}else{styleElm.appendChild(d.createTextNode(c))}},loadCSS:function(u){var t=this,d=t.doc,h;if(!u)u='';h=d.getElementsByTagName('head')[0];j(u.split(','),function(u){var a;if(t.files[u])return;t.files[u]=true;a=t.create('link',{rel:'stylesheet',href:g._addVer(u)});if(q&&d.documentMode&&d.recalc){a.onload=function(){if(d.recalc)d.recalc();a.onload=null}}h.appendChild(a)})},addClass:function(e,c){return this.run(e,function(e){var o;if(!c)return 0;if(this.hasClass(e,c))return e.className;o=this.removeClass(e,c);return e.className=(o!=''?(o+' '):'')+c})},removeClass:function(e,c){var t=this,r;return t.run(e,function(e){var v;if(t.hasClass(e,c)){if(!r)r=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g");v=e.className.replace(r,' ');v=g.trim(v!=' '?v:'');e.className=v;if(!v){e.removeAttribute('class');e.removeAttribute('className')}return v}return e.className})},hasClass:function(n,c){n=this.get(n);if(!n||!c)return false;return(' '+n.className+' ').indexOf(' '+c+' ')!==-1},show:function(e){return this.setStyle(e,'display','block')},hide:function(e){return this.setStyle(e,'display','none')},isHidden:function(e){e=this.get(e);return!e||e.style.display=='none'||this.getStyle(e,'display')=='none'},uniqueId:function(p){return(!p?'mce_':p)+(this.counter++)},setHTML:function(e,h){var s=this;return s.run(e,function(e){if(q){while(e.firstChild)e.removeChild(e.firstChild);try{e.innerHTML='<br />'+h;e.removeChild(e.firstChild)}catch(a){var n=s.create('div');n.innerHTML='<br />'+h;j(g.grep(n.childNodes),function(b,i){if(i&&e.canHaveHTML)e.appendChild(b)})}}else e.innerHTML=h;return h})},getOuterHTML:function(e){var d,s=this;e=s.get(e);if(!e)return null;if(e.nodeType===1&&s.hasOuterHTML)return e.outerHTML;d=(e.ownerDocument||s.doc).createElement("body");d.appendChild(e.cloneNode(true));return d.innerHTML},setOuterHTML:function(e,h,d){var t=this;function s(e,h,d){var n,a;a=d.createElement("body");a.innerHTML=h;n=a.lastChild;while(n){t.insertAfter(n.cloneNode(true),e);n=n.previousSibling}t.remove(e)};return this.run(e,function(e){e=t.get(e);if(e.nodeType==1){d=d||e.ownerDocument||t.doc;if(q){try{if(q&&e.nodeType==1)e.outerHTML=h;else s(e,h,d)}catch(a){s(e,h,d)}}else s(e,h,d)}})},decode:E.decode,encode:E.encodeAllRaw,insertAfter:function(n,r){r=this.get(r);return this.run(n,function(n){var p,a;p=r.parentNode;a=r.nextSibling;if(a)p.insertBefore(n,a);else p.appendChild(n);return n})},replace:function(n,o,k){var t=this;if(l(o,'array'))n=n.cloneNode(true);return t.run(o,function(o){if(k){j(g.grep(o.childNodes),function(c){n.appendChild(c)})}return o.parentNode.replaceChild(n,o)})},rename:function(e,n){var t=this,a;if(e.nodeName!=n.toUpperCase()){a=t.create(n);j(t.getAttribs(e),function(b){t.setAttrib(a,b.nodeName,t.getAttrib(e,b.nodeName))});t.replace(a,e,1)}return a||e},findCommonAncestor:function(a,b){var p=a,c;while(p){c=b;while(c&&p!=c)c=c.parentNode;if(p==c)break;p=p.parentNode}if(!p&&a.ownerDocument)return a.ownerDocument.documentElement;return p},toHex:function(s){var c=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(s);function h(s){s=parseInt(s,10).toString(16);return s.length>1?s:'0'+s};if(c){s='#'+h(c[1])+h(c[2])+h(c[3]);return s}return s},getClasses:function(){var t=this,c=[],i,a={},f=t.settings.class_filter,o;if(t.classes)return t.classes;function b(s){j(s.imports,function(r){b(r)});j(s.cssRules||s.rules,function(r){switch(r.type||1){case 1:if(r.selectorText){j(r.selectorText.split(','),function(v){v=v.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(v)||!/\.[\w\-]+$/.test(v))return;o=v;v=g._replace(/.*\.([a-z0-9_\-]+).*/i,'$1',v);if(f&&!(v=f(v,o)))return;if(!a[v]){c.push({'class':v});a[v]=1}})}break;case 3:b(r.styleSheet);break}})};try{j(t.doc.styleSheets,b)}catch(e){}if(c.length>0)t.classes=c;return c},run:function(e,f,s){var t=this,o;if(t.doc&&typeof(e)==='string')e=t.get(e);if(!e)return false;s=s||this;if(!e.nodeType&&(e.length||e.length===0)){o=[];j(e,function(e,i){if(e){if(typeof(e)=='string')e=t.doc.getElementById(e);o.push(f.call(s,e,i))}});return o}return f.call(s,e)},getAttribs:function(n){var o;n=this.get(n);if(!n)return[];if(q){o=[];if(n.nodeName=='OBJECT')return n.attributes;if(n.nodeName==='OPTION'&&this.getAttrib(n,'selected'))o.push({specified:1,nodeName:'selected'});n.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,'').replace(/[\w:\-]+/gi,function(a){o.push({specified:1,nodeName:a})});return o}return n.attributes},isEmpty:function(n,e){var s=this,i,a,t,w,b,c=0;n=n.firstChild;if(n){w=new g.dom.TreeWalker(n,n.parentNode);e=e||s.schema?s.schema.getNonEmptyElements():null;do{t=n.nodeType;if(t===1){if(n.getAttribute('data-mce-bogus'))continue;b=n.nodeName.toLowerCase();if(e&&e[b]){if(b==='br'){c++;continue}return false}a=s.getAttribs(n);i=n.attributes.length;while(i--){b=n.attributes[i].nodeName;if(b==="name"||b==='data-mce-bookmark')return false}}if(t==8)return false;if((t===3&&!A.test(n.nodeValue)))return false}while(n=w.next())}return c<=1},destroy:function(s){var t=this;t.win=t.doc=t.root=t.events=t.frag=null;if(!s)g.removeUnload(t.destroy)},createRng:function(){var d=this.doc;return d.createRange?d.createRange():new g.dom.Range(this)},nodeIndex:function(n,a){var i=0,b,c,d;if(n){for(b=n.nodeType,n=n.previousSibling,c=n;n;n=n.previousSibling){d=n.nodeType;if(a&&d==3){if(d==b||!n.nodeValue.length)continue}i++;b=d}}return i},split:function(p,e,a){var t=this,r=t.createRng(),b,c,d;function f(n){var i,h=n.childNodes,k=n.nodeType;function s(n){var u=n.previousSibling&&n.previousSibling.nodeName=='SPAN';var v=n.nextSibling&&n.nextSibling.nodeName=='SPAN';return u&&v}if(k==1&&n.getAttribute('data-mce-type')=='bookmark')return;for(i=h.length-1;i>=0;i--)f(h[i]);if(k!=9){if(k==3&&n.nodeValue.length>0){var o=g.trim(n.nodeValue).length;if(!t.isBlock(n.parentNode)||o>0||o===0&&s(n))return}else if(k==1){h=n.childNodes;if(h.length==1&&h[0]&&h[0].nodeType==1&&h[0].getAttribute('data-mce-type')=='bookmark')n.parentNode.insertBefore(h[0],n);if(h.length||/^(br|hr|input|img)$/i.test(n.nodeName))return}t.remove(n)}return n};if(p&&e){r.setStart(p.parentNode,t.nodeIndex(p));r.setEnd(e.parentNode,t.nodeIndex(e));b=r.extractContents();r=t.createRng();r.setStart(e.parentNode,t.nodeIndex(e)+1);r.setEnd(p.parentNode,t.nodeIndex(p)+1);c=r.extractContents();d=p.parentNode;d.insertBefore(f(b),p);if(a)d.replaceChild(a,e);else d.insertBefore(e,p);d.insertBefore(f(c),p);t.remove(p);return a||e}},bind:function(t,n,f,s){return this.events.add(t,n,f,s||this)},unbind:function(t,n,f){return this.events.remove(t,n,f)},fire:function(t,n,e){return this.events.fire(t,n,e)},getContentEditable:function(n){var c;if(n.nodeType!=1){return null}c=n.getAttribute("data-mce-contenteditable");if(c&&c!=="inherit"){return c}return n.contentEditable!=="inherit"?n.contentEditable:null},_findSib:function(n,s,a){var t=this,f=s;if(n){if(l(f,'string')){f=function(n){return t.is(n,s)}}for(n=n[a];n;n=n[a]){if(f(n))return n}}return null},_isRes:function(c){return/^(top|left|bottom|right|width|height)/i.test(c)||/;\s*(top|left|bottom|right|width|height)/i.test(c)}});g.DOM=new g.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function R(d){var t=this,b=d.doc,E=0,C=1,D=2,T=true,F=false,S='startOffset',e='startContainer',g='endContainer',i='endOffset',j=tinymce.extend,k=d.nodeIndex;j(t,{startContainer:b,startOffset:0,endContainer:b,endOffset:0,collapsed:T,commonAncestorContainer:b,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:m,setEnd:q,setStartBefore:u,setStartAfter:v,setEndBefore:w,setEndAfter:x,collapse:y,selectNode:z,selectNodeContents:A,compareBoundaryPoints:B,deleteContents:G,extractContents:H,cloneContents:I,insertNode:J,surroundContents:K,cloneRange:L,toStringIE:a1});function l(){return b.createDocumentFragment()};function m(n,o){O(T,n,o)};function q(n,o){O(F,n,o)};function u(n){m(n.parentNode,k(n))};function v(n){m(n.parentNode,k(n)+1)};function w(n){q(n.parentNode,k(n))};function x(n){q(n.parentNode,k(n)+1)};function y(c){if(c){t[g]=t[e];t[i]=t[S]}else{t[e]=t[g];t[S]=t[i]}t.collapsed=T};function z(n){u(n);x(n)};function A(n){m(n,0);q(n,n.nodeType===1?n.childNodes.length:n.nodeValue.length)};function B(h,r){var s=t[e],c=t[S],f=t[g],n=t[i],o=r.startContainer,p=r.startOffset,b1=r.endContainer,c1=r.endOffset;if(h===0)return N(s,c,o,p);if(h===1)return N(f,n,o,p);if(h===2)return N(f,n,b1,c1);if(h===3)return N(s,c,b1,c1)};function G(){P(D)};function H(){return P(E)};function I(){return P(C)};function J(n){var s=this[e],c=this[S],f,o;if((s.nodeType===3||s.nodeType===4)&&s.nodeValue){if(!c){s.parentNode.insertBefore(n,s)}else if(c>=s.nodeValue.length){d.insertAfter(n,s)}else{f=s.splitText(c);s.parentNode.insertBefore(n,f)}}else{if(s.childNodes.length>0)o=s.childNodes[c];if(o)s.insertBefore(n,o);else s.appendChild(n)}};function K(n){var f=t.extractContents();t.insertNode(n);n.appendChild(f);t.selectNode(n)};function L(){return j(new R(d),{startContainer:t[e],startOffset:t[S],endContainer:t[g],endOffset:t[i],collapsed:t.collapsed,commonAncestorContainer:t.commonAncestorContainer})};function _(c,o){var f;if(c.nodeType==3)return c;if(o<0)return c;f=c.firstChild;while(f&&o>0){--o;f=f.nextSibling}if(f)return f;return c};function M(){return(t[e]==t[g]&&t[S]==t[i])};function N(f,o,h,p){var c,r,n,s,b1,c1;if(f==h){if(o==p)return 0;if(o<p)return-1;return 1}c=h;while(c&&c.parentNode!=f)c=c.parentNode;if(c){r=0;n=f.firstChild;while(n!=c&&r<o){r++;n=n.nextSibling}if(o<=r)return-1;return 1}c=f;while(c&&c.parentNode!=h){c=c.parentNode}if(c){r=0;n=h.firstChild;while(n!=c&&r<p){r++;n=n.nextSibling}if(r<p)return-1;return 1}s=d.findCommonAncestor(f,h);b1=f;while(b1&&b1.parentNode!=s)b1=b1.parentNode;if(!b1)b1=s;c1=h;while(c1&&c1.parentNode!=s)c1=c1.parentNode;if(!c1)c1=s;if(b1==c1)return 0;n=s.firstChild;while(n){if(n==b1)return-1;if(n==c1)return 1;n=n.nextSibling}};function O(s,n,o){var c,f;if(s){t[e]=n;t[S]=o}else{t[g]=n;t[i]=o}c=t[g];while(c.parentNode)c=c.parentNode;f=t[e];while(f.parentNode)f=f.parentNode;if(f==c){if(N(t[e],t[S],t[g],t[i])>0)t.collapse(s)}else t.collapse(s);t.collapsed=M();t.commonAncestorContainer=d.findCommonAncestor(t[e],t[g])};function P(h){var c,f=0,s=0,p,n,o,r,sp,ep;if(t[e]==t[g])return Q(h);for(c=t[g],p=c.parentNode;p;c=p,p=p.parentNode){if(p==t[e])return U(c,h);++f}for(c=t[e],p=c.parentNode;p;c=p,p=p.parentNode){if(p==t[g])return V(c,h);++s}n=s-f;o=t[e];while(n>0){o=o.parentNode;n--}r=t[g];while(n<0){r=r.parentNode;n++}for(sp=o.parentNode,ep=r.parentNode;sp!=ep;sp=sp.parentNode,ep=ep.parentNode){o=sp;r=ep}return W(o,r,h)};function Q(h){var f,s,c,n,o,p,r,b1,c1;if(h!=D)f=l();if(t[S]==t[i])return f;if(t[e].nodeType==3){s=t[e].nodeValue;c=s.substring(t[S],t[i]);if(h!=C){n=t[e];b1=t[S];c1=t[i]-t[S];if(b1===0&&c1>=n.nodeValue.length-1){n.parentNode.removeChild(n)}else{n.deleteData(b1,c1)}t.collapse(T)}if(h==D)return;if(c.length>0){f.appendChild(b.createTextNode(c))}return f}n=_(t[e],t[S]);o=t[i]-t[S];while(n&&o>0){p=n.nextSibling;r=$(n,h);if(f)f.appendChild(r);--o;n=p}if(h!=C)t.collapse(T);return f};function U(c,h){var f,n,o,p,s,r;if(h!=D)f=l();n=X(c,h);if(f)f.appendChild(n);o=k(c);p=o-t[S];if(p<=0){if(h!=C){t.setEndBefore(c);t.collapse(F)}return f}n=c.previousSibling;while(p>0){s=n.previousSibling;r=$(n,h);if(f)f.insertBefore(r,f.firstChild);--p;n=s}if(h!=C){t.setEndBefore(c);t.collapse(F)}return f};function V(s,h){var f,c,n,o,p,r;if(h!=D)f=l();n=Y(s,h);if(f)f.appendChild(n);c=k(s);++c;o=t[i]-c;n=s.nextSibling;while(n&&o>0){p=n.nextSibling;r=$(n,h);if(f)f.appendChild(r);--o;n=p}if(h!=C){t.setStartAfter(s);t.collapse(T)}return f};function W(s,c,h){var n,f,o,p,r,b1,c1,d1;if(h!=D)f=l();n=Y(s,h);if(f)f.appendChild(n);o=s.parentNode;p=k(s);r=k(c);++p;b1=r-p;c1=s.nextSibling;while(b1>0){d1=c1.nextSibling;n=$(c1,h);if(f)f.appendChild(n);c1=d1;--b1}n=X(c,h);if(f)f.appendChild(n);if(h!=C){t.setStartAfter(s);t.collapse(T)}return f};function X(r,h){var n=_(t[g],t[i]-1),p,c,f,o,s,b1=n!=t[g];if(n==r)return Z(n,b1,F,h);p=n.parentNode;c=Z(p,F,F,h);while(p){while(n){f=n.previousSibling;o=Z(n,b1,F,h);if(h!=D)c.insertBefore(o,c.firstChild);b1=T;n=f}if(p==r)return c;n=p.previousSibling;p=p.parentNode;s=Z(p,F,F,h);if(h!=D)s.appendChild(c);c=s}};function Y(r,h){var n=_(t[e],t[S]),c=n!=t[e],p,f,o,s,b1;if(n==r)return Z(n,c,T,h);p=n.parentNode;f=Z(p,F,T,h);while(p){while(n){o=n.nextSibling;s=Z(n,c,T,h);if(h!=D)f.appendChild(s);c=T;n=o}if(p==r)return f;n=p.nextSibling;p=p.parentNode;b1=Z(p,F,T,h);if(h!=D)b1.appendChild(f);f=b1}};function Z(n,c,f,h){var o,p,r,s,b1;if(c)return $(n,h);if(n.nodeType==3){o=n.nodeValue;if(f){s=t[S];p=o.substring(s);r=o.substring(0,s)}else{s=t[i];p=o.substring(0,s);r=o.substring(s)}if(h!=C)n.nodeValue=r;if(h==D)return;b1=d.clone(n,F);b1.nodeValue=p;return b1}if(h==D)return;return d.clone(n,F)};function $(n,h){if(h!=D)return h==C?d.clone(n,T):n;n.parentNode.removeChild(n)};function a1(){return d.create('body',null,I()).outerText}return t};a.Range=R;R.prototype.toString=function(){return this.toStringIE()}})(tinymce.dom);(function(){function S(s){var a=this,d=s.dom,T=true,F=false;function g(r,c){var e,f=0,h,i,j,k,o,l,p=-1,m;e=r.duplicate();e.collapse(c);m=e.parentElement();if(m.ownerDocument!==s.dom.doc)return;while(m.contentEditable==="false"){m=m.parentNode}if(!m.hasChildNodes()){return{node:m,inside:1}}j=m.children;h=j.length-1;while(f<=h){l=Math.floor((f+h)/2);k=j[l];e.moveToElementText(k);p=e.compareEndPoints(c?'StartToStart':'EndToEnd',r);if(p>0){h=l-1}else if(p<0){f=l+1}else{return{node:k}}}if(p<0){if(!k){e.moveToElementText(m);e.collapse(true);k=m;i=true}else e.collapse(false);o=0;while(e.compareEndPoints(c?'StartToStart':'StartToEnd',r)!==0){if(e.move('character',1)===0||m!=e.parentElement()){break}o++}}else{e.collapse(true);o=0;while(e.compareEndPoints(c?'StartToStart':'StartToEnd',r)!==0){if(e.move('character',-1)===0||m!=e.parentElement()){break}o++}}return{node:k,position:p,offset:o,inside:i}};function b(){var i=s.getRng(),c=d.createRng(),e,f,t,h,j,k;e=i.item?i.item(0):i.parentElement();if(e.ownerDocument!=d.doc)return c;f=s.isCollapsed();if(i.item){c.setStart(e.parentNode,d.nodeIndex(e));c.setEnd(c.startContainer,c.startOffset+1);return c}function l(n){var o=g(i,n),p,q,r=0,u,v,w;p=o.node;q=o.offset;if(o.inside&&!p.hasChildNodes()){c[n?'setStart':'setEnd'](p,0);return}if(q===v){c[n?'setStartBefore':'setEndAfter'](p);return}if(o.position<0){u=o.inside?p.firstChild:p.nextSibling;if(!u){c[n?'setStartAfter':'setEndAfter'](p);return}if(!q){if(u.nodeType==3)c[n?'setStart':'setEnd'](u,0);else c[n?'setStartBefore':'setEndBefore'](u);return}while(u){w=u.nodeValue;r+=w.length;if(r>=q){p=u;r-=q;r=w.length-r;break}u=u.nextSibling}}else{u=p.previousSibling;if(!u)return c[n?'setStartBefore':'setEndBefore'](p);if(!q){if(p.nodeType==3)c[n?'setStart':'setEnd'](u,p.nodeValue.length);else c[n?'setStartAfter':'setEndAfter'](u);return}while(u){r+=u.nodeValue.length;if(r>=q){p=u;r-=q;break}u=u.previousSibling}}c[n?'setStart':'setEnd'](p,r)};try{l(true);if(!f)l()}catch(m){if(m.number==-2147024809){j=a.getBookmark(2);t=i.duplicate();t.collapse(true);e=t.parentElement();if(!f){t=i.duplicate();t.collapse(false);h=t.parentElement();h.innerHTML=h.innerHTML}e.innerHTML=e.innerHTML;a.moveToBookmark(j);i=s.getRng();l(true);if(!f)l()}else throw m}return c};this.getBookmark=function(t){var r=s.getRng(),c,e,f={};function h(n){var p,k,l,i,m=[];p=n.parentNode;k=d.getRoot().parentNode;while(p!=k&&p.nodeType!==9){l=p.children;i=l.length;while(i--){if(n===l[i]){m.push(i);break}}n=p;p=p.parentNode}return m};function j(c){var p;p=g(r,c);if(p){return{position:p.position,offset:p.offset,indexes:h(p.node),inside:p.inside}}};if(t===2){if(!r.item){f.start=j(true);if(!s.isCollapsed())f.end=j()}else f.start={ctrl:true,indexes:h(r.item(0))}}return f};this.moveToBookmark=function(c){var r,e=d.doc.body;function f(j){var n,i,k,l;n=d.getRoot();for(i=j.length-1;i>=0;i--){l=n.children;k=j[i];if(k<=l.length-1){n=l[k]}}return n};function h(i){var j=c[i?'start':'end'],m,k,u;if(j){m=j.position>0;k=e.createTextRange();k.moveToElementText(f(j.indexes));offset=j.offset;if(offset!==u){k.collapse(j.inside||m);k.moveStart('character',m?-offset:offset)}else k.collapse(i);r.setEndPoint(i?'StartToStart':'EndToStart',k);if(i)r.collapse(true)}};if(c.start){if(c.start.ctrl){r=e.createControlRange();r.addElement(f(c.start.indexes));r.select()}else{r=e.createTextRange();h(true);h();r.select()}}};this.addRange=function(r){var i,c,e,f,h,j,k,l=s.dom.doc,m=l.body,n,o;function p(t){var u,v,w,x,y;w=d.create('a');u=t?e:h;v=t?f:j;x=i.duplicate();if(u==l||u==l.documentElement){u=m;v=0}if(u.nodeType==3){u.parentNode.insertBefore(w,u);x.moveToElementText(w);x.moveStart('character',v);d.remove(w);i.setEndPoint(t?'StartToStart':'EndToEnd',x)}else{y=u.childNodes;if(y.length){if(v>=y.length){d.insertAfter(w,y[y.length-1])}else{u.insertBefore(w,y[v])}x.moveToElementText(w)}else if(u.canHaveHTML){u.innerHTML='<span>\uFEFF</span>';w=u.firstChild;x.moveToElementText(w);x.collapse(F)}i.setEndPoint(t?'StartToStart':'EndToEnd',x);d.remove(w)}}e=r.startContainer;f=r.startOffset;h=r.endContainer;j=r.endOffset;i=m.createTextRange();if(e==h&&e.nodeType==1){if(f==j&&!e.hasChildNodes()){if(e.canHaveHTML){k=e.previousSibling;if(k&&!k.hasChildNodes()&&d.isBlock(k)){k.innerHTML='\uFEFF'}else{k=null}e.innerHTML='<span>\uFEFF</span><span>\uFEFF</span>';i.moveToElementText(e.lastChild);i.select();d.doc.selection.clear();e.innerHTML='';if(k){k.innerHTML=''}return}else{f=d.nodeIndex(e);e=e.parentNode}}if(f==j-1){try{o=e.childNodes[f];c=m.createControlRange();c.addElement(o);c.select();n=s.getRng();if(n.item&&o===n.item(0)){return}}catch(q){}}}p(true);p();i.select()};this.getRangeAt=b};tinymce.dom.TridentSelection=S})();(function(c){c.dom.Element=function(d,e){var t=this,g,j;t.settings=e=e||{};t.id=d;t.dom=g=e.dom||c.DOM;if(!c.isIE)j=g.get(t.id);c.each(('getPos,getRect,getParent,add,setStyle,getStyle,setStyles,'+'setAttrib,setAttribs,getAttrib,addClass,removeClass,'+'hasClass,getOuterHTML,setOuterHTML,remove,show,hide,'+'isHidden,setHTML,get').split(/,/),function(k){t[k]=function(){var a=[d],i;for(i=0;i<arguments.length;i++)a.push(arguments[i]);a=g[k].apply(g,a);t.update(k);return a}});c.extend(t,{on:function(n,f,s){return c.dom.Event.add(t.id,n,f,s)},getXY:function(){return{x:parseInt(t.getStyle('left')),y:parseInt(t.getStyle('top'))}},getSize:function(){var n=g.get(t.id);return{w:parseInt(t.getStyle('width')||n.clientWidth),h:parseInt(t.getStyle('height')||n.clientHeight)}},moveTo:function(x,y){t.setStyles({left:x,top:y})},moveBy:function(x,y){var p=t.getXY();t.moveTo(p.x+x,p.y+y)},resizeTo:function(w,h){t.setStyles({width:w,height:h})},resizeBy:function(w,h){var s=t.getSize();t.resizeTo(s.w+w,s.h+h)},update:function(k){var b;if(c.isIE6&&e.blocker){k=k||'';if(k.indexOf('get')===0||k.indexOf('has')===0||k.indexOf('is')===0)return;if(k=='remove'){g.remove(t.blocker);return}if(!t.blocker){t.blocker=g.uniqueId();b=g.add(e.container||g.getRoot(),'iframe',{id:t.blocker,style:'position:absolute;',frameBorder:0,src:'javascript:""'});g.setStyle(b,'opacity',0)}else b=g.get(t.blocker);g.setStyles(b,{left:t.getStyle('left',1),top:t.getStyle('top',1),width:t.getStyle('width',1),height:t.getStyle('height',1),display:t.getStyle('display',1),zIndex:parseInt(t.getStyle('zIndex',1)||0)-1})}}})}})(tinymce);(function(a){function b(s){return s.replace(/[\n\r]+/g,'')};var c=a.is,d=a.isIE,f=a.each,T=a.dom.TreeWalker;a.create('tinymce.dom.Selection',{Selection:function(g,w,s,h){var t=this;t.dom=g;t.win=w;t.serializer=s;t.editor=h;f(['onBeforeSetContent','onBeforeGetContent','onSetContent','onGetContent'],function(e){t[e]=new a.util.Dispatcher(t)});if(!t.win.getSelection)t.tridentSel=new a.dom.TridentSelection(t);if(a.isIE&&g.boxModel)this._fixIESelection();a.addUnload(t.destroy,t)},setCursorLocation:function(n,o){var t=this;var r=t.dom.createRng();r.setStart(n,o);r.setEnd(n,o);t.setRng(r);t.collapse(false)},getContent:function(s){var t=this,r=t.getRng(),e=t.dom.create("body"),g=t.getSel(),w,h,n;s=s||{};w=h='';s.get=true;s.format=s.format||'html';s.forced_root_block='';t.onBeforeGetContent.dispatch(t,s);if(s.format=='text')return t.isCollapsed()?'':(r.text||(g.toString?g.toString():''));if(r.cloneContents){n=r.cloneContents();if(n)e.appendChild(n)}else if(c(r.item)||c(r.htmlText)){e.innerHTML='<br>'+(r.item?r.item(0).outerHTML:r.htmlText);e.removeChild(e.firstChild)}else e.innerHTML=r.toString();if(/^\s/.test(e.innerHTML))w=' ';if(/\s+$/.test(e.innerHTML))h=' ';s.getInner=true;s.content=t.isCollapsed()?'':w+t.serializer.serialize(e,s)+h;t.onGetContent.dispatch(t,s);return s.content},setContent:function(e,g){var s=this,r=s.getRng(),h,i=s.win.document,j,t;g=g||{format:'html'};g.set=true;e=g.content=e;if(!g.no_events)s.onBeforeSetContent.dispatch(s,g);e=g.content;if(r.insertNode){e+='<span id="__caret">_</span>';if(r.startContainer==i&&r.endContainer==i){i.body.innerHTML=e}else{r.deleteContents();if(i.body.childNodes.length===0){i.body.innerHTML=e}else{if(r.createContextualFragment){r.insertNode(r.createContextualFragment(e))}else{j=i.createDocumentFragment();t=i.createElement('div');j.appendChild(t);t.outerHTML=e;r.insertNode(j)}}}h=s.dom.get('__caret');r=i.createRange();r.setStartBefore(h);r.setEndBefore(h);s.setRng(r);s.dom.remove('__caret');try{s.setRng(r)}catch(k){}}else{if(r.item){i.execCommand('Delete',false,null);r=s.getRng()}if(/^\s+/.test(e)){r.pasteHTML('<span id="__mce_tmp">_</span>'+e);s.dom.remove('__mce_tmp')}else r.pasteHTML(e)}if(!g.no_events)s.onSetContent.dispatch(s,g)},getStart:function(){var s=this,r=s.getRng(),e,p,g,n;if(r.duplicate||r.item){if(r.item)return r.item(0);g=r.duplicate();g.collapse(1);e=g.parentElement();if(e.ownerDocument!==s.dom.doc){e=s.dom.getRoot()}p=n=r.parentElement();while(n=n.parentNode){if(n==e){e=p;break}}return e}else{e=r.startContainer;if(e.nodeType==1&&e.hasChildNodes())e=e.childNodes[Math.min(e.childNodes.length-1,r.startOffset)];if(e&&e.nodeType==3)return e.parentNode;return e}},getEnd:function(){var s=this,r=s.getRng(),e,g;if(r.duplicate||r.item){if(r.item)return r.item(0);r=r.duplicate();r.collapse(0);e=r.parentElement();if(e.ownerDocument!==s.dom.doc){e=s.dom.getRoot()}if(e&&e.nodeName=='BODY')return e.lastChild||e;return e}else{e=r.endContainer;g=r.endOffset;if(e.nodeType==1&&e.hasChildNodes())e=e.childNodes[g>0?g-1:g];if(e&&e.nodeType==3)return e.parentNode;return e}},getBookmark:function(e,n){var t=this,g=t.dom,r,h,j,k,l,m,o,p='\uFEFF',s;function q(l,m){var o=0;f(g.select(l),function(x,i){if(x==m)o=i});return o};function u(r){function i(x){var y,z,A,B=x?'start':'end';y=r[B+'Container'];z=r[B+'Offset'];if(y.nodeType==1&&y.nodeName=="TR"){A=y.childNodes;y=A[Math.min(x?z:z-1,A.length-1)];if(y){z=x?0:y.childNodes.length;r['set'+(x?'Start':'End')](y,z)}}};i(true);i();return r};function v(){var r=t.getRng(true),i=g.getRoot(),x={};function y(r,z){var A=r[z?'startContainer':'endContainer'],B=r[z?'startOffset':'endOffset'],C=[],D,E,F=0;if(A.nodeType==3){if(n){for(D=A.previousSibling;D&&D.nodeType==3;D=D.previousSibling)B+=D.nodeValue.length}C.push(B)}else{E=A.childNodes;if(B>=E.length&&E.length){F=1;B=Math.max(0,E.length-1)}C.push(t.dom.nodeIndex(E[B],n)+F)}for(;A&&A!=i;A=A.parentNode)C.push(t.dom.nodeIndex(A,n));return C};x.start=y(r,true);if(!t.isCollapsed())x.end=y(r);return x};if(e==2){if(t.tridentSel)return t.tridentSel.getBookmark(e);return v()}if(e)return{rng:t.getRng()};r=t.getRng();j=g.uniqueId();k=tinyMCE.activeEditor.selection.isCollapsed();s='overflow:hidden;line-height:0px';if(r.duplicate||r.item){if(!r.item){h=r.duplicate();try{r.collapse();r.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_start" style="'+s+'">'+p+'</span>');if(!k){h.collapse(false);r.moveToElementText(h.parentElement());if(r.compareEndPoints('StartToEnd',h)===0)h.move('character',-1);h.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_end" style="'+s+'">'+p+'</span>')}}catch(w){return null}}else{m=r.item(0);l=m.nodeName;return{name:l,index:q(l,m)}}}else{m=t.getNode();l=m.nodeName;if(l=='IMG')return{name:l,index:q(l,m)};h=u(r.cloneRange());if(!k){h.collapse(false);h.insertNode(g.create('span',{'data-mce-type':"bookmark",id:j+'_end',style:s},p))}r=u(r);r.collapse(true);r.insertNode(g.create('span',{'data-mce-type':"bookmark",id:j+'_start',style:s},p))}t.moveToBookmark({id:j,keep:1});return{id:j}},moveToBookmark:function(e){var t=this,g=t.dom,m,h,r,j,s,k,l,n;function o(u){var v=e[u?'start':'end'],i,w,x,y;if(v){x=v[0];for(w=j,i=v.length-1;i>=1;i--){y=w.childNodes;if(v[i]>y.length-1)return;w=y[v[i]]}if(w.nodeType===3)x=Math.min(v[0],w.nodeValue.length);if(w.nodeType===1)x=Math.min(v[0],w.childNodes.length);if(u)r.setStart(w,x);else r.setEnd(w,x)}return true};function p(i){var u=g.get(e.id+'_'+i),v,w,x,y,z=e.keep;if(u){v=u.parentNode;if(i=='start'){if(!z){w=g.nodeIndex(u)}else{v=u.firstChild;w=1}s=k=v;l=n=w}else{if(!z){w=g.nodeIndex(u)}else{v=u.firstChild;w=1}k=v;n=w}if(!z){y=u.previousSibling;x=u.nextSibling;f(a.grep(u.childNodes),function(v){if(v.nodeType==3)v.nodeValue=v.nodeValue.replace(/\uFEFF/g,'')});while(u=g.get(e.id+'_'+i))g.remove(u,1);if(y&&x&&y.nodeType==x.nodeType&&y.nodeType==3&&!a.isOpera){w=y.nodeValue.length;y.appendData(x.nodeValue);g.remove(x);if(i=='start'){s=k=y;l=n=w}else{k=y;n=w}}}}};function q(i){if(g.isBlock(i)&&!i.innerHTML&&!d)i.innerHTML='<br data-mce-bogus="1" />';return i};if(e){if(e.start){r=g.createRng();j=g.getRoot();if(t.tridentSel)return t.tridentSel.moveToBookmark(e);if(o(true)&&o()){t.setRng(r)}}else if(e.id){p('start');p('end');if(s){r=g.createRng();r.setStart(q(s),l);r.setEnd(q(k),n);t.setRng(r)}}else if(e.name){t.select(g.select(e.name)[e.index])}else if(e.rng)t.setRng(e.rng)}},select:function(n,e){var t=this,g=t.dom,r=g.createRng(),i;function s(n,h){var w=new T(n,n);do{if(n.nodeType==3&&a.trim(n.nodeValue).length!==0){if(h)r.setStart(n,0);else r.setEnd(n,n.nodeValue.length);return}if(n.nodeName=='BR'){if(h)r.setStartBefore(n);else r.setEndBefore(n);return}}while(n=(h?w.next():w.prev()))};if(n){i=g.nodeIndex(n);r.setStart(n.parentNode,i);r.setEnd(n.parentNode,i+1);if(e){s(n,1);s(n)}t.setRng(r)}return n},isCollapsed:function(){var t=this,r=t.getRng(),s=t.getSel();if(!r||r.item)return false;if(r.compareEndPoints)return r.compareEndPoints('StartToEnd',r)===0;return!s||r.collapsed},collapse:function(t){var s=this,r=s.getRng(),n;if(r.item){n=r.item(0);r=s.win.document.body.createTextRange();r.moveToElementText(n)}r.collapse(!!t);s.setRng(r)},getSel:function(){var t=this,w=this.win;return w.getSelection?w.getSelection():w.document.selection},getRng:function(w){var s=this,e,r,g,h=s.win.document;if(w&&s.tridentSel){return s.tridentSel.getRangeAt(0)}try{if(e=s.getSel()){r=e.rangeCount>0?e.getRangeAt(0):(e.createRange?e.createRange():h.createRange())}}catch(i){}if(a.isIE&&r&&r.setStart&&h.selection.createRange().item){g=h.selection.createRange().item(0);r=h.createRange();r.setStartBefore(g);r.setEndAfter(g)}if(!r){r=h.createRange?h.createRange():h.body.createTextRange()}if(r.setStart&&r.startContainer.nodeType===9&&r.collapsed){g=s.dom.getRoot();r.setStart(g,0);r.setEnd(g,0)}if(s.selectedRange&&s.explicitRange){if(r.compareBoundaryPoints(r.START_TO_START,s.selectedRange)===0&&r.compareBoundaryPoints(r.END_TO_END,s.selectedRange)===0){r=s.explicitRange}else{s.selectedRange=null;s.explicitRange=null}}return r},setRng:function(r,e){var s,t=this;if(!t.tridentSel){s=t.getSel();if(s){t.explicitRange=r;try{s.removeAllRanges()}catch(g){}s.addRange(r);if(e===false&&s.extend){s.collapse(r.endContainer,r.endOffset);s.extend(r.startContainer,r.startOffset)}t.selectedRange=s.rangeCount>0?s.getRangeAt(0):null}}else{if(r.cloneRange){try{t.tridentSel.addRange(r);return}catch(g){}}try{r.select()}catch(g){}}},setNode:function(n){var t=this;t.setContent(t.dom.getOuterHTML(n));return n},getNode:function(){var t=this,r=t.getRng(),s=t.getSel(),e,g=r.startContainer,h=r.endContainer;function i(n,j){var o=n;while(n&&n.nodeType===3&&n.length===0){n=j?n.nextSibling:n.previousSibling}return n||o};if(!r)return t.dom.getRoot();if(r.setStart){e=r.commonAncestorContainer;if(!r.collapsed){if(r.startContainer==r.endContainer){if(r.endOffset-r.startOffset<2){if(r.startContainer.hasChildNodes())e=r.startContainer.childNodes[r.startOffset]}}if(g.nodeType===3&&h.nodeType===3){if(g.length===r.startOffset){g=i(g.nextSibling,true)}else{g=g.parentNode}if(r.endOffset===0){h=i(h.previousSibling,false)}else{h=h.parentNode}if(g&&g===h)return g}}if(e&&e.nodeType==3)return e.parentNode;return e}return r.item?r.item(0):r.parentElement()},getSelectedBlocks:function(s,e){var t=this,g=t.dom,h,i,n,j=[];h=g.getParent(s||t.getStart(),g.isBlock);i=g.getParent(e||t.getEnd(),g.isBlock);if(h)j.push(h);if(h&&i&&h!=i){n=h;var w=new T(h,g.getRoot());while((n=w.next())&&n!=i){if(g.isBlock(n))j.push(n)}}if(i&&h!=i)j.push(i);return j},isForward:function(){var e=this.dom,s=this.getSel(),g,h;if(!s||s.anchorNode==null||s.focusNode==null){return true}g=e.createRng();g.setStart(s.anchorNode,s.anchorOffset);g.collapse(true);h=e.createRng();h.setStart(s.focusNode,s.focusOffset);h.collapse(true);return g.compareBoundaryPoints(g.START_TO_START,h)<=0},normalize:function(){var s=this,r,n,e,g,h;function i(j){var k,o,w,l=s.dom,m=l.getRoot(),g,p,q;function t(g,v){var w=new T(g,l.getParent(g.parentNode,l.isBlock)||m);while(g=w[v?'prev':'next']()){if(g.nodeName==="BR"){return true}}};function u(v,x){var w,y;x=x||k;w=new T(x,l.getParent(x.parentNode,l.isBlock)||m);while(g=w[v?'prev':'next']()){if(g.nodeType===3&&g.nodeValue.length>0){k=g;o=v?g.nodeValue.length:0;n=true;return}if(l.isBlock(g)||p[g.nodeName.toLowerCase()]){return}y=g}if(e&&y){k=y;n=true;o=0}};k=r[(j?'start':'end')+'Container'];o=r[(j?'start':'end')+'Offset'];p=l.schema.getNonEmptyElements();if(k.nodeType===9){k=l.getRoot();o=0}if(k===m){if(j){g=k.childNodes[o>0?o-1:0];if(g){q=g.nodeName.toLowerCase();if(p[g.nodeName]||g.nodeName=="TABLE"){return}}}if(k.hasChildNodes()){k=k.childNodes[Math.min(!j&&o>0?o-1:o,k.childNodes.length-1)];o=0;if(k.hasChildNodes()&&!/TABLE/.test(k.nodeName)){g=k;w=new T(k,m);do{if(g.nodeType===3&&g.nodeValue.length>0){o=j?0:g.nodeValue.length;k=g;n=true;break}if(p[g.nodeName.toLowerCase()]){o=l.nodeIndex(g);k=g.parentNode;if(g.nodeName=="IMG"&&!j){o++}n=true;break}}while(g=(j?w.next():w.prev()))}}}if(e){if(k.nodeType===3&&o===0){u(true)}if(k.nodeType===1){g=k.childNodes[o];if(g&&g.nodeName==='BR'&&!t(g)&&!t(g,true)){u(true,k.childNodes[o])}}}if(j&&!e&&k.nodeType===3&&o===k.nodeValue.length){u(false)}if(n)r['set'+(j?'Start':'End')](k,o)};if(a.isIE)return;r=s.getRng();e=r.collapsed;i(true);if(!e)i();if(n){if(e){r.collapse(true)}s.setRng(r,s.isForward())}},selectorChanged:function(s,e){var g=this,h;if(!g.selectorChangedData){g.selectorChangedData={};h={};g.editor.onNodeChange.addToTop(function(i,j,n){var k=g.dom,p=k.getParents(n,null,k.getRoot()),m={};f(g.selectorChangedData,function(l,s){f(p,function(n){if(k.is(n,s)){if(!h[s]){f(l,function(e){e(true,{node:n,selector:s,parents:p})});h[s]=l}m[s]=l;return false}})});f(h,function(l,s){if(!m[s]){delete h[s];f(l,function(e){e(false,{node:n,selector:s,parents:p})})}})})}if(!g.selectorChangedData[s]){g.selectorChangedData[s]=[]}g.selectorChangedData[s].push(e);return g},scrollIntoView:function(e){var y,v,s=this,g=s.dom;v=g.getViewPort(s.editor.getWin());y=g.getPos(e).y;if(y<v.y||y+25>v.y+v.h){s.editor.getWin().scrollTo(0,y<v.y?y:y-v.h+25)}},destroy:function(m){var s=this;s.win=null;if(!m)a.removeUnload(s.destroy)},_fixIESelection:function(){var g=this.dom,h=g.doc,i=h.body,s,j,k;function r(x,y){var e=i.createTextRange();try{e.moveToPoint(x,y)}catch(n){e=null}return e};function l(e){var p;if(e.button){p=r(e.x,e.y);if(p){if(p.compareEndPoints('StartToStart',j)>0)p.setEndPoint('StartToStart',j);else p.setEndPoint('EndToEnd',j);p.select()}}else m()}function m(){var e=h.selection.createRange();if(j&&!e.item&&e.compareEndPoints('StartToEnd',e)===0)j.select();g.unbind(h,'mouseup',m);g.unbind(h,'mousemove',l);j=s=0};h.documentElement.unselectable=true;g.bind(h,['mousedown','contextmenu'],function(e){if(e.target.nodeName==='HTML'){if(s)m();k=h.documentElement;if(k.scrollHeight>k.clientHeight)return;s=1;j=r(e.x,e.y);if(j){g.bind(h,'mouseup',m);g.bind(h,'mousemove',l);g.win.focus();j.select()}}})}})})(tinymce);(function(t){t.dom.Serializer=function(s,d,a){var o,b,c=t.isIE,e=t.each,h;if(!s.apply_source_formatting)s.indent=false;d=d||t.DOM;a=a||new t.html.Schema(s);s.entity_encoding=s.entity_encoding||'named';s.remove_trailing_brs="remove_trailing_brs"in s?s.remove_trailing_brs:true;o=new t.util.Dispatcher(self);b=new t.util.Dispatcher(self);h=new t.html.DomParser(s,a);h.addAttributeFilter('src,href,style',function(n,f){var i=n.length,g,v,j='data-mce-'+f,u=s.url_converter,k=s.url_converter_scope,l;while(i--){g=n[i];v=g.attributes.map[j];if(v!==l){g.attr(f,v.length>0?v:null);g.attr(j,null)}else{v=g.attributes.map[f];if(f==="style")v=d.serializeStyle(d.parseStyle(v),g.name);else if(u)v=u.call(k,v,f,g.name);g.attr(f,v.length>0?v:null)}}});h.addAttributeFilter('class',function(n,f){var i=n.length,g,v;while(i--){g=n[i];v=g.attr('class').replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,'');g.attr('class',v.length>0?v:null)}});h.addAttributeFilter('data-mce-type',function(n,f,g){var i=n.length,j;while(i--){j=n[i];if(j.attributes.map['data-mce-type']==='bookmark'&&!g.cleanup)j.remove()}});h.addAttributeFilter('data-mce-expando',function(n,f,g){var i=n.length;while(i--){n[i].attr(f,null)}});h.addNodeFilter('noscript',function(n){var i=n.length,f;while(i--){f=n[i].firstChild;if(f){f.value=t.html.Entities.decode(f.value)}}});h.addNodeFilter('script,style',function(n,f){var i=n.length,g,v;function j(v){return v.replace(/(<!--\[CDATA\[|\]\]-->)/g,'\n').replace(/^[\r\n]*|[\r\n]*$/g,'').replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,'').replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,'')};while(i--){g=n[i];v=g.firstChild?g.firstChild.value:'';if(f==="script"){g.attr('type',(g.attr('type')||'text/javascript').replace(/^mce\-/,''));if(v.length>0)g.firstChild.value='// <![CDATA[\n'+j(v)+'\n// ]]>'}else{if(v.length>0)g.firstChild.value='<!--\n'+j(v)+'\n-->'}}});h.addNodeFilter('#comment',function(n,f){var i=n.length,g;while(i--){g=n[i];if(g.value.indexOf('[CDATA[')===0){g.name='#cdata';g.type=4;g.value=g.value.replace(/^\[CDATA\[|\]\]$/g,'')}else if(g.value.indexOf('mce:protected ')===0){g.name="#text";g.type=3;g.raw=true;g.value=unescape(g.value).substr(14)}}});h.addNodeFilter('xml:namespace,input',function(n,f){var i=n.length,g;while(i--){g=n[i];if(g.type===7)g.remove();else if(g.type===1){if(f==="input"&&!("type"in g.attributes.map))g.attr('type','text')}}});if(s.fix_list_elements){h.addNodeFilter('ul,ol',function(n,f){var i=n.length,g,p;while(i--){g=n[i];p=g.parent;if(p.name==='ul'||p.name==='ol'){if(g.prev&&g.prev.name==='li'){g.prev.append(g)}}}})}h.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style',function(n,f){var i=n.length;while(i--){n[i].attr(f,null)}});return{schema:a,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,onPreProcess:o,onPostProcess:b,serialize:function(n,f){var i,g,j,k,l;if(c&&d.select('script,style,select,map').length>0){l=n.innerHTML;n=n.cloneNode(false);d.setHTML(n,l)}else n=n.cloneNode(true);i=n.ownerDocument.implementation;if(i.createHTMLDocument){g=i.createHTMLDocument("");e(n.nodeName=='BODY'?n.childNodes:[n],function(n){g.body.appendChild(g.importNode(n,true))});if(n.nodeName!='BODY')n=g.body.firstChild;else n=g.body;j=d.doc;d.doc=g}f=f||{};f.format=f.format||'html';if(!f.no_events){f.node=n;o.dispatch(self,f)}k=new t.html.Serializer(s,a);f.content=k.serialize(h.parse(t.trim(f.getInner?n.innerHTML:d.getOuterHTML(n)),f));if(!f.cleanup)f.content=f.content.replace(/\uFEFF/g,'');if(!f.no_events)b.dispatch(self,f);if(j)d.doc=j;f.node=null;return f.content},addRules:function(r){a.addValidElements(r)},setRules:function(r){a.setValidElements(r)}}}})(tinymce);(function(a){a.dom.ScriptLoader=function(s){var Q=0,L=1,b=2,c={},q=[],d={},e=[],l=0,u;function f(g,h){var t=this,i=a.DOM,j,k,m,n;function o(){i.remove(n);if(j)j.onreadystatechange=j.onload=j=null;h()};function p(){if(typeof(console)!=="undefined"&&console.log)console.log("Failed to load: "+g)};n=i.uniqueId();if(a.isIE6){k=new a.util.URI(g);m=location;if(k.host==m.hostname&&k.port==m.port&&(k.protocol+':')==m.protocol&&k.protocol.toLowerCase()!='file'){a.util.XHR.send({url:a._addVer(k.getURI()),success:function(r){var v=i.create('script',{type:'text/javascript'});v.text=r;document.getElementsByTagName('head')[0].appendChild(v);i.remove(v);o()},error:p});return}}j=document.createElement('script');j.id=n;j.type='text/javascript';j.src=a._addVer(g);if(!a.isIE)j.onload=o;j.onerror=p;if(!a.isOpera){j.onreadystatechange=function(){var r=j.readyState;if(r=='complete'||r=='loaded')o()}}(document.getElementsByTagName('head')[0]||document.body).appendChild(j)};this.isDone=function(g){return c[g]==b};this.markDone=function(g){c[g]=b};this.add=this.load=function(g,h,i){var j,k=c[g];if(k==u){q.push(g);c[g]=Q}if(h){if(!d[g])d[g]=[];d[g].push({func:h,scope:i||this})}};this.loadQueue=function(g,h){this.loadScripts(q,g,h)};this.loadScripts=function(g,h,i){var j;function k(m){a.each(d[m],function(h){h.func.call(h.scope)});d[m]=u};e.push({func:h,scope:i||this});j=function(){var m=a.grep(g);g.length=0;a.each(m,function(n){if(c[n]==b){k(n);return}if(c[n]!=L){c[n]=L;l++;f(n,function(){c[n]=b;l--;k(n);j()})}});if(!l){a.each(e,function(h){h.func.call(h.scope)});e.length=0}};j()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);(function(t){t.dom.RangeUtils=function(d){var I='\uFEFF';this.walk=function(r,c){var s=r.startContainer,a=r.startOffset,e=r.endContainer,b=r.endOffset,f,g,h,n,p,i,j;j=d.select('td.mceSelected,th.mceSelected');if(j.length>0){t.each(j,function(n){c([n])});return}function k(j){var n;n=j[0];if(n.nodeType===3&&n===s&&a>=n.nodeValue.length){j.splice(0,1)}n=j[j.length-1];if(b===0&&j.length>0&&n===e&&n.nodeType===3){j.splice(j.length-1,1)}return j};function l(n,o,q){var i=[];for(;n&&n!=q;n=n[o])i.push(n);return i};function m(n,o){do{if(n.parentNode==o)return n;n=n.parentNode}while(n)};function w(o,q,u){var v=u?'nextSibling':'previousSibling';for(n=o,p=n.parentNode;n&&n!=q;n=p){p=n.parentNode;i=l(n==o?n:n[v],v);if(i.length){if(!u)i.reverse();c(k(i))}}};if(s.nodeType==1&&s.hasChildNodes())s=s.childNodes[a];if(e.nodeType==1&&e.hasChildNodes())e=e.childNodes[Math.min(b-1,e.childNodes.length-1)];if(s==e)return c(k([s]));f=d.findCommonAncestor(s,e);for(n=s;n;n=n.parentNode){if(n===e)return w(s,f,true);if(n===f)break}for(n=e;n;n=n.parentNode){if(n===s)return w(e,f);if(n===f)break}g=m(s,f)||s;h=m(e,f)||e;w(s,g,true);i=l(g==s?g:g.nextSibling,'nextSibling',h==e?h.nextSibling:h);if(i.length)c(k(i));w(e,h)};this.split=function(r){var s=r.startContainer,a=r.startOffset,e=r.endContainer,b=r.endOffset;function c(n,o){return n.splitText(o)};if(s==e&&s.nodeType==3){if(a>0&&a<s.nodeValue.length){e=c(s,a);s=e.previousSibling;if(b>a){b=b-a;s=e=c(e,b).previousSibling;b=e.nodeValue.length;a=0}else{b=0}}}else{if(s.nodeType==3&&a>0&&a<s.nodeValue.length){s=c(s,a);a=0}if(e.nodeType==3&&b>0&&b<e.nodeValue.length){e=c(e,b).previousSibling;b=e.nodeValue.length}}return{startContainer:s,startOffset:a,endContainer:e,endOffset:b}}};t.dom.RangeUtils.compareRanges=function(r,a){if(r&&a){if(r.item||r.duplicate){if(r.item&&a.item&&r.item(0)===a.item(0))return true;if(r.isEqual&&a.isEqual&&a.isEqual(r))return true}else{return r.startContainer==a.startContainer&&r.startOffset==a.startOffset}}return false}})(tinymce);(function(a){var E=a.dom.Event,e=a.each;a.create('tinymce.ui.KeyboardNavigation',{KeyboardNavigation:function(s,d){var t=this,r=s.root,i=s.items,b=s.enableUpDown,c=s.enableLeftRight||!s.enableUpDown,f=s.excludeFromTabOrder,g,h,j,k,l;d=d||a.DOM;g=function(n){l=n.target.id};h=function(n){d.setAttrib(n.target.id,'tabindex','-1')};k=function(n){var o=d.get(l);d.setAttrib(o,'tabindex','0');o.focus()};t.focus=function(){d.get(l).focus()};t.destroy=function(){e(i,function(n){var o=d.get(n.id);d.unbind(o,'focus',g);d.unbind(o,'blur',h)});var m=d.get(r);d.unbind(m,'focus',k);d.unbind(m,'keydown',j);i=d=r=t.focus=g=h=j=k=null;t.destroy=function(){}};t.moveFocus=function(n,o){var p=-1,q=t.controls,u;if(!l)return;e(i,function(v,w){if(v.id===l){p=w;return false}});p+=n;if(p<0){p=i.length-1}else if(p>=i.length){p=0}u=i[p];d.setAttrib(l,'tabindex','-1');d.setAttrib(u.id,'tabindex','0');d.get(u.id).focus();if(s.actOnFocus){s.onAction(u.id)}if(o)E.cancel(o)};j=function(n){var D=37,o=39,p=38,q=40,u=27,v=14,w=13,x=32;switch(n.keyCode){case D:if(c)t.moveFocus(-1);break;case o:if(c)t.moveFocus(1);break;case p:if(b)t.moveFocus(-1);break;case q:if(b)t.moveFocus(1);break;case u:if(s.onCancel){s.onCancel();E.cancel(n)}break;case v:case w:case x:if(s.onAction){s.onAction(l);E.cancel(n)}break}};e(i,function(n,o){var p,q;if(!n.id){n.id=d.uniqueId('_mce_item_')}q=d.get(n.id);if(f){d.bind(q,'blur',h);p='-1'}else{p=(o===0?'0':'-1')}q.setAttribute('tabindex',p);d.bind(q,'focus',g)});if(i[0]){l=i[0].id}d.setAttrib(r,'tabindex','-1');var m=d.get(r);d.bind(m,'focus',k);d.bind(m,'keydown',j)}})})(tinymce);(function(a){var D=a.DOM,i=a.is;a.create('tinymce.ui.Control',{Control:function(b,s,e){this.id=b;this.settings=s=s||{};this.rendered=false;this.onRender=new a.util.Dispatcher(this);this.classPrefix='';this.scope=s.scope||this;this.disabled=0;this.active=0;this.editor=e},setAriaProperty:function(p,v){var e=D.get(this.id+'_aria')||D.get(this.id);if(e){D.setAttrib(e,'aria-'+p,!!v)}},focus:function(){D.get(this.id).focus()},setDisabled:function(s){if(s!=this.disabled){this.setAriaProperty('disabled',s);this.setState('Disabled',s);this.setState('Enabled',!s);this.disabled=s}},isDisabled:function(){return this.disabled},setActive:function(s){if(s!=this.active){this.setState('Active',s);this.active=s;this.setAriaProperty('pressed',s)}},isActive:function(){return this.active},setState:function(c,s){var n=D.get(this.id);c=this.classPrefix+c;if(s)D.addClass(n,c);else D.removeClass(n,c)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(n){D.setHTML(n,this.renderHTML())},postRender:function(){var t=this,b;if(i(t.disabled)){b=t.disabled;t.disabled=-1;t.setDisabled(b)}if(i(t.active)){b=t.active;t.active=-1;t.setActive(b)}},remove:function(){D.remove(this.id);this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})})(tinymce);tinymce.create('tinymce.ui.Container:tinymce.ui.Control',{Container:function(i,s,e){this.parent(i,s,e);this.controls=[];this.lookup={}},add:function(c){this.lookup[c.id]=c;this.controls.push(c);return c},get:function(n){return this.lookup[n]}});tinymce.create('tinymce.ui.Separator:tinymce.ui.Control',{Separator:function(i,s){this.parent(i,s);this.classPrefix='mceSeparator';this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML('span',{'class':this.classPrefix,role:'separator','aria-orientation':'vertical',tabindex:'-1'})}});(function(a){var i=a.is,D=a.DOM,e=a.each,w=a.walk;a.create('tinymce.ui.MenuItem:tinymce.ui.Control',{MenuItem:function(b,s){this.parent(b,s);this.classPrefix='mceMenuItem'},setSelected:function(s){this.setState('Selected',s);this.setAriaProperty('checked',!!s);this.selected=s},isSelected:function(){return this.selected},postRender:function(){var t=this;t.parent();if(i(t.selected))t.setSelected(t.selected)}})})(tinymce);(function(a){var i=a.is,D=a.DOM,e=a.each,w=a.walk;a.create('tinymce.ui.Menu:tinymce.ui.MenuItem',{Menu:function(b,s){var t=this;t.parent(b,s);t.items={};t.collapsed=false;t.menuCount=0;t.onAddItem=new a.util.Dispatcher(this)},expand:function(d){var t=this;if(d){w(t,function(o){if(o.expand)o.expand()},'items',t)}t.collapsed=false},collapse:function(d){var t=this;if(d){w(t,function(o){if(o.collapse)o.collapse()},'items',t)}t.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(o){if(!o.settings)o=new a.ui.MenuItem(o.id||D.uniqueId(),o);this.onAddItem.dispatch(this,o);return this.items[o.id]=o},addSeparator:function(){return this.add({separator:true})},addMenu:function(o){if(!o.collapse)o=this.createMenu(o);this.menuCount++;return this.add(o)},hasMenus:function(){return this.menuCount!==0},remove:function(o){delete this.items[o.id]},removeAll:function(){var t=this;w(t,function(o){if(o.removeAll)o.removeAll();else o.remove();o.destroy()},'items',t);t.items={}},createMenu:function(o){var m=new a.ui.Menu(o.id||D.uniqueId(),o);m.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return m}})})(tinymce);(function(b){var i=b.is,D=b.DOM,f=b.each,E=b.dom.Event,g=b.dom.Element;b.create('tinymce.ui.DropMenu:tinymce.ui.Menu',{DropMenu:function(a,s){s=s||{};s.container=s.container||D.doc.body;s.offset_x=s.offset_x||0;s.offset_y=s.offset_y||0;s.vp_offset_x=s.vp_offset_x||0;s.vp_offset_y=s.vp_offset_y||0;if(i(s.icons)&&!s.icons)s['class']+=' mceNoIcons';this.parent(a,s);this.onShowMenu=new b.util.Dispatcher(this);this.onHideMenu=new b.util.Dispatcher(this);this.classPrefix='mceMenu'},createMenu:function(s){var t=this,c=t.settings,m;s.container=s.container||c.container;s.parent=t;s.constrain=s.constrain||c.constrain;s['class']=s['class']||c['class'];s.vp_offset_x=s.vp_offset_x||c.vp_offset_x;s.vp_offset_y=s.vp_offset_y||c.vp_offset_y;s.keyboard_focus=c.keyboard_focus;m=new b.ui.DropMenu(s.id||D.uniqueId(),s);m.onAddItem.add(t.onAddItem.dispatch,t.onAddItem);return m},focus:function(){var t=this;if(t.keyboardNav){t.keyboardNav.focus()}},update:function(){var t=this,s=t.settings,a=D.get('menu_'+t.id+'_tbl'),c=D.get('menu_'+t.id+'_co'),d,e;d=s.max_width?Math.min(a.offsetWidth,s.max_width):a.offsetWidth;e=s.max_height?Math.min(a.offsetHeight,s.max_height):a.offsetHeight;if(!D.boxModel)t.element.setStyles({width:d+2,height:e+2});else t.element.setStyles({width:d,height:e});if(s.max_width)D.setStyle(c,'width',d);if(s.max_height){D.setStyle(c,'height',e);if(a.clientHeight<s.max_height)D.setStyle(c,'overflow','hidden')}},showMenu:function(x,y,p){var t=this,s=t.settings,c,v=D.getViewPort(),w,h,a,d,j=2,k,l,n=t.classPrefix;t.collapse(1);if(t.isMenuVisible)return;if(!t.rendered){c=D.add(t.settings.container,t.renderNode());f(t.items,function(o){o.postRender()});t.element=new g('menu_'+t.id,{blocker:1,container:s.container})}else c=D.get('menu_'+t.id);if(!b.isOpera)D.setStyles(c,{left:-0xFFFF,top:-0xFFFF});D.show(c);t.update();x+=s.offset_x||0;y+=s.offset_y||0;v.w-=4;v.h-=4;if(s.constrain){w=c.clientWidth-j;h=c.clientHeight-j;a=v.x+v.w;d=v.y+v.h;if((x+s.vp_offset_x+w)>a)x=p?p-w:Math.max(0,(a-s.vp_offset_x)-w);if((y+s.vp_offset_y+h)>d)y=Math.max(0,(d-s.vp_offset_y)-h)}D.setStyles(c,{left:x,top:y});t.element.update();t.isMenuVisible=1;t.mouseClickFunc=E.add(c,'click',function(e){var m;e=e.target;if(e&&(e=D.getParent(e,'tr'))&&!D.hasClass(e,n+'ItemSub')){m=t.items[e.id];if(m.isDisabled())return;k=t;while(k){if(k.hideMenu)k.hideMenu();k=k.settings.parent}if(m.settings.onclick)m.settings.onclick(e);return false}});if(t.hasMenus()){t.mouseOverFunc=E.add(c,'mouseover',function(e){var m,r,o;e=e.target;if(e&&(e=D.getParent(e,'tr'))){m=t.items[e.id];if(t.lastMenu)t.lastMenu.collapse(1);if(m.isDisabled())return;if(e&&D.hasClass(e,n+'ItemSub')){r=D.getRect(e);m.showMenu((r.x+r.w-j),r.y-j,r.x);t.lastMenu=m;D.addClass(D.get(m.id).firstChild,n+'ItemActive')}}})}E.add(c,'keydown',t._keyHandler,t);t.onShowMenu.dispatch(t);if(s.keyboard_focus){t._setupKeyboardNav()}},hideMenu:function(c){var t=this,a=D.get('menu_'+t.id),e;if(!t.isMenuVisible)return;if(t.keyboardNav)t.keyboardNav.destroy();E.remove(a,'mouseover',t.mouseOverFunc);E.remove(a,'click',t.mouseClickFunc);E.remove(a,'keydown',t._keyHandler);D.hide(a);t.isMenuVisible=0;if(!c)t.collapse(1);if(t.element)t.element.hide();if(e=D.get(t.id))D.removeClass(e.firstChild,t.classPrefix+'ItemActive');t.onHideMenu.dispatch(t)},add:function(o){var t=this,c;o=t.parent(o);if(t.isRendered&&(c=D.get('menu_'+t.id)))t._add(D.select('tbody',c)[0],o);return o},collapse:function(d){this.parent(d);this.hideMenu(1)},remove:function(o){D.remove(o.id);this.destroy();return this.parent(o)},destroy:function(){var t=this,c=D.get('menu_'+t.id);if(t.keyboardNav)t.keyboardNav.destroy();E.remove(c,'mouseover',t.mouseOverFunc);E.remove(D.select('a',c),'focus',t.mouseOverFunc);E.remove(c,'click',t.mouseClickFunc);E.remove(c,'keydown',t._keyHandler);if(t.element)t.element.remove();D.remove(c)},renderNode:function(){var t=this,s=t.settings,n,a,c,w;w=D.create('div',{role:'listbox',id:'menu_'+t.id,'class':s['class'],'style':'position:absolute;left:0;top:0;z-index:200000;outline:0'});if(t.settings.parent){D.setAttrib(w,'aria-parent','menu_'+t.settings.parent.id)}c=D.add(w,'div',{role:'presentation',id:'menu_'+t.id+'_co','class':t.classPrefix+(s['class']?' '+s['class']:'')});t.element=new g('menu_'+t.id,{blocker:1,container:s.container});if(s.menu_line)D.add(c,'span',{'class':t.classPrefix+'Line'});n=D.add(c,'table',{role:'presentation',id:'menu_'+t.id+'_tbl',border:0,cellPadding:0,cellSpacing:0});a=D.add(n,'tbody');f(t.items,function(o){t._add(a,o)});t.rendered=true;return w},_setupKeyboardNav:function(){var c,m,t=this;c=D.get('menu_'+t.id);m=D.select('a[role=option]','menu_'+t.id);m.splice(0,0,c);t.keyboardNav=new b.ui.KeyboardNavigation({root:'menu_'+t.id,items:m,onCancel:function(){t.hideMenu()},enableUpDown:true});c.focus()},_keyHandler:function(a){var t=this,e;switch(a.keyCode){case 37:if(t.settings.parent){t.hideMenu();t.settings.parent.focus();E.cancel(a)}break;case 39:if(t.mouseOverFunc)t.mouseOverFunc(a);break}},_add:function(t,o){var n,s=o.settings,a,r,c,d=this.classPrefix,e;if(s.separator){r=D.add(t,'tr',{id:o.id,'class':d+'ItemSeparator'});D.add(r,'td',{'class':d+'ItemSeparator'});if(n=r.previousSibling)D.addClass(n,'mceLast');return}n=r=D.add(t,'tr',{id:o.id,'class':d+'Item '+d+'ItemEnabled'});n=c=D.add(n,s.titleItem?'th':'td');n=a=D.add(n,'a',{id:o.id+'_aria',role:s.titleItem?'presentation':'option',href:'javascript:;',onclick:"return false;",onmousedown:'return false;'});if(s.parent){D.setAttrib(a,'aria-haspopup','true');D.setAttrib(a,'aria-owns','menu_'+o.id)}D.addClass(c,s['class']);e=D.add(n,'span',{'class':'mceIcon'+(s.icon?' mce_'+s.icon:'')});if(s.icon_src)D.add(e,'img',{src:s.icon_src});n=D.add(n,s.element||'span',{'class':'mceText',title:o.settings.title},o.settings.title);if(o.settings.style){if(typeof o.settings.style=="function")o.settings.style=o.settings.style();D.setAttrib(n,'style',o.settings.style)}if(t.childNodes.length==1)D.addClass(r,'mceFirst');if((n=r.previousSibling)&&D.hasClass(n,d+'ItemSeparator'))D.addClass(r,'mceFirst');if(o.collapse)D.addClass(r,d+'ItemSub');if(n=r.previousSibling)D.removeClass(n,'mceLast');D.addClass(r,'mceLast')}})})(tinymce);(function(a){var D=a.DOM;a.create('tinymce.ui.Button:tinymce.ui.Control',{Button:function(i,s,e){this.parent(i,s,e);this.classPrefix='mceButton'},renderHTML:function(){var c=this.classPrefix,s=this.settings,h,l;l=D.encode(s.label||'');h='<a role="button" id="'+this.id+'" href="javascript:;" class="'+c+' '+c+'Enabled '+s['class']+(l?' '+c+'Labeled':'')+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+D.encode(s.title)+'">';if(s.image&&!(this.editor&&this.editor.forcedHighContrastMode))h+='<span class="mceIcon '+s['class']+'"><img class="mceIcon" src="'+s.image+'" alt="'+D.encode(s.title)+'" /></span>'+(l?'<span class="'+c+'Label">'+l+'</span>':'');else h+='<span class="mceIcon '+s['class']+'"></span>'+(l?'<span class="'+c+'Label">'+l+'</span>':'');h+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+s.title+'</span>';h+='</a>';return h},postRender:function(){var t=this,s=t.settings,i;if(a.isIE&&t.editor){a.dom.Event.add(t.id,'mousedown',function(e){var n=t.editor.selection.getNode().nodeName;i=n==='IMG'?t.editor.selection.getBookmark():null})}a.dom.Event.add(t.id,'click',function(e){if(!t.isDisabled()){if(a.isIE&&t.editor&&i!==null){t.editor.selection.moveToBookmark(i)}return s.onclick.call(s.scope,e)}});a.dom.Event.add(t.id,'keyup',function(e){if(!t.isDisabled()&&e.keyCode==a.VK.SPACEBAR)return s.onclick.call(s.scope,e)})}})})(tinymce);(function(a){var D=a.DOM,E=a.dom.Event,b=a.each,c=a.util.Dispatcher,u;a.create('tinymce.ui.ListBox:tinymce.ui.Control',{ListBox:function(i,s,e){var t=this;t.parent(i,s,e);t.items=[];t.onChange=new c(t);t.onPostRender=new c(t);t.onAdd=new c(t);t.onRenderMenu=new a.util.Dispatcher(this);t.classPrefix='mceListBox';t.marked={}},select:function(d){var t=this,e,f;t.marked={};if(d==u)return t.selectByIndex(-1);if(d&&typeof(d)=="function")f=d;else{f=function(v){return v==d}}if(d!=t.selectedValue){b(t.items,function(o,i){if(f(o.value)){e=1;t.selectByIndex(i);return false}});if(!e)t.selectByIndex(-1)}},selectByIndex:function(i){var t=this,e,o,l;t.marked={};if(i!=t.selectedIndex){e=D.get(t.id+'_text');l=D.get(t.id+'_voiceDesc');o=t.items[i];if(o){t.selectedValue=o.value;t.selectedIndex=i;D.setHTML(e,D.encode(o.title));D.setHTML(l,t.settings.title+" - "+o.title);D.removeClass(e,'mceTitle');D.setAttrib(t.id,'aria-valuenow',o.title)}else{D.setHTML(e,D.encode(t.settings.title));D.setHTML(l,D.encode(t.settings.title));D.addClass(e,'mceTitle');t.selectedValue=t.selectedIndex=null;D.setAttrib(t.id,'aria-valuenow',t.settings.title)}e=0}},mark:function(v){this.marked[v]=true},add:function(n,v,o){var t=this;o=o||{};o=a.extend(o,{title:n,value:v});t.items.push(o);t.onAdd.dispatch(t,o)},getLength:function(){return this.items.length},renderHTML:function(){var h='',t=this,s=t.settings,d=t.classPrefix;h='<span role="listbox" aria-haspopup="true" aria-labelledby="'+t.id+'_voiceDesc" aria-describedby="'+t.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+t.id+'" cellpadding="0" cellspacing="0" class="'+d+' '+d+'Enabled'+(s['class']?(' '+s['class']):'')+'"><tbody><tr>';h+='<td>'+D.createHTML('span',{id:t.id+'_voiceDesc','class':'voiceLabel',style:'display:none;'},t.settings.title);h+=D.createHTML('a',{id:t.id+'_text',tabindex:-1,href:'javascript:;','class':'mceText',onclick:"return false;",onmousedown:'return false;'},D.encode(t.settings.title))+'</td>';h+='<td>'+D.createHTML('a',{id:t.id+'_open',tabindex:-1,href:'javascript:;','class':'mceOpen',onclick:"return false;",onmousedown:'return false;'},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+'</td>';h+='</tr></tbody></table></span>';return h},showMenu:function(){var t=this,p,e=D.get(this.id),m;if(t.isDisabled()||t.items.length===0)return;if(t.menu&&t.menu.isMenuVisible)return t.hideMenu();if(!t.isMenuRendered){t.renderMenu();t.isMenuRendered=true}p=D.getPos(e);m=t.menu;m.settings.offset_x=p.x;m.settings.offset_y=p.y;m.settings.keyboard_focus=!a.isOpera;b(t.items,function(o){if(m.items[o.id]){m.items[o.id].setSelected(0)}});b(t.items,function(o){if(m.items[o.id]&&t.marked[o.value]){m.items[o.id].setSelected(1)}if(o.value===t.selectedValue){m.items[o.id].setSelected(1)}});m.showMenu(0,e.clientHeight);E.add(D.doc,'mousedown',t.hideMenu,t);D.addClass(t.id,t.classPrefix+'Selected')},hideMenu:function(e){var t=this;if(t.menu&&t.menu.isMenuVisible){D.removeClass(t.id,t.classPrefix+'Selected');if(e&&e.type=="mousedown"&&(e.target.id==t.id+'_text'||e.target.id==t.id+'_open'))return;if(!e||!D.getParent(e.target,'.mceMenu')){D.removeClass(t.id,t.classPrefix+'Selected');E.remove(D.doc,'mousedown',t.hideMenu,t);t.menu.hideMenu()}}},renderMenu:function(){var t=this,m;m=t.settings.control_manager.createDropMenu(t.id+'_menu',{menu_line:1,'class':t.classPrefix+'Menu mceNoIcons',max_width:250,max_height:150});m.onHideMenu.add(function(){t.hideMenu();t.focus()});m.add({title:t.settings.title,'class':'mceMenuItemTitle',onclick:function(){if(t.settings.onselect('')!==false)t.select('')}});b(t.items,function(o){if(o.value===u){m.add({title:o.title,role:"option",'class':'mceMenuItemTitle',onclick:function(){if(t.settings.onselect('')!==false)t.select('')}})}else{o.id=D.uniqueId();o.role="option";o.onclick=function(){if(t.settings.onselect(o.value)!==false)t.select(o.value)};m.add(o)}});t.onRenderMenu.dispatch(t,m);t.menu=m},postRender:function(){var t=this,d=t.classPrefix;E.add(t.id,'click',t.showMenu,t);E.add(t.id,'keydown',function(e){if(e.keyCode==32){t.showMenu(e);E.cancel(e)}});E.add(t.id,'focus',function(){if(!t._focused){t.keyDownHandler=E.add(t.id,'keydown',function(e){if(e.keyCode==40){t.showMenu();E.cancel(e)}});t.keyPressHandler=E.add(t.id,'keypress',function(e){var v;if(e.keyCode==13){v=t.selectedValue;t.selectedValue=null;E.cancel(e);t.settings.onselect(v)}})}t._focused=1});E.add(t.id,'blur',function(){E.remove(t.id,'keydown',t.keyDownHandler);E.remove(t.id,'keypress',t.keyPressHandler);t._focused=0});if(a.isIE6||!D.boxModel){E.add(t.id,'mouseover',function(){if(!D.hasClass(t.id,d+'Disabled'))D.addClass(t.id,d+'Hover')});E.add(t.id,'mouseout',function(){if(!D.hasClass(t.id,d+'Disabled'))D.removeClass(t.id,d+'Hover')})}t.onPostRender.dispatch(t,D.get(t.id))},destroy:function(){this.parent();E.clear(this.id+'_text');E.clear(this.id+'_open')}})})(tinymce);(function(b){var D=b.DOM,E=b.dom.Event,c=b.each,d=b.util.Dispatcher,u;b.create('tinymce.ui.NativeListBox:tinymce.ui.ListBox',{NativeListBox:function(i,s){this.parent(i,s);this.classPrefix='mceNativeListBox'},setDisabled:function(s){D.get(this.id).disabled=s;this.setAriaProperty('disabled',s)},isDisabled:function(){return D.get(this.id).disabled},select:function(a){var t=this,e,f;if(a==u)return t.selectByIndex(-1);if(a&&typeof(a)=="function")f=a;else{f=function(v){return v==a}}if(a!=t.selectedValue){c(t.items,function(o,i){if(f(o.value)){e=1;t.selectByIndex(i);return false}});if(!e)t.selectByIndex(-1)}},selectByIndex:function(i){D.get(this.id).selectedIndex=i+1;this.selectedValue=this.items[i]?this.items[i].value:null},add:function(n,v,a){var o,t=this;a=a||{};a.value=v;if(t.isRendered())D.add(D.get(this.id),'option',a,n);o={title:n,value:v,attribs:a};t.items.push(o);t.onAdd.dispatch(t,o)},getLength:function(){return this.items.length},renderHTML:function(){var h,t=this;h=D.createHTML('option',{value:''},'-- '+t.settings.title+' --');c(t.items,function(i){h+=D.createHTML('option',{value:i.value},i.title)});h=D.createHTML('select',{id:t.id,'class':'mceNativeListBox','aria-labelledby':t.id+'_aria'},h);h+=D.createHTML('span',{id:t.id+'_aria','style':'display: none'},t.settings.title);return h},postRender:function(){var t=this,a,f=true;t.rendered=true;function o(e){var v=t.items[e.target.selectedIndex-1];if(v&&(v=v.value)){t.onChange.dispatch(t,v);if(t.settings.onselect)t.settings.onselect(v)}};E.add(t.id,'change',o);E.add(t.id,'keydown',function(e){var g;E.remove(t.id,'change',a);f=false;g=E.add(t.id,'blur',function(){if(f)return;f=true;E.add(t.id,'change',o);E.remove(t.id,'blur',g)});if(b.isWebKit&&(e.keyCode==37||e.keyCode==39)){return E.prevent(e)}if(e.keyCode==13||e.keyCode==32){o(e);return E.cancel(e)}});t.onPostRender.dispatch(t,D.get(t.id))}})})(tinymce);(function(a){var D=a.DOM,E=a.dom.Event,b=a.each;a.create('tinymce.ui.MenuButton:tinymce.ui.Button',{MenuButton:function(i,s,e){this.parent(i,s,e);this.onRenderMenu=new a.util.Dispatcher(this);s.menu_container=s.menu_container||D.doc.body},showMenu:function(){var t=this,p,c,e=D.get(t.id),m;if(t.isDisabled())return;if(!t.isMenuRendered){t.renderMenu();t.isMenuRendered=true}if(t.isMenuVisible)return t.hideMenu();p=D.getPos(t.settings.menu_container);c=D.getPos(e);m=t.menu;m.settings.offset_x=c.x;m.settings.offset_y=c.y;m.settings.vp_offset_x=c.x;m.settings.vp_offset_y=c.y;m.settings.keyboard_focus=t._focused;m.showMenu(0,e.firstChild.clientHeight);E.add(D.doc,'mousedown',t.hideMenu,t);t.setState('Selected',1);t.isMenuVisible=1},renderMenu:function(){var t=this,m;m=t.settings.control_manager.createDropMenu(t.id+'_menu',{menu_line:1,'class':this.classPrefix+'Menu',icons:t.settings.icons});m.onHideMenu.add(function(){t.hideMenu();t.focus()});t.onRenderMenu.dispatch(t,m);t.menu=m},hideMenu:function(e){var t=this;if(e&&e.type=="mousedown"&&D.getParent(e.target,function(e){return e.id===t.id||e.id===t.id+'_open'}))return;if(!e||!D.getParent(e.target,'.mceMenu')){t.setState('Selected',0);E.remove(D.doc,'mousedown',t.hideMenu,t);if(t.menu)t.menu.hideMenu()}t.isMenuVisible=0},postRender:function(){var t=this,s=t.settings;E.add(t.id,'click',function(){if(!t.isDisabled()){if(s.onclick)s.onclick(t.value);t.showMenu()}})}})})(tinymce);(function(a){var D=a.DOM,E=a.dom.Event,e=a.each;a.create('tinymce.ui.SplitButton:tinymce.ui.MenuButton',{SplitButton:function(i,s,b){this.parent(i,s,b);this.classPrefix='mceSplitButton'},renderHTML:function(){var h,t=this,s=t.settings,b;h='<tbody><tr>';if(s.image)b=D.createHTML('img ',{src:s.image,role:'presentation','class':'mceAction '+s['class']});else b=D.createHTML('span',{'class':'mceAction '+s['class']},'');b+=D.createHTML('span',{'class':'mceVoiceLabel mceIconOnly',id:t.id+'_voice',style:'display:none;'},s.title);h+='<td >'+D.createHTML('a',{role:'button',id:t.id+'_action',tabindex:'-1',href:'javascript:;','class':'mceAction '+s['class'],onclick:"return false;",onmousedown:'return false;',title:s.title},b)+'</td>';b=D.createHTML('span',{'class':'mceOpen '+s['class']},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');h+='<td >'+D.createHTML('a',{role:'button',id:t.id+'_open',tabindex:'-1',href:'javascript:;','class':'mceOpen '+s['class'],onclick:"return false;",onmousedown:'return false;',title:s.title},b)+'</td>';h+='</tr></tbody>';h=D.createHTML('table',{role:'presentation','class':'mceSplitButton mceSplitButtonEnabled '+s['class'],cellpadding:'0',cellspacing:'0',title:s.title},h);return D.createHTML('div',{id:t.id,role:'button',tabindex:'0','aria-labelledby':t.id+'_voice','aria-haspopup':'true'},h)},postRender:function(){var t=this,s=t.settings,b;if(s.onclick){b=function(c){if(!t.isDisabled()){s.onclick(t.value);E.cancel(c)}};E.add(t.id+'_action','click',b);E.add(t.id,['click','keydown'],function(c){var d=32,f=14,g=13,h=38,i=40;if((c.keyCode===32||c.keyCode===13||c.keyCode===14)&&!c.altKey&&!c.ctrlKey&&!c.metaKey){b();E.cancel(c)}else if(c.type==='click'||c.keyCode===i){t.showMenu();E.cancel(c)}})}E.add(t.id+'_open','click',function(c){t.showMenu();E.cancel(c)});E.add([t.id,t.id+'_open'],'focus',function(){t._focused=1});E.add([t.id,t.id+'_open'],'blur',function(){t._focused=0});if(a.isIE6||!D.boxModel){E.add(t.id,'mouseover',function(){if(!D.hasClass(t.id,'mceSplitButtonDisabled'))D.addClass(t.id,'mceSplitButtonHover')});E.add(t.id,'mouseout',function(){if(!D.hasClass(t.id,'mceSplitButtonDisabled'))D.removeClass(t.id,'mceSplitButtonHover')})}},destroy:function(){this.parent();E.clear(this.id+'_action');E.clear(this.id+'_open');E.clear(this.id)}})})(tinymce);(function(a){var D=a.DOM,E=a.dom.Event,b=a.is,d=a.each;a.create('tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton',{ColorSplitButton:function(i,s,e){var t=this;t.parent(i,s,e);t.settings=s=a.extend({colors:'000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF',grid_width:8,default_color:'#888888'},t.settings);t.onShowMenu=new a.util.Dispatcher(t);t.onHideMenu=new a.util.Dispatcher(t);t.value=s.default_color},showMenu:function(){var t=this,r,p,e,c;if(t.isDisabled())return;if(!t.isMenuRendered){t.renderMenu();t.isMenuRendered=true}if(t.isMenuVisible)return t.hideMenu();e=D.get(t.id);D.show(t.id+'_menu');D.addClass(e,'mceSplitButtonSelected');c=D.getPos(e);D.setStyles(t.id+'_menu',{left:c.x,top:c.y+e.firstChild.clientHeight,zIndex:200000});e=0;E.add(D.doc,'mousedown',t.hideMenu,t);t.onShowMenu.dispatch(t);if(t._focused){t._keyHandler=E.add(t.id+'_menu','keydown',function(e){if(e.keyCode==27)t.hideMenu()});D.select('a',t.id+'_menu')[0].focus()}t.keyboardNav=new a.ui.KeyboardNavigation({root:t.id+'_menu',items:D.select('a',t.id+'_menu'),onCancel:function(){t.hideMenu();t.focus()}});t.keyboardNav.focus();t.isMenuVisible=1},hideMenu:function(e){var t=this;if(t.isMenuVisible){if(e&&e.type=="mousedown"&&D.getParent(e.target,function(e){return e.id===t.id+'_open'}))return;if(!e||!D.getParent(e.target,'.mceSplitButtonMenu')){D.removeClass(t.id,'mceSplitButtonSelected');E.remove(D.doc,'mousedown',t.hideMenu,t);E.remove(t.id+'_menu','keydown',t._keyHandler);D.hide(t.id+'_menu')}t.isMenuVisible=0;t.onHideMenu.dispatch();t.keyboardNav.destroy()}},renderMenu:function(){var t=this,m,i=0,s=t.settings,n,f,g,w,h;w=D.add(s.menu_container,'div',{role:'listbox',id:t.id+'_menu','class':s.menu_class+' '+s['class'],style:'position:absolute;left:0;top:-1000px;'});m=D.add(w,'div',{'class':s['class']+' mceSplitButtonMenu'});D.add(m,'span',{'class':'mceMenuLine'});n=D.add(m,'table',{role:'presentation','class':'mceColorSplitMenu'});f=D.add(n,'tbody');i=0;d(b(s.colors,'array')?s.colors:s.colors.split(','),function(c){c=c.replace(/^#/,'');if(!i--){g=D.add(f,'tr');i=s.grid_width-1}n=D.add(g,'td');var e={href:'javascript:;',style:{backgroundColor:'#'+c},'title':t.editor.getLang('colors.'+c,c),'data-mce-color':'#'+c};if(!a.isIE){e.role='option'}n=D.add(n,'a',e);if(t.editor.forcedHighContrastMode){n=D.add(n,'canvas',{width:16,height:16,'aria-hidden':'true'});if(n.getContext&&(h=n.getContext("2d"))){h.fillStyle='#'+c;h.fillRect(0,0,16,16)}else{D.remove(n)}}});if(s.more_colors_func){n=D.add(f,'tr');n=D.add(n,'td',{colspan:s.grid_width,'class':'mceMoreColors'});n=D.add(n,'a',{role:'option',id:t.id+'_more',href:'javascript:;',onclick:'return false;','class':'mceMoreColors'},s.more_colors_title);E.add(n,'click',function(e){s.more_colors_func.call(s.more_colors_scope||this);return E.cancel(e)})}D.addClass(m,'mceColorSplitMenu');E.add(t.id+'_menu','mousedown',function(e){return E.cancel(e)});E.add(t.id+'_menu','click',function(e){var c;e=D.getParent(e.target,'a',f);if(e&&e.nodeName.toLowerCase()=='a'&&(c=e.getAttribute('data-mce-color')))t.setColor(c);return false});return w},setColor:function(c){this.displayColor(c);this.hideMenu();this.settings.onselect(c)},displayColor:function(c){var t=this;D.setStyle(t.id+'_preview','backgroundColor',c);t.value=c},postRender:function(){var t=this,i=t.id;t.parent();D.add(i+'_action','div',{id:i+'_preview','class':'mceColorPreview'});D.setStyle(t.id+'_preview','backgroundColor',t.value)},destroy:function(){var s=this;s.parent();E.clear(s.id+'_menu');E.clear(s.id+'_more');D.remove(s.id+'_menu');if(s.keyboardNav){s.keyboardNav.destroy()}}})})(tinymce);(function(a){var d=a.DOM,e=a.each,E=a.dom.Event;a.create('tinymce.ui.ToolbarGroup:tinymce.ui.Container',{renderHTML:function(){var t=this,h=[],c=t.controls,e=a.each,s=t.settings;h.push('<div id="'+t.id+'" role="group" aria-labelledby="'+t.id+'_voice">');h.push("<span role='application'>");h.push('<span id="'+t.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(s.name)+'</span>');e(c,function(b){h.push(b.renderHTML())});h.push("</span>");h.push('</div>');return h.join('')},focus:function(){var t=this;d.get(t.id).focus()},postRender:function(){var t=this,i=[];e(t.controls,function(b){e(b.controls,function(c){if(c.id){i.push(c)}})});t.keyNav=new a.ui.KeyboardNavigation({root:t.id,items:i,onCancel:function(){if(a.isWebKit){d.get(t.editor.id+"_ifr").focus()}t.editor.focus()},excludeFromTabOrder:!t.settings.tab_focus_toolbar})},destroy:function(){var s=this;s.parent();s.keyNav.destroy();E.clear(s.id)}})})(tinymce);(function(a){var d=a.DOM,e=a.each;a.create('tinymce.ui.Toolbar:tinymce.ui.Container',{renderHTML:function(){var t=this,h='',c,b,s=t.settings,i,p,n,f;f=t.controls;for(i=0;i<f.length;i++){b=f[i];p=f[i-1];n=f[i+1];if(i===0){c='mceToolbarStart';if(b.Button)c+=' mceToolbarStartButton';else if(b.SplitButton)c+=' mceToolbarStartSplitButton';else if(b.ListBox)c+=' mceToolbarStartListBox';h+=d.createHTML('td',{'class':c},d.createHTML('span',null,'<!-- IE -->'))}if(p&&b.ListBox){if(p.Button||p.SplitButton)h+=d.createHTML('td',{'class':'mceToolbarEnd'},d.createHTML('span',null,'<!-- IE -->'))}if(d.stdMode)h+='<td style="position: relative">'+b.renderHTML()+'</td>';else h+='<td>'+b.renderHTML()+'</td>';if(n&&b.ListBox){if(n.Button||n.SplitButton)h+=d.createHTML('td',{'class':'mceToolbarStart'},d.createHTML('span',null,'<!-- IE -->'))}}c='mceToolbarEnd';if(b.Button)c+=' mceToolbarEndButton';else if(b.SplitButton)c+=' mceToolbarEndSplitButton';else if(b.ListBox)c+=' mceToolbarEndListBox';h+=d.createHTML('td',{'class':c},d.createHTML('span',null,'<!-- IE -->'));return d.createHTML('table',{id:t.id,'class':'mceToolbar'+(s['class']?' '+s['class']:''),cellpadding:'0',cellspacing:'0',align:t.settings.align||'',role:'presentation',tabindex:'-1'},'<tbody><tr>'+h+'</tr></tbody>')}})})(tinymce);(function(a){var D=a.util.Dispatcher,e=a.each;a.create('tinymce.AddOnManager',{AddOnManager:function(){var s=this;s.items=[];s.urls={};s.lookup={};s.onAdd=new D(s)},get:function(n){if(this.lookup[n]){return this.lookup[n].instance}else{return undefined}},dependencies:function(n){var r;if(this.lookup[n]){r=this.lookup[n].dependencies}return r||[]},requireLangPack:function(n){var s=a.settings;if(s&&s.language&&s.language_load!==false)a.ScriptLoader.add(this.urls[n]+'/langs/'+s.language+'.js')},add:function(i,o,d){this.items.push(o);this.lookup[i]={instance:o,dependencies:d};this.onAdd.dispatch(this,i,o);return o},createUrl:function(b,d){if(typeof d==="object"){return d}else{return{prefix:b.prefix,resource:d,suffix:b.suffix}}},addComponents:function(p,s){var b=this.urls[p];a.each(s,function(c){a.ScriptLoader.add(b+"/"+c)})},load:function(n,u,c,s){var t=this,b=u;function l(){var d=t.dependencies(n);a.each(d,function(f){var g=t.createUrl(u,f);t.load(g.resource,g,undefined,undefined)});if(c){if(s){c.call(s)}else{c.call(a.ScriptLoader)}}}if(t.urls[n])return;if(typeof u==="object")b=u.prefix+u.resource+u.suffix;if(b.indexOf('/')!==0&&b.indexOf('://')==-1)b=a.baseURL+'/'+b;t.urls[n]=b.substring(0,b.lastIndexOf('/'));if(t.lookup[n]){l()}else{a.ScriptLoader.add(b,l,s)}}});a.PluginManager=new a.AddOnManager();a.ThemeManager=new a.AddOnManager()}(tinymce));(function(a){var b=a.each,d=a.extend,D=a.DOM,E=a.dom.Event,T=a.ThemeManager,P=a.PluginManager,h=a.explode,j=a.util.Dispatcher,m,q=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,'').replace(/[\/\\][^\/]+$/,'');if(!/[\/\\]$/.test(a.documentBaseURL))a.documentBaseURL+='/';a.baseURL=new a.util.URI(a.documentBaseURL).toAbsolute(a.baseURL);a.baseURI=new a.util.URI(a.baseURL);a.onBeforeUnload=new j(a);E.add(window,'beforeunload',function(e){a.onBeforeUnload.dispatch(a,e)});a.onAddEditor=new j(a);a.onRemoveEditor=new j(a);a.EditorManager=d(a,{editors:[],i18n:{},activeEditor:null,init:function(s){var t=this,p,g=a.ScriptLoader,e,i=[],k;function o(c){var f=c.id;if(!f){f=c.name;if(f&&!D.get(f)){f=c.name}else{f=D.uniqueId()}c.setAttribute('id',f)}return f};function r(c,n,s){var f=c[n];if(!f)return;if(a.is(f,'string')){s=f.replace(/\.\w+$/,'');s=s?a.resolve(s):0;f=a.resolve(f)}return f.apply(s||this,Array.prototype.slice.call(arguments,2))};function u(n,c){return c.constructor===RegExp?c.test(n.className):D.hasClass(n,c)};t.settings=s;E.bind(window,'ready',function(){var l,c;r(s,'onpageload');switch(s.mode){case"exact":l=s.elements||'';if(l.length>0){b(h(l),function(v){if(D.get(v)){k=new a.Editor(v,s);i.push(k);k.render(1)}else{b(document.forms,function(f){b(f.elements,function(e){if(e.name===v){v='mce_editor_'+q++;D.setAttrib(e,'id',v);k=new a.Editor(v,s);i.push(k);k.render(1)}})})}})}break;case"textareas":case"specific_textareas":b(D.select('textarea'),function(f){if(s.editor_deselector&&u(f,s.editor_deselector))return;if(!s.editor_selector||u(f,s.editor_selector)){k=new a.Editor(o(f),s);i.push(k);k.render(1)}});break;default:if(s.types){b(s.types,function(f){b(D.select(f.selector),function(n){var v=new a.Editor(o(n),a.extend({},s,f));i.push(v);v.render(1)})})}else if(s.selector){b(D.select(s.selector),function(f){var n=new a.Editor(o(f),s);i.push(n);n.render(1)})}}if(s.oninit){l=c=0;b(i,function(k){c++;if(!k.initialized){k.onInit.add(function(){l++;if(l==c)r(s,'oninit')})}else l++;if(l==c)r(s,'oninit')})}})},get:function(i){if(i===m)return this.editors;if(!this.editors.hasOwnProperty(i))return m;return this.editors[i]},getInstanceById:function(i){return this.get(i)},add:function(e){var s=this,c=s.editors;c[e.id]=e;c.push(e);s._setActive(e);s.onAddEditor.dispatch(s,e);if(a.adapter)a.adapter.patchEditor(e);return e},remove:function(e){var t=this,i,c=t.editors;if(!c[e.id])return null;delete c[e.id];for(i=0;i<c.length;i++){if(c[i]==e){c.splice(i,1);break}}if(t.activeEditor==e)t._setActive(c[0]);e.destroy();t.onRemoveEditor.dispatch(t,e);return e},execCommand:function(c,u,v){var t=this,e=t.get(v),w;function f(){e.destroy();w.detachEvent('onunload',f);w=w.tinyMCE=w.tinymce=null};switch(c){case"mceFocus":e.focus();return true;case"mceAddEditor":case"mceAddControl":if(!t.get(v))new a.Editor(v,t.settings).render();return true;case"mceAddFrameControl":w=v.window;w.tinyMCE=tinyMCE;w.tinymce=a;a.DOM.doc=w.document;a.DOM.win=w;e=new a.Editor(v.element_id,v);e.render();if(a.isIE){w.attachEvent('onunload',f)}v.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(e)e.remove();return true;case'mceToggleEditor':if(!e){t.execCommand('mceAddControl',0,v);return true}if(e.isHidden())e.show();else e.hide();return true}if(t.activeEditor)return t.activeEditor.execCommand(c,u,v);return false},execInstanceCommand:function(i,c,u,v){var e=this.get(i);if(e)return e.execCommand(c,u,v);return false},triggerSave:function(){b(this.editors,function(e){e.save()})},addI18n:function(p,o){var l,i=this.i18n;if(!a.is(p,'string')){b(p,function(o,c){b(o,function(o,g){b(o,function(o,k){if(g==='common')i[c+'.'+k]=o;else i[c+'.'+g+'.'+k]=o})})})}else{b(o,function(o,k){i[p+'.'+k]=o})}},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})})(tinymce);(function(d){var D=d.DOM,E=d.dom.Event,g=d.extend,j=d.each,k=d.isGecko,l=d.isIE,m=d.isWebKit,q=d.is,T=d.ThemeManager,P=d.PluginManager,r=d.explode;d.create('tinymce.Editor',{Editor:function(i,s){var a=this,b=true;a.settings=s=g({id:i,language:'en',theme:'advanced',skin:'default',delta_width:0,delta_height:0,popup_css:'',plugins:'',document_base_url:d.documentBaseURL,add_form_submit_trigger:b,submit_patch:b,add_unload_trigger:b,convert_urls:b,relative_urls:b,remove_script_host:b,table_inline_editing:false,object_resizing:b,accessibility_focus:b,doctype:d.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':'<!DOCTYPE>',visual:b,font_size_style_values:'xx-small,x-small,small,medium,large,x-large,xx-large',font_size_legacy_values:'xx-small,small,medium,large,x-large,xx-large,300%',apply_source_formatting:b,directionality:'ltr',forced_root_block:'p',hidden_input:b,padd_empty_editor:b,render_ui:b,indentation:'30px',fix_table_elements:b,inline_styles:b,convert_fonts_to_spans:b,indent:'simple',indent_before:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist',indent_after:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist',validate:b,entity_encoding:'named',url_converter:a.convertURL,url_converter_scope:a,ie7_compat:b},s);a.id=a.editorId=i;a.isNotDirty=false;a.plugins={};a.documentBaseURI=new d.util.URI(s.document_base_url||d.documentBaseURL,{base_uri:tinyMCE.baseURI});a.baseURI=d.baseURI;a.contentCSS=[];a.contentStyles=[];a.setupEvents();a.execCommands={};a.queryStateCommands={};a.queryValueCommands={};a.execCallback('setup',a)},render:function(a){var t=this,s=t.settings,i=t.id,b=d.ScriptLoader;if(!E.domLoaded){E.add(window,'ready',function(){t.render()});return}tinyMCE.settings=s;if(!t.getElement())return;if(d.isIDevice&&!d.isIOS5)return;if(!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&s.hidden_input&&D.getParent(i,'form'))D.insertAfter(D.create('input',{type:'hidden',name:i}),i);if(!s.content_editable){t.orgVisibility=t.getElement().style.visibility;t.getElement().style.visibility='hidden'}if(d.WindowManager)t.windowManager=new d.WindowManager(t);if(s.encoding=='xml'){t.onGetContent.add(function(e,o){if(o.save)o.content=D.encode(o.content)})}if(s.add_form_submit_trigger){t.onSubmit.addToTop(function(){if(t.initialized){t.save();t.isNotDirty=1}})}if(s.add_unload_trigger){t._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(t.initialized&&!t.destroyed&&!t.isHidden())t.save({format:'raw',no_events:true})})}d.addUnload(t.destroy,t);if(s.submit_patch){t.onBeforeRenderUI.add(function(){var n=t.getElement().form;if(!n)return;if(n._mceOldSubmit)return;if(!n.submit.nodeType&&!n.submit.length){t.formElement=n;n._mceOldSubmit=n.submit;n.submit=function(){d.triggerSave();t.isNotDirty=1;return t.formElement._mceOldSubmit(t.formElement)}}n=null})}function c(){if(s.language&&s.language_load!==false)b.add(d.baseURL+'/langs/'+s.language+'.js');if(s.theme&&typeof s.theme!="function"&&s.theme.charAt(0)!='-'&&!T.urls[s.theme])T.load(s.theme,'themes/'+s.theme+'/editor_template'+d.suffix+'.js');j(r(s.plugins),function(p){if(p&&!P.urls[p]){if(p.charAt(0)=='-'){p=p.substr(1,p.length);var e=P.dependencies(p);j(e,function(f){var h={prefix:'plugins/',resource:f,suffix:'/editor_plugin'+d.suffix+'.js'};f=P.createUrl(h,f);P.load(f.resource,f)})}else{if(p=='safari'){return}P.load(p,{prefix:'plugins/',resource:p,suffix:'/editor_plugin'+d.suffix+'.js'})}}});b.loadQueue(function(){if(!t.removed)t.init()})};c()},init:function(){var n,t=this,s=t.settings,w,h,a,e=t.getElement(),o,b,u,f,v,x,i,y=[];d.add(t);s.aria_label=s.aria_label||D.getAttrib(e,'aria-label',t.getLang('aria.rich_text_area'));if(s.theme){if(typeof s.theme!="function"){s.theme=s.theme.replace(/-/,'');o=T.get(s.theme);t.theme=new o();if(t.theme.init)t.theme.init(t,T.urls[s.theme]||d.documentBaseURL.replace(/\/$/,''))}else{t.theme=s.theme}}function z(p){var c=P.get(p),u=P.urls[p]||d.documentBaseURL.replace(/\/$/,''),A;if(c&&d.inArray(y,p)===-1){j(P.dependencies(p),function(B){z(B)});A=new c(t,u);t.plugins[p]=A;if(A.init){A.init(t,u);y.push(p)}}}j(r(s.plugins.replace(/\-/g,'')),z);if(s.popup_css!==false){if(s.popup_css)s.popup_css=t.documentBaseURI.toAbsolute(s.popup_css);else s.popup_css=t.baseURI.toAbsolute("themes/"+s.theme+"/skins/"+s.skin+"/dialog.css")}if(s.popup_css_add)s.popup_css+=','+t.documentBaseURI.toAbsolute(s.popup_css_add);t.controlManager=new d.ControlManager(t);t.onBeforeRenderUI.dispatch(t,t.controlManager);if(s.render_ui&&t.theme){t.orgDisplay=e.style.display;if(typeof s.theme!="function"){w=s.width||e.style.width||e.offsetWidth;h=s.height||e.style.height||e.offsetHeight;a=s.min_height||100;x=/^[0-9\.]+(|px)$/i;if(x.test(''+w))w=Math.max(parseInt(w,10)+(o.deltaWidth||0),100);if(x.test(''+h))h=Math.max(parseInt(h,10)+(o.deltaHeight||0),a);o=t.theme.renderUI({targetNode:e,width:w,height:h,deltaWidth:s.delta_width,deltaHeight:s.delta_height});D.setStyles(o.sizeContainer||o.editorContainer,{width:w,height:h});h=(o.iframeHeight||h)+(typeof(h)=='number'?(o.deltaHeight||0):'');if(h<a)h=a}else{o=s.theme(t,e);if(o.editorContainer.nodeType){o.editorContainer=o.editorContainer.id=o.editorContainer.id||t.id+"_parent"}if(o.iframeContainer.nodeType){o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||t.id+"_iframecontainer"}h=o.iframeHeight||e.offsetHeight;if(l){t.onInit.add(function(c){c.dom.bind(c.getBody(),'beforedeactivate keydown',function(){c.lastIERng=c.selection.getRng()})})}}t.editorContainer=o.editorContainer}if(s.content_css){j(r(s.content_css),function(u){t.contentCSS.push(t.documentBaseURI.toAbsolute(u))})}if(s.content_style){t.contentStyles.push(s.content_style)}if(s.content_editable){e=n=o=null;return t.initContentBody()}if(document.domain&&location.hostname!=document.domain)d.relaxedDomain=document.domain;t.iframeHTML=s.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(s.document_base_url!=d.documentBaseURL)t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />';if(d.isIE8){if(s.ie7_compat)t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />';else t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(i=0;i<t.contentCSS.length;i++){t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+t.contentCSS[i]+'" />'}t.contentCSS=[];f=s.body_id||'tinymce';if(f.indexOf('=')!=-1){f=t.getParam('body_id','','hash');f=f[t.id]||f}v=s.body_class||'';if(v.indexOf('=')!=-1){v=t.getParam('body_class','','hash');v=v[t.id]||''}t.iframeHTML+='</head><body id="'+f+'" class="mceContentBody '+v+'" onload="window.parent.tinyMCE.get(\''+t.id+'\').onLoad.dispatch();"><br></body></html>';if(d.relaxedDomain&&(l||(d.isOpera&&parseFloat(opera.version())<11))){u='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'}n=D.add(o.iframeContainer,'iframe',{id:t.id+"_ifr",src:u||'javascript:""',frameBorder:'0',allowTransparency:"true",title:s.aria_label,style:{width:'100%',height:h,display:'block'}});t.contentAreaContainer=o.iframeContainer;if(o.editorContainer){D.get(o.editorContainer).style.display=t.orgDisplay}e.style.visibility=t.orgVisibility;D.get(t.id).style.display='none';D.setAttrib(t.id,'aria-hidden',true);if(!d.relaxedDomain||!u)t.initContentBody();e=n=o=null},initContentBody:function(){var s=this,a=s.settings,t=D.get(s.id),b=s.getDoc(),h,c,e;if((!l||!d.relaxedDomain)&&!a.content_editable){b.open();b.write(s.iframeHTML);b.close();if(d.relaxedDomain)b.domain=d.relaxedDomain}if(a.content_editable){D.addClass(t,'mceContentBody');s.contentDocument=b=a.content_document||document;s.contentWindow=a.content_window||window;s.bodyElement=t;a.content_document=a.content_window=null}c=s.getBody();c.disabled=true;if(!a.readonly)c.contentEditable=s.getParam('content_editable_state',true);c.disabled=false;s.schema=new d.html.Schema(a);s.dom=new d.dom.DOMUtils(b,{keep_values:true,url_converter:s.convertURL,url_converter_scope:s,hex_colors:a.force_hex_style_colors,class_filter:a.class_filter,update_styles:true,root_element:a.content_editable?s.id:null,schema:s.schema});s.parser=new d.html.DomParser(a,s.schema);s.parser.addAttributeFilter('src,href,style',function(n,f){var i=n.length,o,p=s.dom,v,u;while(i--){o=n[i];v=o.attr(f);u='data-mce-'+f;if(!o.attributes.map[u]){if(f==="style")o.attr(u,p.serializeStyle(p.parseStyle(v),o.name));else o.attr(u,s.convertURL(v,f,o.name))}}});s.parser.addNodeFilter('script',function(n,f){var i=n.length,o;while(i--){o=n[i];o.attr('type','mce-'+(o.attr('type')||'text/javascript'))}});s.parser.addNodeFilter('#cdata',function(n,f){var i=n.length,o;while(i--){o=n[i];o.type=8;o.name='#comment';o.value='[CDATA['+o.value+']]'}});s.parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div',function(n,f){var i=n.length,o,p=s.schema.getNonEmptyElements();while(i--){o=n[i];if(o.isEmpty(p))o.empty().append(new d.html.Node('br',1)).shortEnded=true}});s.serializer=new d.dom.Serializer(a,s.dom,s.schema);s.selection=new d.dom.Selection(s.dom,s.getWin(),s.serializer,s);s.formatter=new d.Formatter(s);s.undoManager=new d.UndoManager(s);s.forceBlocks=new d.ForceBlocks(s);s.enterKey=new d.EnterKey(s);s.editorCommands=new d.EditorCommands(s);s.onExecCommand.add(function(f,i){if(!/^(FontName|FontSize)$/.test(i))s.nodeChanged()});s.serializer.onPreProcess.add(function(f,o){return s.onPreProcess.dispatch(s,o,f)});s.serializer.onPostProcess.add(function(f,o){return s.onPostProcess.dispatch(s,o,f)});s.onPreInit.dispatch(s);if(!a.browser_spellcheck&&!a.gecko_spellcheck)b.body.spellcheck=false;if(!a.readonly){s.bindNativeEvents()}s.controlManager.onPostRender.dispatch(s,s.controlManager);s.onPostRender.dispatch(s);s.quirks=d.util.Quirks(s);if(a.directionality)c.dir=a.directionality;if(a.nowrap)c.style.whiteSpace="nowrap";if(a.protect){s.onBeforeSetContent.add(function(f,o){j(a.protect,function(p){o.content=o.content.replace(p,function(i){return'<!--mce:protected '+escape(i)+'-->'})})})}s.onSetContent.add(function(){s.addVisual(s.getBody())});if(a.padd_empty_editor){s.onPostProcess.add(function(f,o){o.content=o.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,'')})}s.load({initial:true,format:'html'});s.startContent=s.getContent({format:'raw'});s.initialized=true;s.onInit.dispatch(s);s.execCallback('setupcontent_callback',s.id,c,b);s.execCallback('init_instance_callback',s);s.focus(true);s.nodeChanged({initial:true});if(s.contentStyles.length>0){e='';j(s.contentStyles,function(f){e+=f+"\r\n"});s.dom.addStyle(e)}j(s.contentCSS,function(u){s.dom.loadCSS(u)});if(a.auto_focus){setTimeout(function(){var f=d.get(a.auto_focus);f.selection.select(f.getBody(),1);f.selection.collapse(1);f.getBody().focus();f.getWin().focus()},100)}t=b=c=null},focus:function(s){var o,a=this,b=a.selection,c=a.settings.content_editable,i,e,f=a.getDoc(),h;if(!s){if(a.lastIERng){b.setRng(a.lastIERng)}i=b.getRng();if(i.item){e=i.item(0)}a._refreshContentEditable();if(!c){a.getWin().focus()}if(d.isGecko||c){h=a.getBody();if(h.setActive){h.setActive()}else{h.focus()}if(c){b.normalize()}}if(e&&e.ownerDocument==f){i=f.body.createControlRange();i.addElement(e);i.select()}}if(d.activeEditor!=a){if((o=d.activeEditor)!=null)o.onDeactivate.dispatch(o,a);a.onActivate.dispatch(a,o)}d._setActive(a)},execCallback:function(n){var t=this,f=t.settings[n],s;if(!f)return;if(t.callbackLookup&&(s=t.callbackLookup[n])){f=s.func;s=s.scope}if(q(f,'string')){s=f.replace(/\.\w+$/,'');s=s?d.resolve(s):0;f=d.resolve(f);t.callbackLookup=t.callbackLookup||{};t.callbackLookup[n]={func:f,scope:s}}return f.apply(s||t,Array.prototype.slice.call(arguments,1))},translate:function(s){var c=this.settings.language||'en',i=d.i18n;if(!s)return'';return i[c+'.'+s]||s.replace(/\{\#([^\}]+)\}/g,function(a,b){return i[c+'.'+b]||'{#'+b+'}'})},getLang:function(n,a){return d.i18n[(this.settings.language||'en')+'.'+n]||(q(a)?a:'{#'+n+'}')},getParam:function(n,a,t){var b=d.trim,v=q(this.settings[n])?this.settings[n]:a,o;if(t==='hash'){o={};if(q(v,'string')){j(v.indexOf('=')>0?v.split(/[;,](?![^=;,]*(?:[;,]|$))/):v.split(','),function(v){v=v.split('=');if(v.length>1)o[b(v[0])]=b(v[1]);else o[b(v[0])]=b(v)})}else o=v;return o}return v},nodeChanged:function(o){var s=this,a=s.selection,n;if(s.initialized){o=o||{};n=a.getStart()||s.getBody();n=l&&n.ownerDocument!=s.getDoc()?s.getBody():n;o.parents=[];s.dom.getParent(n,function(n){if(n.nodeName=='BODY')return true;o.parents.push(n)});s.onNodeChange.dispatch(s,o?o.controlManager||s.controlManager:s.controlManager,n,a.isCollapsed(),o)}},addButton:function(n,s){var a=this;a.buttons=a.buttons||{};a.buttons[n]=s},addCommand:function(n,c,s){this.execCommands[n]={func:c,scope:s||this}},addQueryStateHandler:function(n,c,s){this.queryStateCommands[n]={func:c,scope:s||this}},addQueryValueHandler:function(n,c,s){this.queryValueCommands[n]={func:c,scope:s||this}},addShortcut:function(p,a,b,s){var t=this,c;if(t.settings.custom_shortcuts===false)return false;t.shortcuts=t.shortcuts||{};if(q(b,'string')){c=b;b=function(){t.execCommand(c,false,null)}}if(q(b,'object')){c=b;b=function(){t.execCommand(c[0],c[1],c[2])}}j(r(p),function(p){var o={func:b,scope:s||this,desc:t.translate(a),alt:false,ctrl:false,shift:false};j(r(p,'+'),function(v){switch(v){case'alt':case'ctrl':case'shift':o[v]=true;break;default:o.charCode=v.charCodeAt(0);o.keyCode=v.toUpperCase().charCodeAt(0)}});t.shortcuts[(o.ctrl?'ctrl':'')+','+(o.alt?'alt':'')+','+(o.shift?'shift':'')+','+o.keyCode]=o});return true},execCommand:function(c,u,v,a){var t=this,s=0,o,b;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(c)&&(!a||!a.skip_focus))t.focus();a=g({},a);t.onBeforeExecCommand.dispatch(t,c,u,v,a);if(a.terminate)return false;if(t.execCallback('execcommand_callback',t.id,t.selection.getNode(),c,u,v)){t.onExecCommand.dispatch(t,c,u,v,a);return true}if(o=t.execCommands[c]){b=o.func.call(o.scope,u,v);if(b!==true){t.onExecCommand.dispatch(t,c,u,v,a);return b}}j(t.plugins,function(p){if(p.execCommand&&p.execCommand(c,u,v)){t.onExecCommand.dispatch(t,c,u,v,a);s=1;return false}});if(s)return true;if(t.theme&&t.theme.execCommand&&t.theme.execCommand(c,u,v)){t.onExecCommand.dispatch(t,c,u,v,a);return true}if(t.editorCommands.execCommand(c,u,v)){t.onExecCommand.dispatch(t,c,u,v,a);return true}t.getDoc().execCommand(c,u,v);t.onExecCommand.dispatch(t,c,u,v,a)},queryCommandState:function(c){var t=this,o,s;if(t._isHidden())return;if(o=t.queryStateCommands[c]){s=o.func.call(o.scope);if(s!==true)return s}o=t.editorCommands.queryCommandState(c);if(o!==-1)return o;try{return this.getDoc().queryCommandState(c)}catch(e){}},queryCommandValue:function(c){var t=this,o,s;if(t._isHidden())return;if(o=t.queryValueCommands[c]){s=o.func.call(o.scope);if(s!==true)return s}o=t.editorCommands.queryCommandValue(c);if(q(o))return o;try{return this.getDoc().queryCommandValue(c)}catch(e){}},show:function(){var s=this;D.show(s.getContainer());D.hide(s.id);s.load()},hide:function(){var s=this,a=s.getDoc();if(l&&a)a.execCommand('SelectAll');s.save();D.hide(s.getContainer());D.setStyle(s.id,'display',s.orgDisplay)},isHidden:function(){return!D.isHidden(this.id)},setProgressState:function(b,t,o){this.onSetProgressState.dispatch(this,b,t,o);return b},load:function(o){var t=this,e=t.getElement(),h;if(e){o=o||{};o.load=true;h=t.setContent(q(e.value)?e.value:e.innerHTML,o);o.element=e;if(!o.no_events)t.onLoadContent.dispatch(t,o);o.element=e=null;return h}},save:function(o){var t=this,e=t.getElement(),h,f;if(!e||!t.initialized)return;o=o||{};o.save=true;o.element=e;h=o.content=t.getContent(o);if(!o.no_events)t.onSaveContent.dispatch(t,o);h=o.content;if(!/TEXTAREA|INPUT/i.test(e.nodeName)){e.innerHTML=h;if(f=D.getParent(t.id,'form')){j(f.elements,function(e){if(e.name==t.id){e.value=h;return false}})}}else e.value=h;o.element=e=null;return h},setContent:function(c,a){var s=this,b,e=s.getBody(),f;a=a||{};a.format=a.format||'html';a.set=true;a.content=c;if(!a.no_events)s.onBeforeSetContent.dispatch(s,a);c=a.content;if(!d.isIE&&(c.length===0||/^\s+$/.test(c))){f=s.settings.forced_root_block;if(f)c='<'+f+'><br data-mce-bogus="1"></'+f+'>';else c='<br data-mce-bogus="1">';e.innerHTML=c;s.selection.select(e,true);s.selection.collapse(true);return}if(a.format!=='raw'){c=new d.html.Serializer({},s.schema).serialize(s.parser.parse(c))}a.content=d.trim(c);s.dom.setHTML(e,a.content);if(!a.no_events)s.onSetContent.dispatch(s,a);if(!s.settings.content_editable||document.activeElement===s.getBody()){s.selection.normalize()}return a.content},getContent:function(a){var s=this,c,b=s.getBody();a=a||{};a.format=a.format||'html';a.get=true;a.getInner=true;if(!a.no_events)s.onBeforeGetContent.dispatch(s,a);if(a.format=='raw')c=b.innerHTML;else if(a.format=='text')c=b.innerText||b.textContent;else c=s.serializer.serialize(b,a);if(a.format!='text'){a.content=d.trim(c)}else{a.content=c}if(!a.no_events)s.onGetContent.dispatch(s,a);return a.content},isDirty:function(){var s=this;return d.trim(s.startContent)!=d.trim(s.getContent({format:'raw',no_events:1}))&&!s.isNotDirty},getContainer:function(){var s=this;if(!s.container)s.container=D.get(s.editorContainer||s.id+'_parent');return s.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return D.get(this.settings.content_element||this.id)},getWin:function(){var s=this,e;if(!s.contentWindow){e=D.get(s.id+"_ifr");if(e)s.contentWindow=e.contentWindow}return s.contentWindow},getDoc:function(){var s=this,w;if(!s.contentDocument){w=s.getWin();if(w)s.contentDocument=w.document}return s.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(u,n,e){var s=this,a=s.settings;if(a.urlconverter_callback)return s.execCallback('urlconverter_callback',u,e,true,n);if(!a.convert_urls||(e&&e.nodeName=='LINK')||u.indexOf('file:')===0)return u;if(a.relative_urls)return s.documentBaseURI.toRelative(u);u=s.documentBaseURI.toAbsolute(u,a.remove_script_host);return u},addVisual:function(e){var s=this,a=s.settings,b=s.dom,c;e=e||s.getBody();if(!q(s.hasVisual))s.hasVisual=a.visual;j(b.select('table,a',e),function(e){var v;switch(e.nodeName){case'TABLE':c=a.visual_table_class||'mceItemTable';v=b.getAttrib(e,'border');if(!v||v=='0'){if(s.hasVisual)b.addClass(e,c);else b.removeClass(e,c)}return;case'A':if(!b.getAttrib(e,'href',false)){v=b.getAttrib(e,'name')||e.id;c='mceItemAnchor';if(v){if(s.hasVisual)b.addClass(e,c);else b.removeClass(e,c)}}return}});s.onVisualAid.dispatch(s,e,s.hasVisual)},remove:function(){var s=this,e=s.getContainer(),a=s.getDoc();if(!s.removed){s.removed=1;if(l&&a)a.execCommand('SelectAll');s.save();D.setStyle(s.id,'display',s.orgDisplay);if(!s.settings.content_editable){E.unbind(s.getWin());E.unbind(s.getDoc())}E.unbind(s.getBody());E.clear(e);s.execCallback('remove_instance_callback',s);s.onRemove.dispatch(s);s.onExecCommand.listeners=[];d.remove(s);D.remove(e)}},destroy:function(s){var t=this;if(t.destroyed)return;if(k){E.unbind(t.getDoc());E.unbind(t.getWin());E.unbind(t.getBody())}if(!s){d.removeUnload(t.destroy);tinyMCE.onBeforeUnload.remove(t._beforeUnload);if(t.theme&&t.theme.destroy)t.theme.destroy();t.controlManager.destroy();t.selection.destroy();t.dom.destroy()}if(t.formElement){t.formElement.submit=t.formElement._mceOldSubmit;t.formElement._mceOldSubmit=null}t.contentAreaContainer=t.formElement=t.container=t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null;if(t.selection)t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null;t.destroyed=1},_refreshContentEditable:function(){var s=this,b,p;if(s._isHidden()){b=s.getBody();p=b.parentNode;p.removeChild(b);p.appendChild(b);b.focus()}},_isHidden:function(){var s;if(!k)return 0;s=this.selection.getSel();return(!s||!s.rangeCount||s.rangeCount===0)}})})(tinymce);(function(t){var a=t.each;t.Editor.prototype.setupEvents=function(){var s=this,b=s.settings;a(['onPreInit','onBeforeRenderUI','onPostRender','onLoad','onInit','onRemove','onActivate','onDeactivate','onClick','onEvent','onMouseUp','onMouseDown','onDblClick','onKeyDown','onKeyUp','onKeyPress','onContextMenu','onSubmit','onReset','onPaste','onPreProcess','onPostProcess','onBeforeSetContent','onBeforeGetContent','onSetContent','onGetContent','onLoadContent','onSaveContent','onNodeChange','onChange','onBeforeExecCommand','onExecCommand','onUndo','onRedo','onVisualAid','onSetProgressState','onSetAttrib'],function(n){s[n]=new t.util.Dispatcher(s)});if(b.cleanup_callback){s.onBeforeSetContent.add(function(e,o){o.content=e.execCallback('cleanup_callback','insert_to_editor',o.content,o)});s.onPreProcess.add(function(e,o){if(o.set)e.execCallback('cleanup_callback','insert_to_editor_dom',o.node,o);if(o.get)e.execCallback('cleanup_callback','get_from_editor_dom',o.node,o)});s.onPostProcess.add(function(e,o){if(o.set)o.content=e.execCallback('cleanup_callback','insert_to_editor',o.content,o);if(o.get)o.content=e.execCallback('cleanup_callback','get_from_editor',o.content,o)})}if(b.save_callback){s.onGetContent.add(function(e,o){if(o.save)o.content=e.execCallback('save_callback',e.id,o.content,e.getBody())})}if(b.handle_event_callback){s.onEvent.add(function(c,e,o){if(s.execCallback('handle_event_callback',e,c,o)===false){e.preventDefault();e.stopPropagation()}})}if(b.handle_node_change_callback){s.onNodeChange.add(function(e,c,n){e.execCallback('handle_node_change_callback',e.id,n,-1,-1,true,e.selection.isCollapsed())})}if(b.save_callback){s.onSaveContent.add(function(e,o){var h=e.execCallback('save_callback',e.id,o.content,e.getBody());if(h)o.content=h})}if(b.onchange_callback){s.onChange.add(function(e,l){e.execCallback('onchange_callback',e,l)})}};t.Editor.prototype.bindNativeEvents=function(){var s=this,i,b=s.settings,d=s.dom,n;n={mouseup:'onMouseUp',mousedown:'onMouseDown',click:'onClick',keyup:'onKeyUp',keydown:'onKeyDown',keypress:'onKeyPress',submit:'onSubmit',reset:'onReset',contextmenu:'onContextMenu',dblclick:'onDblClick',paste:'onPaste'};function c(e,j){var k=e.type;if(s.removed)return;if(s.onEvent.dispatch(s,e,j)!==false){s[n[e.fakeType||e.type]].dispatch(s,e,j)}};function f(e){s.focus(true)};function g(j,e){if(e.keyCode!=65||!t.VK.metaKeyPressed(e)){s.selection.normalize()}s.nodeChanged()}a(n,function(e,j){var r=b.content_editable?s.getBody():s.getDoc();switch(j){case'contextmenu':d.bind(r,j,c);break;case'paste':d.bind(s.getBody(),j,c);break;case'submit':case'reset':d.bind(s.getElement().form||t.DOM.getParent(s.id,'form'),j,c);break;default:d.bind(r,j,c)}});d.bind(b.content_editable?s.getBody():(t.isGecko?s.getDoc():s.getWin()),'focus',function(e){s.focus(true)});if(b.content_editable&&t.isOpera){d.bind(s.getBody(),'click',f);d.bind(s.getBody(),'keydown',f)}s.onMouseUp.add(g);s.onKeyUp.add(function(j,e){var k=e.keyCode;if((k>=33&&k<=36)||(k>=37&&k<=40)||k==13||k==45||k==46||k==8||(t.isMac&&(k==91||k==93))||e.ctrlKey)g(j,e)});s.onReset.add(function(){s.setContent(s.startContent,{format:'raw'})});function h(e,j){if(e.altKey||e.ctrlKey||e.metaKey){a(s.shortcuts,function(k){var l=t.isMac?e.metaKey:e.ctrlKey;if(k.ctrl!=l||k.alt!=e.altKey||k.shift!=e.shiftKey)return;if(e.keyCode==k.keyCode||(e.charCode&&e.charCode==k.charCode)){e.preventDefault();if(j){k.func.call(k.scope)}return true}})}};s.onKeyUp.add(function(j,e){h(e)});s.onKeyPress.add(function(j,e){h(e)});s.onKeyDown.add(function(j,e){h(e,true)});if(t.isOpera){s.onClick.add(function(j,e){e.preventDefault()})}}})(tinymce);(function(t){var e=t.each,u,T=true,F=false;t.EditorCommands=function(a){var d=a.dom,s=a.selection,c={state:{},exec:{},value:{}},b=a.settings,f=a.formatter,g;function h(o,p,v){var w;o=o.toLowerCase();if(w=c.exec[o]){w(o,p,v);return T}return F};function q(o){var p;o=o.toLowerCase();if(p=c.state[o])return p(o);return-1};function i(o){var p;o=o.toLowerCase();if(p=c.value[o])return p(o);return F};function j(o,p){p=p||'exec';e(o,function(v,w){e(w.toLowerCase().split(','),function(w){c[p][w]=v})})};t.extend(this,{execCommand:h,queryCommandState:q,queryCommandValue:i,addCommands:j});function k(o,p,v){if(p===u)p=F;if(v===u)v=null;return a.getDoc().execCommand(o,p,v)};function l(o){return f.match(o)};function m(o,v){f.toggle(o,v?{value:v}:u)};function n(o){g=s.getBookmark(o)};function r(){s.moveToBookmark(g)};j({'mceResetDesignMode,mceBeginUndoLevel':function(){},'mceEndUndoLevel,mceAddUndoLevel':function(){a.undoManager.add()},'Cut,Copy,Paste':function(o){var p=a.getDoc(),v;try{k(o)}catch(w){v=T}if(v||!p.queryCommandSupported(o)){if(t.isGecko){a.windowManager.confirm(a.getLang('clipboard_msg'),function(x){if(x)open('http://www.mozilla.org/editor/midasdemo/securityprefs.html','_blank')})}else a.windowManager.alert(a.getLang('clipboard_no_support'))}},unlink:function(o){if(s.isCollapsed())s.select(s.getNode());k(o);s.collapse(F)},'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull':function(o){var p=o.substring(7);e('left,center,right,full'.split(','),function(v){if(p!=v)f.remove('align'+v)});m('align'+p);h('mceRepaint')},'InsertUnorderedList,InsertOrderedList':function(o){var p,v;k(o);p=d.getParent(s.getNode(),'ol,ul');if(p){v=p.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(v.nodeName)){n();d.split(v,p);r()}}},'Bold,Italic,Underline,Strikethrough,Superscript,Subscript':function(o){m(o)},'ForeColor,HiliteColor,FontName':function(o,p,v){m(o,v)},FontSize:function(o,p,v){var w,x;if(v>=1&&v<=7){x=t.explode(b.font_size_style_values);w=t.explode(b.font_size_classes);if(w)v=w[v-1]||v;else v=x[v-1]||v}m(o,v)},RemoveFormat:function(o){f.remove(o)},mceBlockQuote:function(o){m('blockquote')},FormatBlock:function(o,p,v){return m(v||'p')},mceCleanup:function(){var g=s.getBookmark();a.setContent(a.getContent({cleanup:T}),{cleanup:T});s.moveToBookmark(g)},mceRemoveNode:function(o,p,v){var w=v||s.getNode();if(w!=a.getBody()){n();a.dom.remove(w,T);r()}},mceSelectNodeDepth:function(o,p,v){var w=0;d.getParent(s.getNode(),function(x){if(x.nodeType==1&&w++==v){s.select(x);return F}},a.getBody())},mceSelectNode:function(o,p,v){s.select(v)},mceInsertContent:function(o,p,v){var w,x,y,z,A,B,C,D,E,G,H,I,J,K;w=a.parser;x=new t.html.Serializer({},a.schema);J='<span id="mce_marker" data-mce-type="bookmark">\uFEFF</span>';B={content:v,format:'html'};s.onBeforeSetContent.dispatch(s,B);v=B.content;if(v.indexOf('{$caret}')==-1)v+='{$caret}';v=v.replace(/\{\$caret\}/,J);if(!s.isCollapsed())a.getDoc().execCommand('Delete',false,null);y=s.getNode();B={context:y.nodeName.toLowerCase()};A=w.parse(v,B);H=A.lastChild;if(H.attr('id')=='mce_marker'){C=H;for(H=H.prev;H;H=H.walk(true)){if(H.type==3||!d.isBlock(H.name)){H.parent.insert(C,H,H.name==='br');break}}}if(!B.invalid){v=x.serialize(A);H=y.firstChild;I=y.lastChild;if(!H||(H===I&&H.nodeName==='BR'))d.setHTML(y,v);else s.setContent(v)}else{s.setContent(J);y=s.getNode();z=a.getBody();if(y.nodeType==9)y=H=z;else H=y;while(H!==z){y=H;H=H.parentNode}v=y==z?z.innerHTML:d.getOuterHTML(y);v=x.serialize(w.parse(v.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return x.serialize(A)})));if(y==z)d.setHTML(z,v);else d.setOuterHTML(y,v)}C=d.get('mce_marker');D=d.getRect(C);E=d.getViewPort(a.getWin());if((D.y+D.h>E.y+E.h||D.y<E.y)||(D.x>E.x+E.w||D.x<E.x)){K=t.isIE?a.getDoc().documentElement:a.getBody();K.scrollLeft=D.x;K.scrollTop=D.y-E.h+25}G=d.createRng();H=C.previousSibling;if(H&&H.nodeType==3){G.setStart(H,H.nodeValue.length)}else{G.setStartBefore(C);G.setEndBefore(C)}d.remove(C);s.setRng(G);s.onSetContent.dispatch(s,B);a.addVisual()},mceInsertRawHTML:function(o,p,v){s.setContent('tiny_mce_marker');a.setContent(a.getContent().replace(/tiny_mce_marker/g,function(){return v}))},mceToggleFormat:function(o,p,v){m(v)},mceSetContent:function(o,p,v){a.setContent(v)},'Indent,Outdent':function(o){var p,v,w;p=b.indentation;v=/[a-z%]+$/i.exec(p);p=parseInt(p);if(!q('InsertUnorderedList')&&!q('InsertOrderedList')){if(!b.forced_root_block&&!d.getParent(s.getNode(),d.isBlock)){f.apply('div')}e(s.getSelectedBlocks(),function(x){if(o=='outdent'){w=Math.max(0,parseInt(x.style.paddingLeft||0)-p);d.setStyle(x,'paddingLeft',w?w+v:'')}else d.setStyle(x,'paddingLeft',(parseInt(x.style.paddingLeft||0)+p)+v)})}else k(o)},mceRepaint:function(){var g;if(t.isGecko){try{n(T);if(s.getSel())s.getSel().selectAllChildren(a.getBody());s.collapse(T);r()}catch(o){}}},mceToggleFormat:function(o,p,v){f.toggle(v)},InsertHorizontalRule:function(){a.execCommand('mceInsertContent',false,'<hr />')},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual;a.addVisual()},mceReplaceContent:function(o,p,v){a.execCommand('mceInsertContent',false,v.replace(/\{\$selection\}/g,s.getContent({format:'text'})))},mceInsertLink:function(o,p,v){var w;if(typeof(v)=='string')v={href:v};w=d.getParent(s.getNode(),'a');v.href=v.href.replace(' ','%20');if(!w||!v.href){f.remove('link')}if(v.href){f.apply('link',v,w)}},selectAll:function(){var o=d.getRoot(),p=d.createRng();if(s.getRng().setStart){p.setStart(o,0);p.setEnd(o,o.childNodes.length);s.setRng(p)}else{k('SelectAll')}}});j({'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull':function(o){var p='align'+o.substring(7);var v=s.isCollapsed()?[d.getParent(s.getNode(),d.isBlock)]:s.getSelectedBlocks();var w=t.map(v,function(x){return!!f.matchNode(x,p)});return t.inArray(w,T)!==-1},'Bold,Italic,Underline,Strikethrough,Superscript,Subscript':function(o){return l(o)},mceBlockQuote:function(){return l('blockquote')},Outdent:function(){var o;if(b.inline_styles){if((o=d.getParent(s.getStart(),d.isBlock))&&parseInt(o.style.paddingLeft)>0)return T;if((o=d.getParent(s.getEnd(),d.isBlock))&&parseInt(o.style.paddingLeft)>0)return T}return q('InsertUnorderedList')||q('InsertOrderedList')||(!b.inline_styles&&!!d.getParent(s.getNode(),'BLOCKQUOTE'))},'InsertUnorderedList,InsertOrderedList':function(o){var p=d.getParent(s.getNode(),'ul,ol');return p&&(o==='insertunorderedlist'&&p.tagName==='UL'||o==='insertorderedlist'&&p.tagName==='OL')}},'state');j({'FontSize,FontName':function(o){var v=0,p;if(p=d.getParent(s.getNode(),'span')){if(o=='fontsize')v=p.style.fontSize;else v=p.style.fontFamily.replace(/, /g,',').replace(/[\'\"]/g,'').toLowerCase()}return v}},'value');j({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}})}})(tinymce);(function(t){var D=t.util.Dispatcher;t.UndoManager=function(a){var s,b=0,d=[],c,o,f,g;function h(){return t.trim(a.getContent({format:'raw',no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,''))};function j(){s.typing=false;s.add()};onBeforeAdd=new D(s);o=new D(s);f=new D(s);g=new D(s);o.add(function(u,l){if(u.hasUndo())return a.onChange.dispatch(a,l,u)});f.add(function(u,l){return a.onUndo.dispatch(a,l,u)});g.add(function(u,l){return a.onRedo.dispatch(a,l,u)});a.onInit.add(function(){s.add()});a.onBeforeExecCommand.add(function(e,i,u,v,k){if(i!='Undo'&&i!='Redo'&&i!='mceRepaint'&&(!k||!k.skip_undo)){s.beforeChange()}});a.onExecCommand.add(function(e,i,u,v,k){if(i!='Undo'&&i!='Redo'&&i!='mceRepaint'&&(!k||!k.skip_undo)){s.add()}});a.onSaveContent.add(j);a.dom.bind(a.dom.getRoot(),'dragend',j);a.dom.bind(a.getBody(),'focusout',function(e){if(!a.removed&&s.typing){j()}});a.onKeyUp.add(function(a,e){var k=e.keyCode;if((k>=33&&k<=36)||(k>=37&&k<=40)||k==45||k==13||e.ctrlKey){j()}});a.onKeyDown.add(function(a,e){var k=e.keyCode;if((k>=33&&k<=36)||(k>=37&&k<=40)||k==45){if(s.typing){j()}return}if((k<16||k>20)&&k!=224&&k!=91&&!s.typing){s.beforeChange();s.typing=true;s.add()}});a.onMouseDown.add(function(a,e){if(s.typing){j()}});a.addShortcut('ctrl+z','undo_desc','Undo');a.addShortcut('ctrl+y','redo_desc','Redo');s={data:d,typing:false,onBeforeAdd:onBeforeAdd,onAdd:o,onUndo:f,onRedo:g,beforeChange:function(){c=a.selection.getBookmark(2,true)},add:function(l){var i,e=a.settings,k;l=l||{};l.content=h();s.onBeforeAdd.dispatch(s,l);k=d[b];if(k&&k.content==l.content)return null;if(d[b])d[b].beforeBookmark=c;if(e.custom_undo_redo_levels){if(d.length>e.custom_undo_redo_levels){for(i=0;i<d.length-1;i++)d[i]=d[i+1];d.length--;b=d.length}}l.bookmark=a.selection.getBookmark(2,true);if(b<d.length-1)d.length=b+1;d.push(l);b=d.length-1;s.onAdd.dispatch(s,l);a.isNotDirty=0;return l},undo:function(){var l,i;if(s.typing){s.add();s.typing=false}if(b>0){l=d[--b];a.setContent(l.content,{format:'raw'});a.selection.moveToBookmark(l.beforeBookmark);s.onUndo.dispatch(s,l)}return l},redo:function(){var l;if(b<d.length-1){l=d[++b];a.setContent(l.content,{format:'raw'});a.selection.moveToBookmark(l.bookmark);s.onRedo.dispatch(s,l)}return l},clear:function(){d=[];b=0;s.typing=false},hasUndo:function(){return b>0||this.typing},hasRedo:function(){return b<d.length-1&&!this.typing}};return s}})(tinymce);
tinymce.ForceBlocks=function(e){var s=e.settings,d=e.dom,a=e.selection,b=e.schema.getBlockElements();function c(){var n=a.getStart(),r=e.getBody(),f,g,h,i,j,k,t,o=-0xFFFFFF,w,l;if(!n||n.nodeType!==1||!s.forced_root_block)return;while(n&&n!=r){if(b[n.nodeName])return;n=n.parentNode}f=a.getRng();if(f.setStart){g=f.startContainer;h=f.startOffset;i=f.endContainer;j=f.endOffset}else{if(f.item){n=f.item(0);f=e.getDoc().body.createTextRange();f.moveToElementText(n)}l=f.parentElement().ownerDocument===e.getDoc();tmpRng=f.duplicate();tmpRng.collapse(true);h=tmpRng.move('character',o)*-1;if(!tmpRng.collapsed){tmpRng=f.duplicate();tmpRng.collapse(false);j=(tmpRng.move('character',o)*-1)-h}}n=r.firstChild;while(n){if(n.nodeType===3||(n.nodeType==1&&!b[n.nodeName])){if(n.nodeType===3&&n.nodeValue.length==0){t=n;n=n.nextSibling;d.remove(t);continue}if(!k){k=d.create(s.forced_root_block);n.parentNode.insertBefore(k,n);w=true}t=n;n=n.nextSibling;k.appendChild(t)}else{k=null;n=n.nextSibling}}if(w){if(f.setStart){f.setStart(g,h);f.setEnd(i,j);a.setRng(f)}else{if(l){try{f=e.getDoc().body.createTextRange();f.moveToElementText(r);f.collapse(true);f.moveStart('character',h);if(j>0)f.moveEnd('character',j);f.select()}catch(m){}}}e.nodeChanged()}};if(s.forced_root_block){e.onKeyUp.add(c);e.onNodeChange.add(c)}};
(function(a){var D=a.DOM,E=a.dom.Event,e=a.each,b=a.extend;a.create('tinymce.ControlManager',{ControlManager:function(d,s){var t=this,i;s=s||{};t.editor=d;t.controls={};t.onAdd=new a.util.Dispatcher(t);t.onPostRender=new a.util.Dispatcher(t);t.prefix=s.prefix||d.id+'_';t._cls={};t.onPostRender.add(function(){e(t.controls,function(c){c.postRender()})})},get:function(i){return this.controls[this.prefix+i]||this.controls[i]},setActive:function(i,s){var c=null;if(c=this.get(i))c.setActive(s);return c},setDisabled:function(i,s){var c=null;if(c=this.get(i))c.setDisabled(s);return c},add:function(c){var t=this;if(c){t.controls[c.id]=c;t.onAdd.dispatch(c,t)}return c},createControl:function(n){var c,i,l,s=this,d=s.editor,f,g;if(!s.controlFactories){s.controlFactories=[];e(d.plugins,function(p){if(p.createControl){s.controlFactories.push(p)}})}f=s.controlFactories;for(i=0,l=f.length;i<l;i++){c=f[i].createControl(n,s);if(c){return s.add(c)}}if(n==="|"||n==="separator"){return s.createSeparator()}if(d.buttons&&(c=d.buttons[n])){return s.createButton(n,c)}return s.add(c)},createDropMenu:function(i,s,d){var t=this,f=t.editor,c,g,v,h;s=b({'class':'mceDropDown',constrain:f.settings.constrain_menus},s);s['class']=s['class']+' '+f.getParam('skin')+'Skin';if(v=f.getParam('skin_variant'))s['class']+=' '+f.getParam('skin')+'Skin'+v.substring(0,1).toUpperCase()+v.substring(1);s['class']+=f.settings.directionality=="rtl"?' mceRtl':'';i=t.prefix+i;h=d||t._cls.dropmenu||a.ui.DropMenu;c=t.controls[i]=new h(i,s);c.onAddItem.add(function(c,o){var s=o.settings;s.title=f.getLang(s.title,s.title);if(!s.onclick){s.onclick=function(v){if(s.cmd)f.execCommand(s.cmd,s.ui||false,s.value)}}});f.onRemove.add(function(){c.destroy()});if(a.isIE){c.onShowMenu.add(function(){f.focus();g=f.selection.getBookmark(1)});c.onHideMenu.add(function(){if(g){f.selection.moveToBookmark(g);g=0}})}return t.add(c)},createListBox:function(i,s,d){var t=this,f=t.editor,g,c,h;if(t.get(i))return null;s.title=f.translate(s.title);s.scope=s.scope||f;if(!s.onselect){s.onselect=function(v){f.execCommand(s.cmd,s.ui||false,v||s.value)}}s=b({title:s.title,'class':'mce_'+i,scope:s.scope,control_manager:t},s);i=t.prefix+i;function u(f){return f.settings.use_accessible_selects&&!a.isGecko}if(f.settings.use_native_selects||u(f))c=new a.ui.NativeListBox(i,s);else{h=d||t._cls.listbox||a.ui.ListBox;c=new h(i,s,f)}t.controls[i]=c;if(a.isWebKit){c.onPostRender.add(function(c,n){E.add(n,'mousedown',function(){f.bookmark=f.selection.getBookmark(1)});E.add(n,'focus',function(){f.selection.moveToBookmark(f.bookmark);f.bookmark=null})})}if(c.hideMenu)f.onMouseDown.add(c.hideMenu,c);return t.add(c)},createButton:function(i,s,d){var t=this,f=t.editor,o,c,g;if(t.get(i))return null;s.title=f.translate(s.title);s.label=f.translate(s.label);s.scope=s.scope||f;if(!s.onclick&&!s.menu_button){s.onclick=function(){f.execCommand(s.cmd,s.ui||false,s.value)}}s=b({title:s.title,'class':'mce_'+i,unavailable_prefix:f.getLang('unavailable',''),scope:s.scope,control_manager:t},s);i=t.prefix+i;if(s.menu_button){g=d||t._cls.menubutton||a.ui.MenuButton;c=new g(i,s,f);f.onMouseDown.add(c.hideMenu,c)}else{g=t._cls.button||a.ui.Button;c=new g(i,s,f)}return t.add(c)},createMenuButton:function(i,s,c){s=s||{};s.menu_button=1;return this.createButton(i,s,c)},createSplitButton:function(i,s,d){var t=this,f=t.editor,g,c,h;if(t.get(i))return null;s.title=f.translate(s.title);s.scope=s.scope||f;if(!s.onclick){s.onclick=function(v){f.execCommand(s.cmd,s.ui||false,v||s.value)}}if(!s.onselect){s.onselect=function(v){f.execCommand(s.cmd,s.ui||false,v||s.value)}}s=b({title:s.title,'class':'mce_'+i,scope:s.scope,control_manager:t},s);i=t.prefix+i;h=d||t._cls.splitbutton||a.ui.SplitButton;c=t.add(new h(i,s,f));f.onMouseDown.add(c.hideMenu,c);return c},createColorSplitButton:function(i,s,d){var t=this,f=t.editor,g,c,h,j;if(t.get(i))return null;s.title=f.translate(s.title);s.scope=s.scope||f;if(!s.onclick){s.onclick=function(v){if(a.isIE)j=f.selection.getBookmark(1);f.execCommand(s.cmd,s.ui||false,v||s.value)}}if(!s.onselect){s.onselect=function(v){f.execCommand(s.cmd,s.ui||false,v||s.value)}}s=b({title:s.title,'class':'mce_'+i,'menu_class':f.getParam('skin')+'Skin',scope:s.scope,more_colors_title:f.getLang('more_colors')},s);i=t.prefix+i;h=d||t._cls.colorsplitbutton||a.ui.ColorSplitButton;c=new h(i,s,f);f.onMouseDown.add(c.hideMenu,c);f.onRemove.add(function(){c.destroy()});if(a.isIE){c.onShowMenu.add(function(){f.focus();j=f.selection.getBookmark(1)});c.onHideMenu.add(function(){if(j){f.selection.moveToBookmark(j);j=0}})}return t.add(c)},createToolbar:function(i,s,d){var c,t=this,f;i=t.prefix+i;f=d||t._cls.toolbar||a.ui.Toolbar;c=new f(i,s,t.editor);if(t.get(i))return null;return t.add(c)},createToolbarGroup:function(i,s,d){var c,t=this,f;i=t.prefix+i;f=d||this._cls.toolbarGroup||a.ui.ToolbarGroup;c=new f(i,s,t.editor);if(t.get(i))return null;return t.add(c)},createSeparator:function(c){var d=c||this._cls.separator||a.ui.Separator;return new d()},setControlType:function(n,c){return this._cls[n.toLowerCase()]=c},destroy:function(){e(this.controls,function(c){c.destroy()});this.controls=null}})})(tinymce);(function(g){var D=g.util.Dispatcher,h=g.each,i=g.isIE,j=g.isOpera;g.create('tinymce.WindowManager',{WindowManager:function(e){var t=this;t.editor=e;t.onOpen=new D(t);t.onClose=new D(t);t.params={};t.features={}},open:function(s,p){var t=this,f='',x,y,m=t.editor.settings.dialog_type=='modal',w,a,b,c=g.DOM.getViewPort(),u;s=s||{};p=p||{};a=j?c.w:screen.width;b=j?c.h:screen.height;s.name=s.name||'mc_'+new Date().getTime();s.width=parseInt(s.width||320);s.height=parseInt(s.height||240);s.resizable=true;s.left=s.left||parseInt(a/2.0)-(s.width/2.0);s.top=s.top||parseInt(b/2.0)-(s.height/2.0);p.inline=false;p.mce_width=s.width;p.mce_height=s.height;p.mce_auto_focus=s.auto_focus;if(m){if(i){s.center=true;s.help=false;s.dialogWidth=s.width+'px';s.dialogHeight=s.height+'px';s.scroll=s.scrollbars||false}}h(s,function(v,k){if(g.is(v,'boolean'))v=v?'yes':'no';if(!/^(name|url)$/.test(k)){if(i&&m)f+=(f?';':'')+k+':'+v;else f+=(f?',':'')+k+'='+v}});t.features=s;t.params=p;t.onOpen.dispatch(t,s,p);u=s.url||s.file;u=g._addVer(u);try{if(i&&m){w=1;window.showModalDialog(u,window,f)}else w=window.open(u,s.name,f)}catch(e){}if(!w)alert(t.editor.getLang('popup_blocked'))},close:function(w){w.close();this.onClose.dispatch(this)},createInstance:function(k,a,b,c,d,e){var f=g.resolve(k);return new f(a,b,c,d,e)},confirm:function(t,c,s,w){w=w||window;c.call(s||this,w.confirm(this._decode(this.editor.getLang(t,t))))},alert:function(a,c,s,w){var t=this;w=w||window;w.alert(t._decode(t.editor.getLang(a,a)));if(c)c.call(s||t)},resizeBy:function(d,a,w){w.resizeBy(d,a)},_decode:function(s){return g.DOM.decode(s).replace(/\\n/g,'\n')}})}(tinymce));(function(t){t.Formatter=function(a){var f={},b=t.each,d=a.dom,s=a.selection,T=t.dom.TreeWalker,r=new t.dom.RangeUtils(d),c=a.schema.isValidChild,g=t.isArray,h=d.isBlock,j=a.settings.forced_root_block,k=d.nodeIndex,I='\uFEFF',M=/^(src|href|style)$/,F=false,m=true,o,u,p=d.getContentEditable;function q(n){return!!a.schema.getTextBlocks()[n.toLowerCase()]}function v(n,e){return d.getParents(n,e,d.getRoot())};function w(n){return n.nodeType===1&&n.id==='_mce_caret'};function z(){C({alignleft:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li',styles:{textAlign:'left'},defaultBlock:'div'},{selector:'img,table',collapsed:false,styles:{'float':'left'}}],aligncenter:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li',styles:{textAlign:'center'},defaultBlock:'div'},{selector:'img',collapsed:false,styles:{display:'block',marginLeft:'auto',marginRight:'auto'}},{selector:'table',collapsed:false,styles:{marginLeft:'auto',marginRight:'auto'}}],alignright:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li',styles:{textAlign:'right'},defaultBlock:'div'},{selector:'img,table',collapsed:false,styles:{'float':'right'}}],alignfull:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li',styles:{textAlign:'justify'},defaultBlock:'div'}],bold:[{inline:'strong',remove:'all'},{inline:'span',styles:{fontWeight:'bold'}},{inline:'b',remove:'all'}],italic:[{inline:'em',remove:'all'},{inline:'span',styles:{fontStyle:'italic'}},{inline:'i',remove:'all'}],underline:[{inline:'span',styles:{textDecoration:'underline'},exact:true},{inline:'u',remove:'all'}],strikethrough:[{inline:'span',styles:{textDecoration:'line-through'},exact:true},{inline:'strike',remove:'all'}],forecolor:{inline:'span',styles:{color:'%value'},wrap_links:false},hilitecolor:{inline:'span',styles:{backgroundColor:'%value'},wrap_links:false},fontname:{inline:'span',styles:{fontFamily:'%value'}},fontsize:{inline:'span',styles:{fontSize:'%value'}},fontsize_class:{inline:'span',attributes:{'class':'%value'}},blockquote:{block:'blockquote',wrapper:1,remove:'all'},subscript:{inline:'sub'},superscript:{inline:'sup'},link:{inline:'a',selector:'a',remove:'all',split:true,deep:true,onmatch:function(n){return true},onformat:function(e,i,l){b(l,function(n,x){d.setAttrib(e,x,n)})}},removeformat:[{selector:'b,strong,em,i,font,u,strike',remove:'all',split:true,expand:false,block_expand:true,deep:true},{selector:'span',attributes:['style','class'],remove:'empty',split:true,expand:false,deep:true},{selector:'*',attributes:['style','class'],split:false,expand:false,deep:true}]});b('p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp'.split(/\s/),function(n){C(n,{block:n,remove:'all'})});C(a.settings.formats)};function A(){a.addShortcut('ctrl+b','bold_desc','Bold');a.addShortcut('ctrl+i','italic_desc','Italic');a.addShortcut('ctrl+u','underline_desc','Underline');for(var i=1;i<=6;i++){a.addShortcut('ctrl+'+i,'',['FormatBlock',false,'h'+i])}a.addShortcut('ctrl+7','',['FormatBlock',false,'p']);a.addShortcut('ctrl+8','',['FormatBlock',false,'div']);a.addShortcut('ctrl+9','',['FormatBlock',false,'address'])};function B(n){return n?f[n]:f};function C(n,e){if(n){if(typeof(n)!=='string'){b(n,function(e,n){C(n,e)})}else{e=e.length?e:[e];b(e,function(e){if(e.deep===u)e.deep=!e.selector;if(e.split===u)e.split=!e.selector||e.inline;if(e.remove===u&&e.selector&&!e.inline)e.remove='none';if(e.selector&&e.inline){e.mixed=true;e.block_expand=true}if(typeof(e.classes)==='string')e.classes=e.classes.split(/\s+/)});f[n]=e}}};var D=function(e){var i;a.dom.getParent(e,function(n){i=a.dom.getStyle(n,'text-decoration');return i&&i!=='none'});return i};var E=function(n){var e;if(n.nodeType===1&&n.parentNode&&n.parentNode.nodeType===1){e=D(n.parentNode);if(a.dom.getStyle(n,'color')&&e){a.dom.setStyle(n,'text-decoration',e)}else if(a.dom.getStyle(n,'textdecoration')===e){a.dom.setStyle(n,'text-decoration',null)}}};function G(e,l,x){var y=B(e),e1=y[0],f1,g1,i,h1=s.isCollapsed();function i1(n,n1){n1=n1||e1;if(n){if(n1.onformat){n1.onformat(n,n1,l,x)}b(n1.styles,function(o1,e){d.setStyle(n,e,U(o1,l))});b(n1.attributes,function(o1,e){d.setAttrib(n,e,U(o1,l))});b(n1.classes,function(o1){o1=U(o1,l);if(!d.hasClass(n,o1))d.addClass(n,o1)})}};function j1(){function n(n1,o1){var r1=new T(o1);for(x=r1.current();x;x=r1.prev()){if(x.childNodes.length>1||x==n1||x.tagName=='BR'){return x}}};var g1=a.selection.getRng();var n1=g1.startContainer;var o1=g1.endContainer;if(n1!=o1&&g1.endOffset===0){var p1=n(n1,o1);var q1=p1.nodeType==3?p1.length:p1.childNodes.length;g1.setEnd(p1,q1)}return g1}function k1(x,f1,n1,o1,p1){var q1=[],r1=-1,s1,t1=-1,u1=-1,v1;b(x.childNodes,function(n,w1){if(n.nodeName==="UL"||n.nodeName==="OL"){r1=w1;s1=n;return false}});b(x.childNodes,function(n,w1){if(n.nodeName==="SPAN"&&d.getAttrib(n,"data-mce-type")=="bookmark"){if(n.id==f1.id+"_start"){t1=w1}else if(n.id==f1.id+"_end"){u1=w1}}});if(r1<=0||(t1<r1&&u1>r1)){b(t.grep(x.childNodes),p1);return 0}else{v1=d.clone(n1,F);b(t.grep(x.childNodes),function(n,w1){if((t1<r1&&w1<r1)||(t1>r1&&w1>r1)){q1.push(n);n.parentNode.removeChild(n)}});if(t1<r1){x.insertBefore(v1,s1)}else if(t1>r1){x.insertBefore(v1,s1.nextSibling)}o1.push(v1);b(q1,function(x){v1.appendChild(x)});return v1}};function l1(g1,f1,n){var n1=[],o1,p1,q1=true;o1=e1.inline||e1.block;p1=d.create(o1);i1(p1);r.walk(g1,function(r1){var s1;function t1(x){var u1,v1,w1,x1,y1;y1=q1;u1=x.nodeName.toLowerCase();v1=x.parentNode.nodeName.toLowerCase();if(x.nodeType===1&&p(x)){y1=q1;q1=p(x)==="true";x1=true}if(R(u1,'br')){s1=0;if(e1.block)d.remove(x);return}if(e1.wrapper&&K(x,e,l)){s1=0;return}if(q1&&!x1&&e1.block&&!e1.wrapper&&q(u1)){x=d.rename(x,o1);i1(x);n1.push(x);s1=0;return}if(e1.selector){b(y,function(e1){if('collapsed'in e1&&e1.collapsed!==h1){return}if(d.is(x,e1.selector)&&!w(x)){i1(x,e1);w1=true}});if(!e1.inline||w1){s1=0;return}}if(q1&&!x1&&c(o1,u1)&&c(v1,o1)&&!(!n&&x.nodeType===3&&x.nodeValue.length===1&&x.nodeValue.charCodeAt(0)===65279)&&!w(x)){if(!s1){s1=d.clone(p1,F);x.parentNode.insertBefore(s1,x);n1.push(s1)}s1.appendChild(x)}else if(u1=='li'&&f1){s1=k1(x,f1,p1,n1,t1)}else{s1=0;b(t.grep(x.childNodes),t1);if(x1){q1=y1}s1=0}};b(r1,t1)});if(e1.wrap_links===false){b(n1,function(x){function r1(x){var i,s1,t1;if(x.nodeName==='A'){s1=d.clone(p1,F);n1.push(s1);t1=t.grep(x.childNodes);for(i=0;i<t1.length;i++)s1.appendChild(t1[i]);x.appendChild(s1)}b(t.grep(x.childNodes),r1)};r1(x)})}b(n1,function(x){var r1;function s1(x){var u1=0;b(x.childNodes,function(x){if(!V(x)&&!_(x))u1++});return u1};function t1(x){var u1,v1;b(x.childNodes,function(x){if(x.nodeType==1&&!_(x)&&!w(x)){u1=x;return F}});if(u1&&Q(u1,e1)){v1=d.clone(u1,F);i1(v1);d.replace(v1,x,m);d.remove(u1,1)}return v1||x};r1=s1(x);if((n1.length>1||!h(x))&&r1===0){d.remove(x,1);return}if(e1.inline||e1.wrapper){if(!e1.exact&&r1===1)x=t1(x);b(y,function(e1){b(d.select(e1.inline,x),function(u1){var v1;if(e1.wrap_links===false){v1=u1.parentNode;do{if(v1.nodeName==='A')return}while(v1=v1.parentNode)}Y(e1,l,u1,e1.exact?u1:null)})});if(K(x.parentNode,e,l)){d.remove(x,1);x=0;return m}if(e1.merge_with_parents){d.getParent(x.parentNode,function(u1){if(K(u1,e,l)){d.remove(x,1);x=0;return m}})}if(x&&e1.merge_siblings!==false){x=a1($(x),x);x=a1(x,$(x,m))}}})};if(e1){if(x){if(x.nodeType){g1=d.createRng();g1.setStartBefore(x);g1.setEndAfter(x);l1(X(g1,y),null,true)}else{l1(x,null,true)}}else{if(!h1||!e1.inline||d.select('td.mceSelected,th.mceSelected').length){var m1=a.selection.getNode();if(!j&&y[0].defaultBlock&&!d.getParent(m1,d.isBlock)){G(y[0].defaultBlock)}a.selection.setRng(j1());f1=s.getBookmark();l1(X(s.getRng(m),y),f1);if(e1.styles&&(e1.styles.color||e1.styles.textDecoration)){t.walk(m1,E,'childNodes');E(m1)}s.moveToBookmark(f1);d1(s.getRng(m));a.nodeChanged()}else c1('apply',e,l)}}};function H(n,e,x){var y=B(n),e1=y[0],f1,i,g1,h1=true;function i1(x){var o1,i,l,p1,q1,r1;if(x.nodeType===3){return}if(x.nodeType===1&&p(x)){q1=h1;h1=p(x)==="true";r1=true}o1=t.grep(x.childNodes);if(h1&&!r1){for(i=0,l=y.length;i<l;i++){if(Y(y[i],e,x,x))break}}if(e1.deep){if(o1.length){for(i=0,l=o1.length;i<l;i++)i1(o1[i]);if(r1){h1=q1}}}};function j1(l){var o1;b(v(l.parentNode).reverse(),function(p1){var e1;if(!o1&&p1.id!='_start'&&p1.id!='_end'){e1=K(p1,n,e);if(e1&&e1.split!==false)o1=p1}});return o1};function k1(l,o1,p1,q1){var r1,s1,t1,u1,i,v1;if(l){v1=l.parentNode;for(r1=o1.parentNode;r1&&r1!=v1;r1=r1.parentNode){s1=d.clone(r1,F);for(i=0;i<y.length;i++){if(Y(y[i],e,s1,s1)){s1=0;break}}if(s1){if(t1)s1.appendChild(t1);if(!u1)u1=s1;t1=s1}}if(q1&&(!e1.mixed||!h(l)))o1=d.split(l,o1);if(t1){p1.parentNode.insertBefore(t1,p1);u1.appendChild(p1)}}return o1};function l1(l){return k1(j1(l),l,l,true)};function m1(l){var x=d.get(l?'_start':'_end'),o1=x[l?'firstChild':'lastChild'];if(_(o1))o1=o1[l?'firstChild':'lastChild'];d.remove(x,true);return o1};function n1(g1){var l,o1,x;g1=X(g1,y,m);if(e1.split){l=b1(g1,m);o1=b1(g1);if(l!=o1){if(/^(TR|TD)$/.test(l.nodeName)&&l.firstChild){l=(l.nodeName=="TD"?l.firstChild:l.firstChild.firstChild)||l}l=W(l,'span',{id:'_start','data-mce-type':'bookmark'});o1=W(o1,'span',{id:'_end','data-mce-type':'bookmark'});l1(l);l1(o1);l=m1(m);o1=m1()}else l=o1=l1(l);g1.startContainer=l.parentNode;g1.startOffset=k(l);g1.endContainer=o1.parentNode;g1.endOffset=k(o1)+1}r.walk(g1,function(p1){b(p1,function(x){i1(x);if(x.nodeType===1&&a.dom.getStyle(x,'text-decoration')==='underline'&&x.parentNode&&D(x.parentNode)==='underline'){Y({'deep':false,'exact':true,'inline':'span','styles':{'textDecoration':'underline'}},null,x)}})})};if(x){if(x.nodeType){g1=d.createRng();g1.setStartBefore(x);g1.setEndAfter(x);n1(g1)}else{n1(x)}return}if(!s.isCollapsed()||!e1.inline||d.select('td.mceSelected,th.mceSelected').length){f1=s.getBookmark();n1(s.getRng(m));s.moveToBookmark(f1);if(e1.inline&&L(n,e,s.getStart())){d1(s.getRng(true))}a.nodeChanged()}else c1('remove',n,e)};function J(n,e,i){var l=B(n);if(L(n,e,i)&&(!('toggle'in l[0])||l[0].toggle))H(n,e,i);else G(n,e,i)};function K(n,e,l,x){var y=B(e),e1,i,f1;function g1(n,e1,h1){var i1,j1,k1=e1[h1],i;if(e1.onmatch){return e1.onmatch(n,e1,h1)}if(k1){if(k1.length===u){for(i1 in k1){if(k1.hasOwnProperty(i1)){if(h1==='attributes')j1=d.getAttrib(n,i1);else j1=S(n,i1);if(x&&!j1&&!e1.exact)return;if((!x||e1.exact)&&!R(j1,U(k1[i1],l)))return}}}else{for(i=0;i<k1.length;i++){if(h1==='attributes'?d.getAttrib(n,k1[i]):S(n,k1[i]))return e1}}}return e1};if(y&&n){for(i=0;i<y.length;i++){e1=y[i];if(Q(n,e1)&&g1(n,e1,'attributes')&&g1(n,e1,'styles')){if(f1=e1.classes){for(i=0;i<f1.length;i++){if(!d.hasClass(n,f1[i]))return}}return e1}}}};function L(n,e,i){var l;function x(i){i=d.getParent(i,function(i){return!!K(i,n,e,true)});return K(i,n,e)};if(i)return x(i);i=s.getNode();if(x(i))return m;l=s.getStart();if(l!=i){if(x(l))return m}return F};function N(n,e){var l,x=[],y={},i,ni,e1;l=s.getStart();d.getParent(l,function(f1){var i,e1;for(i=0;i<n.length;i++){e1=n[i];if(!y[e1]&&K(f1,e1,e)){y[e1]=true;x.push(e1)}}},d.getRoot());return x};function O(n){var e=B(n),l,y,i,x,e1;if(e){l=s.getStart();y=v(l);for(x=e.length-1;x>=0;x--){e1=e[x].selector;if(!e1)return m;for(i=y.length-1;i>=0;i--){if(d.is(y[i],e1))return m}}}return F};function P(f,e,i){var l;if(!o){o={};l={};a.onNodeChange.addToTop(function(a,n,x){var y=v(x),e1={};b(o,function(f1,g1){b(y,function(x){if(K(x,g1,{},f1.similar)){if(!l[g1]){b(f1,function(e){e(true,{node:x,format:g1,parents:y})});l[g1]=f1}e1[g1]=f1;return false}})});b(l,function(f1,g1){if(!e1[g1]){delete l[g1];b(f1,function(e){e(false,{node:x,format:g1,parents:y})})}})})}b(f.split(','),function(n){if(!o[n]){o[n]=[];o[n].similar=i}o[n].push(e)});return this};t.extend(this,{get:B,register:C,apply:G,remove:H,toggle:J,match:L,matchAll:N,matchNode:K,canApply:O,formatChanged:P});z();A();function Q(n,e){if(R(n,e.inline))return m;if(R(n,e.block))return m;if(e.selector)return d.is(n,e.selector)};function R(e,i){e=e||'';i=i||'';e=''+(e.nodeName||e);i=''+(i.nodeName||i);return e.toLowerCase()==i.toLowerCase()};function S(n,e){var i=d.getStyle(n,e);if(e=='color'||e=='backgroundColor')i=d.toHex(i);if(e=='fontWeight'&&i==700)i='bold';return''+i};function U(e,i){if(typeof(e)!="string")e=e(i);else if(i){e=e.replace(/%(\w+)/g,function(l,n){return i[n]||l})}return e};function V(n){return n&&n.nodeType===3&&/^([\t \r\n]+|)$/.test(n.nodeValue)};function W(n,e,i){var l=d.create(e,i);n.parentNode.insertBefore(l,n);l.appendChild(n);return l};function X(e,l,H){var n,x,e1,f1,g1=e.startContainer,h1=e.startOffset,i1=e.endContainer,j1=e.endOffset;function k1(i){var y,q1,r1,n,s1,t1;y=q1=i?g1:i1;s1=i?'previousSibling':'nextSibling';t1=d.getRoot();function u1(v1){return v1.nodeName=="BR"&&v1.getAttribute('data-mce-bogus')&&!v1.nextSibling};if(y.nodeType==3&&!V(y)){if(i?h1>0:j1<y.nodeValue.length){return y}}for(;;){if(!l[0].block_expand&&h(q1))return q1;for(n=q1[s1];n;n=n[s1]){if(!_(n)&&!V(n)&&!u1(n)){return q1}}if(q1.parentNode==t1){y=q1;break}q1=q1.parentNode}return y};function l1(i,y){if(y===u)y=i.nodeType===3?i.length:i.childNodes.length;while(i&&i.hasChildNodes()){i=i.childNodes[y];if(i)y=i.nodeType===3?i.length:i.childNodes.length}return{node:i,offset:y}}if(g1.nodeType==1&&g1.hasChildNodes()){x=g1.childNodes.length-1;g1=g1.childNodes[h1>x?x:h1];if(g1.nodeType==3)h1=0}if(i1.nodeType==1&&i1.hasChildNodes()){x=i1.childNodes.length-1;i1=i1.childNodes[j1>x?x:j1-1];if(i1.nodeType==3)j1=i1.nodeValue.length}function m1(i){var y=i;while(y){if(y.nodeType===1&&p(y)){return p(y)==="false"?y:i}y=y.parentNode}return i};function n1(i,y,q1){var r1,s1,t1,u1;function v1(s1,y){var t1,w1,x1=s1.nodeValue;if(typeof(y)=="undefined"){y=q1?x1.length:0}if(q1){t1=x1.lastIndexOf(' ',y);w1=x1.lastIndexOf('\u00a0',y);t1=t1>w1?t1:w1;if(t1!==-1&&!H){t1++}}else{t1=x1.indexOf(' ',y);w1=x1.indexOf('\u00a0',y);t1=t1!==-1&&(w1===-1||t1<w1)?t1:w1}return t1};if(i.nodeType===3){t1=v1(i,y);if(t1!==-1){return{container:i,offset:t1}}u1=i}r1=new T(i,d.getParent(i,h)||a.getBody());while(s1=r1[q1?'prev':'next']()){if(s1.nodeType===3){u1=s1;t1=v1(s1);if(t1!==-1){return{container:s1,offset:t1}}}else if(h(s1)){break}}if(u1){if(q1){y=0}else{y=u1.length}return{container:u1,offset:y}}};function o1(q1,r1){var s1,i,y,t1;if(q1.nodeType==3&&q1.nodeValue.length===0&&q1[r1])q1=q1[r1];s1=v(q1);for(i=0;i<s1.length;i++){for(y=0;y<l.length;y++){t1=l[y];if("collapsed"in t1&&t1.collapsed!==e.collapsed)continue;if(d.is(s1[i],t1.selector))return s1[i]}}return q1};function p1(i,y,q1){var r1;if(!l[0].wrapper)r1=d.getParent(i,l[0].block);if(!r1)r1=d.getParent(i.nodeType==3?i.parentNode:i,q);if(r1&&l[0].wrapper)r1=v(r1,'ul,ol').reverse()[0]||r1;if(!r1){r1=i;while(r1[y]&&!h(r1[y])){r1=r1[y];if(R(r1,'br'))break}}return r1||i};g1=m1(g1);i1=m1(i1);if(_(g1.parentNode)||_(g1)){g1=_(g1)?g1:g1.parentNode;g1=g1.nextSibling||g1;if(g1.nodeType==3)h1=0}if(_(i1.parentNode)||_(i1)){i1=_(i1)?i1:i1.parentNode;i1=i1.previousSibling||i1;if(i1.nodeType==3)j1=i1.length}if(l[0].inline){if(e.collapsed){f1=n1(g1,h1,true);if(f1){g1=f1.container;h1=f1.offset}f1=n1(i1,j1);if(f1){i1=f1.container;j1=f1.offset}}e1=l1(i1,j1);if(e1.node){while(e1.node&&e1.offset===0&&e1.node.previousSibling)e1=l1(e1.node.previousSibling);if(e1.node&&e1.offset>0&&e1.node.nodeType===3&&e1.node.nodeValue.charAt(e1.offset-1)===' '){if(e1.offset>1){i1=e1.node;i1.splitText(e1.offset-1)}}}}if(l[0].inline||l[0].block_expand){if(!l[0].inline||(g1.nodeType!=3||h1===0)){g1=k1(true)}if(!l[0].inline||(i1.nodeType!=3||j1===i1.nodeValue.length)){i1=k1()}}if(l[0].selector&&l[0].expand!==F&&!l[0].inline){g1=o1(g1,'previousSibling');i1=o1(i1,'nextSibling')}if(l[0].block||l[0].selector){g1=p1(g1,'previousSibling');i1=p1(i1,'nextSibling');if(l[0].block){if(!h(g1))g1=k1(true);if(!h(i1))i1=k1()}}if(g1.nodeType==1){h1=k(g1);g1=g1.parentNode}if(i1.nodeType==1){j1=k(i1)+1;i1=i1.parentNode}return{startContainer:g1,startOffset:h1,endContainer:i1,endOffset:j1}}function Y(e,l,n,x){var i,y,e1;if(!Q(n,e))return F;if(e.remove!='all'){b(e.styles,function(f1,g1){f1=U(f1,l);if(typeof(g1)==='number'){g1=f1;x=0}if(!x||R(S(x,g1),f1))d.setStyle(n,g1,'');e1=1});if(e1&&d.getAttrib(n,'style')==''){n.removeAttribute('style');n.removeAttribute('data-mce-style')}b(e.attributes,function(f1,g1){var h1;f1=U(f1,l);if(typeof(g1)==='number'){g1=f1;x=0}if(!x||R(d.getAttrib(x,g1),f1)){if(g1=='class'){f1=d.getAttrib(n,g1);if(f1){h1='';b(f1.split(/\s+/),function(i1){if(/mce\w+/.test(i1))h1+=(h1?' ':'')+i1});if(h1){d.setAttrib(n,g1,h1);return}}}if(g1=="class")n.removeAttribute('className');if(M.test(g1))n.removeAttribute('data-mce-'+g1);n.removeAttribute(g1)}});b(e.classes,function(f1){f1=U(f1,l);if(!x||d.hasClass(x,f1))d.removeClass(n,f1)});y=d.getAttribs(n);for(i=0;i<y.length;i++){if(y[i].nodeName.indexOf('_')!==0)return F}}if(e.remove!='none'){Z(n,e);return m}};function Z(n,e){var i=n.parentNode,l;function x(n,y,e1){n=$(n,y,e1);return!n||(n.nodeName=='BR'||h(n))};if(e.block){if(!j){if(h(n)&&!h(i)){if(!x(n,F)&&!x(n.firstChild,m,1))n.insertBefore(d.create('br'),n.firstChild);if(!x(n,m)&&!x(n.lastChild,F,1))n.appendChild(d.create('br'))}}else{if(i==d.getRoot()){if(!e.list_block||!R(n,e.list_block)){b(t.grep(n.childNodes),function(n){if(c(j,n.nodeName.toLowerCase())){if(!l)l=W(n,j);else l.appendChild(n)}else l=0})}}}}if(e.selector&&e.inline&&!R(e.inline,n))return;d.remove(n,1)};function $(n,e,i){if(n){e=e?'nextSibling':'previousSibling';for(n=i?n:n[e];n;n=n[e]){if(n.nodeType==1||!V(n))return n}}};function _(n){return n&&n.nodeType==1&&n.getAttribute('data-mce-type')=='bookmark'};function a1(e,n){var i,l,x;function y(f1,g1){if(f1.nodeName!=g1.nodeName)return F;function h1(j1){var k1={};b(d.getAttribs(j1),function(l1){var m1=l1.nodeName.toLowerCase();if(m1.indexOf('_')!==0&&m1!=='style')k1[m1]=d.getAttrib(j1,m1)});return k1};function i1(j1,k1){var l1,m1;for(m1 in j1){if(j1.hasOwnProperty(m1)){l1=k1[m1];if(l1===u)return F;if(j1[m1]!=l1)return F;delete k1[m1]}}for(m1 in k1){if(k1.hasOwnProperty(m1))return F}return m};if(!i1(h1(f1),h1(g1)))return F;if(!i1(d.parseStyle(d.getAttrib(f1,'style')),d.parseStyle(d.getAttrib(g1,'style'))))return F;return m};function e1(f1,g1){for(l=f1;l;l=l[g1]){if(l.nodeType==3&&l.nodeValue.length!==0)return f1;if(l.nodeType==1&&!_(l))return l}return f1};if(e&&n){e=e1(e,'previousSibling');n=e1(n,'nextSibling');if(y(e,n)){for(l=e.nextSibling;l&&l!=n;){x=l;l=l.nextSibling;e.appendChild(x)}d.remove(n);b(t.grep(n.childNodes),function(f1){e.appendChild(f1)});return e}}return n};function q(n){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(n)};function b1(e,i){var l,n,x,y;l=e[i?'startContainer':'endContainer'];n=e[i?'startOffset':'endOffset'];if(l.nodeType==1){x=l.childNodes.length-1;if(!i&&n)n--;l=l.childNodes[n>x?x:n]}if(l.nodeType===3&&i&&n>=l.nodeValue.length){l=new T(l,a.getBody()).next()||l}if(l.nodeType===3&&!i&&n===0){l=new T(l,a.getBody()).prev()||l}return l};function c1(l,n,x){var y='_mce_caret',e1=a.settings.caret_debug;function f1(e){var i=d.create('span',{id:y,'data-mce-bogus':true,style:e1?'color:red':''});if(e){i.appendChild(a.getDoc().createTextNode(I))}return i};function g1(e,i){while(e){if((e.nodeType===3&&e.nodeValue!==I)||e.childNodes.length>1){return false}if(i&&e.nodeType===1){i.push(e)}e=e.firstChild}return true};function h1(e){while(e){if(e.id===y){return e}e=e.parentNode}};function i1(e){var i;if(e){i=new T(e,e);for(e=i.current();e;e=i.next()){if(e.nodeType===3){return e}}}};function j1(e,i){var n1,o1;if(!e){e=h1(s.getStart());if(!e){while(e=d.get(y)){j1(e,false)}}}else{o1=s.getRng(true);if(g1(e)){if(i!==false){o1.setStartBefore(e);o1.setEndBefore(e)}d.remove(e)}else{n1=i1(e);if(n1.nodeValue.charAt(0)===I){n1=n1.deleteData(0,1)}d.remove(e,1)}s.setRng(o1)}};function k1(){var e,i,n1,o1,p1,q1,r1;e=s.getRng(true);o1=e.startOffset;q1=e.startContainer;r1=q1.nodeValue;i=h1(s.getStart());if(i){n1=i1(i)}if(r1&&o1>0&&o1<r1.length&&/\w/.test(r1.charAt(o1))&&/\w/.test(r1.charAt(o1-1))){p1=s.getBookmark();e.collapse(true);e=X(e,B(n));e=r.split(e);G(n,x,e);s.moveToBookmark(p1)}else{if(!i||n1.nodeValue!==I){i=f1(true);n1=i.firstChild;e.insertNode(i);o1=1;G(n,x,i)}else{G(n,x,i)}s.setCursorLocation(n1,o1)}};function l1(){var e=s.getRng(true),n1,o1,p1,q1,r1,s1,t1=[],i,u1;n1=e.startContainer;o1=e.startOffset;r1=n1;if(n1.nodeType==3){if(o1!=n1.nodeValue.length||n1.nodeValue===I){q1=true}r1=r1.parentNode}while(r1){if(K(r1,n,x)){s1=r1;break}if(r1.nextSibling){q1=true}t1.push(r1);r1=r1.parentNode}if(!s1){return}if(q1){p1=s.getBookmark();e.collapse(true);e=X(e,B(n),true);e=r.split(e);H(n,x,e);s.moveToBookmark(p1)}else{u1=f1();r1=u1;for(i=t1.length-1;i>=0;i--){r1.appendChild(d.clone(t1[i],false));r1=r1.firstChild}r1.appendChild(d.doc.createTextNode(I));r1=r1.firstChild;d.insertAfter(u1,s1);s.setCursorLocation(r1,1)}};function m1(){var i,e,n1;e=h1(s.getStart());if(e&&!d.isEmpty(e)){t.walk(e,function(n1){if(n1.nodeType==1&&n1.id!==y&&!d.isEmpty(n1)){d.setAttrib(n1,'data-mce-bogus',null)}},'childNodes')}};if(!self._hasCaretEvents){a.onBeforeGetContent.addToTop(function(){var e=[],i;if(g1(h1(s.getStart()),e)){i=e.length;while(i--){d.setAttrib(e[i],'data-mce-bogus','1')}}});t.each('onMouseUp onKeyUp'.split(' '),function(n){a[n].addToTop(function(){j1();m1()})});a.onKeyDown.addToTop(function(a,e){var i=e.keyCode;if(i==8||i==37||i==39){j1(h1(s.getStart()))}m1()});s.onSetContent.add(m1);self._hasCaretEvents=true}if(l=="apply"){k1()}else{l1()}};function d1(e){var i=e.startContainer,l=e.startOffset,n,x,y,e1,f1;if(i.nodeType==3&&l>=i.nodeValue.length){l=k(i);i=i.parentNode;n=true}if(i.nodeType==1){e1=i.childNodes;i=e1[Math.min(l,e1.length-1)];x=new T(i,d.getParent(i,d.isBlock));if(l>e1.length-1||n)x.next();for(y=x.current();y;y=x.next()){if(y.nodeType==3&&!V(y)){f1=d.create('a',null,I);y.parentNode.insertBefore(f1,y);e.setStart(y,0);s.setRng(e);d.remove(f1);return}}}}}})(tinymce);tinymce.onAddEditor.add(function(t,e){var f,a,d,s=e.settings;function r(n,b){t.each(b,function(v,g){if(v)d.setStyle(n,g,v)});d.rename(n,'span')};function c(b,p){d=b.dom;if(s.convert_fonts_to_spans){t.each(d.select('font,u,strike',p.node),function(n){f[n.nodeName.toLowerCase()](e.dom,n)})}};if(s.inline_styles){a=t.explode(s.font_size_legacy_values);f={font:function(d,n){r(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(d,n){r(n,{textDecoration:'underline'})},strike:function(d,n){r(n,{textDecoration:'line-through'})}};e.onPreProcess.add(c);e.onSetContent.add(c);e.onInit.add(function(){e.selection.onSetContent.add(c)})}});(function(t){var T=t.dom.TreeWalker;t.EnterKey=function(e){var d=e.dom,s=e.selection,a=e.settings,u=e.undoManager,n=e.schema.getNonEmptyElements();function h(b){var r=s.getRng(true),c,f,g,o,p,j,k,l,m,q,v,w,x,z;function A(i){return i&&d.isBlock(i)&&!/^(TD|TH|CAPTION|FORM)$/.test(i.nodeName)&&!/^(fixed|absolute)/i.test(i.style.position)&&d.getContentEditable(i)!=="true"};function B(i){var y;if(t.isIE&&d.isBlock(i)){y=s.getRng();i.appendChild(d.create('span',null,'\u00a0'));s.select(i);i.lastChild.outerHTML='';s.setRng(y)}};function C(y){var N=y,O=[],i;while(N=N.firstChild){if(d.isBlock(N)){return}if(N.nodeType==1&&!n[N.nodeName.toLowerCase()]){O.push(N)}}i=O.length;while(i--){N=O[i];if(!N.hasChildNodes()||(N.firstChild==N.lastChild&&N.firstChild.nodeValue==='')){d.remove(N)}else{if(N.nodeName=="A"&&(N.innerText||N.textContent)===' '){d.remove(N)}}}};function D(i){var N,O,r,y,P,Q=i,R;r=d.createRng();if(i.hasChildNodes()){N=new T(i,i);while(O=N.current()){if(O.nodeType==3){r.setStart(O,0);r.setEnd(O,0);break}if(n[O.nodeName.toLowerCase()]){r.setStartBefore(O);r.setEndBefore(O);break}Q=O;O=N.next()}if(!O){r.setStart(Q,0);r.setEnd(Q,0)}}else{if(i.nodeName=='BR'){if(i.nextSibling&&d.isBlock(i.nextSibling)){if(!j||j<9){R=d.create('br');i.parentNode.insertBefore(R,i)}r.setStartBefore(i);r.setEndBefore(i)}else{r.setStartAfter(i);r.setEndAfter(i)}}else{r.setStart(i,0);r.setEnd(i,0)}}s.setRng(r);d.remove(R);P=d.getViewPort(e.getWin());y=d.getPos(i).y;if(y<P.y||y+25>P.y+P.h){e.getWin().scrollTo(0,y<P.y?y:y-P.h+25)}};function E(i){var y=g,N,O,P;N=i||v=="TABLE"?d.create(i||x):p.cloneNode(false);P=N;if(a.keep_styles!==false){do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(y.nodeName)){if(y.id=='_mce_caret'){continue}O=y.cloneNode(false);d.setAttrib(O,'id','');if(N.hasChildNodes()){O.appendChild(N.firstChild);N.appendChild(O)}else{P=O;N.appendChild(O)}}}while(y=y.parentNode)}if(!t.isIE){P.innerHTML='<br data-mce-bogus="1">'}return N};function F(i){var y,N,O;if(g.nodeType==3&&(i?o>0:o<g.nodeValue.length)){return false}if(g.parentNode==p&&z&&!i){return true}if(i&&g.nodeType==1&&g==p.firstChild){return true}if(g.nodeName==="TABLE"||(g.previousSibling&&g.previousSibling.nodeName=="TABLE")){return(z&&!i)||(!z&&i)}y=new T(g,p);if(g.nodeType==3){if(i&&o==0){y.prev()}else if(!i&&o==g.nodeValue.length){y.next()}}while(N=y.current()){if(N.nodeType===1){if(!N.getAttribute('data-mce-bogus')){O=N.nodeName.toLowerCase();if(n[O]&&O!=='br'){return false}}}else if(N.nodeType===3&&!/^[ \t\r\n]*$/.test(N.nodeValue)){return false}if(i){y.prev()}else{y.next()}}return true};function G(g,o){var l,p,i,y,N,O=x||'P';p=d.getParent(g,d.isBlock);if(!p||!A(p)){p=p||f;if(!p.hasChildNodes()){l=d.create(O);p.appendChild(l);r.setStart(l,0);r.setEnd(l,0);return l}y=g;while(y.parentNode!=p){y=y.parentNode}while(y&&!d.isBlock(y)){i=y;y=y.previousSibling}if(i){l=d.create(O);i.parentNode.insertBefore(l,i);y=i;while(y&&!d.isBlock(y)){N=y.nextSibling;l.appendChild(y);y=N}r.setStart(g,o);r.setEnd(g,o)}}return g};function H(){function i(y){var N=q[y?'firstChild':'lastChild'];while(N){if(N.nodeType==1){break}N=N[y?'nextSibling':'previousSibling']}return N===p};l=x?E(x):d.create('BR');if(i(true)&&i()){d.replace(l,q)}else if(i(true)){q.parentNode.insertBefore(l,q)}else if(i()){d.insertAfter(l,q);B(l)}else{c=r.cloneRange();c.setStartAfter(p);c.setEndAfter(q);m=c.extractContents();d.insertAfter(m,q);d.insertAfter(l,q)}d.remove(p);D(l);u.add()};function I(){var i=new T(g,p),y;while(y=i.current()){if(y.nodeName=='BR'){return true}y=i.next()}}function J(){var i,y,N;if(g&&g.nodeType==3&&o>=g.nodeValue.length){if(!t.isIE&&!I()){i=d.create('br');r.insertNode(i);r.setStartAfter(i);r.setEndAfter(i);y=true}}i=d.create('br');r.insertNode(i);if(t.isIE&&v=='PRE'&&(!j||j<8)){i.parentNode.insertBefore(d.doc.createTextNode('\r'),i)}N=d.create('span',{},'&nbsp;');i.parentNode.insertBefore(N,i);s.scrollIntoView(N);d.remove(N);if(!y){r.setStartAfter(i);r.setEndAfter(i)}else{r.setStartBefore(i);r.setEndBefore(i)}s.setRng(r);u.add()};function K(i){do{if(i.nodeType===3){i.nodeValue=i.nodeValue.replace(/^[\r\n]+/,'')}i=i.firstChild}while(i)};function L(i){var y=d.getRoot(),N,f;N=i;while(N!==y&&d.getContentEditable(N)!=="false"){if(d.getContentEditable(N)==="true"){f=N}N=N.parentNode}return N!==y?f:y};function M(i){var y;if(!t.isIE){i.normalize();y=i.lastChild;if(!y||(/^(left|right)$/gi.test(d.getStyle(y,'float',true)))){d.add(i,'br')}}};if(!r.collapsed){e.execCommand('Delete');return}if(b.isDefaultPrevented()){return}g=r.startContainer;o=r.startOffset;x=(a.force_p_newlines?'p':'')||a.forced_root_block;x=x?x.toUpperCase():'';j=d.doc.documentMode;k=b.shiftKey;if(g.nodeType==1&&g.hasChildNodes()){z=o>g.childNodes.length-1;g=g.childNodes[Math.min(o,g.childNodes.length-1)]||g;if(z&&g.nodeType==3){o=g.nodeValue.length}else{o=0}}f=L(g);if(!f){return}u.beforeChange();if(!d.isBlock(f)&&f!=d.getRoot()){if(!x||k){J()}return}if((x&&!k)||(!x&&k)){g=G(g,o)}p=d.getParent(g,d.isBlock);q=p?d.getParent(p.parentNode,d.isBlock):null;v=p?p.nodeName.toUpperCase():'';w=q?q.nodeName.toUpperCase():'';if(w=='LI'&&!b.ctrlKey){p=q;v=w}if(v=='LI'){if(!x&&k){J();return}if(d.isEmpty(p)){if(/^(UL|OL|LI)$/.test(q.parentNode.nodeName)){return false}H();return}}if(v=='PRE'&&a.br_in_pre!==false){if(!k){J();return}}else{if((!x&&!k&&v!='LI')||(x&&k)){J();return}}x=x||'P';if(F()){if(/^(H[1-6]|PRE)$/.test(v)&&w!='HGROUP'){l=E(x)}else{l=E()}if(a.end_container_on_empty_block&&A(q)&&d.isEmpty(p)){l=d.split(q,p)}else{d.insertAfter(l,p)}D(l)}else if(F(true)){l=p.parentNode.insertBefore(E(),p);B(l)}else{c=r.cloneRange();c.setEndAfter(p);m=c.extractContents();K(m);l=m.firstChild;d.insertAfter(m,p);C(l);M(p);D(l)}d.setAttrib(l,'id','');u.add()}e.onKeyDown.add(function(b,c){if(c.keyCode==13){if(h(c)!==false){c.preventDefault()}}})}})(tinymce);
