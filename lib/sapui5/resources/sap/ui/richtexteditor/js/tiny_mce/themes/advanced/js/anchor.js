tinyMCEPopup.requireLangPack();var AnchorDialog={init:function(e){var a,b,f=document.forms[0];this.editor=e;b=e.dom.getParent(e.selection.getNode(),'A');v=e.dom.getAttrib(b,'name')||e.dom.getAttrib(b,'id');if(v){this.action='update';f.anchorName.value=v}f.insert.value=e.getLang(b?'update':'insert')},update:function(){var e=this.editor,a,n=document.forms[0].anchorName.value,b;if(!n||!/^[a-z][a-z0-9\-\_:\.]*$/i.test(n)){tinyMCEPopup.alert('advanced_dlg.anchor_invalid');return}tinyMCEPopup.restoreSelection();if(this.action!='update')e.selection.collapse(1);var r=e.schema.getElementRule('a');if(!r||r.attributes.name){b='name'}else{b='id'}a=e.dom.getParent(e.selection.getNode(),'A');if(a){a.setAttribute(b,n);a[b]=n;e.undoManager.add()}else{var c={'class':'mceItemAnchor'};c[b]=n;e.execCommand('mceInsertContent',0,e.dom.createHTML('a',c,'\uFEFF'));e.nodeChanged()}tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(AnchorDialog.init,AnchorDialog);
