jQuery.sap.require("sap.ca.ui.utils.resourcebundle");sap.ui.controller("sap.ca.ui.dialog.Confirm",{_CONFIRM_NOTE_ID:"TXA_NOTE",_CONFIRM_BUTTON_ID:"BTN_CONFIRM",_CONFIRM_DIALOG_ID:"DLG_CONFIRM",_CONFIRM_VERTICALLAYOUT_SM_ID:"VLT_ADDINFO",_CONFIRM_TEXT_EMPTYLINE:"TXT_EMPTYLINE",_bNoteMandatory:false,_sPreviousInput:"",onInit:function(){if(jQuery.device.is.phone===false){var d=this.getView().byId(this._CONFIRM_DIALOG_ID);d.setContentWidth("25em")}var v=this.getView().byId(this._CONFIRM_VERTICALLAYOUT_SM_ID);v.bindProperty("visible",{path:'/additionalInformation',formatter:function(i){return(i&&i.length>0)?true:false}});var e=this.getView().byId(this._CONFIRM_TEXT_EMPTYLINE);e.bindProperty("visible",{path:'/additionalInformation',formatter:function(i){return(i&&i.length>0)?false:true}})},onBeforeOpenDialog:function(){var t=this.getView().byId(this._CONFIRM_NOTE_ID);t.setValue("");this._sPreviousInput="";this._bNoteMandatory=false;var d=this.getView().byId(this._CONFIRM_DIALOG_ID).getModel();if(d){this._bNoteMandatory=d.getProperty("/noteMandatory");if(this._bNoteMandatory){this.enableConfirmButton(false);t.setPlaceholder(sap.ca.ui.utils.resourcebundle.getText("YMSG_TEXT_NOTE_MANDATORY"))}else{this.enableConfirmButton(true);t.setPlaceholder(sap.ca.ui.utils.resourcebundle.getText("YMSG_TEXT_NOTE"))}if(this._bNoteMandatory){t.setVisible(true)}else{if(d.getProperty("/showNote")){t.setVisible(true)}else{t.setVisible(false)}}}},onConfirmDialog:function(e){var t=this.getView().byId(this._CONFIRM_NOTE_ID);var r={isConfirmed:true,sNote:t.getValue()};sap.ca.ui.dialog.factory.closeDialog(this._CONFIRM_DIALOG_ID,r)},onCancelDialog:function(e){var r={isConfirmed:false};sap.ca.ui.dialog.factory.closeDialog(this._CONFIRM_DIALOG_ID,r)},onNoteInput:function(e){var n=e.getParameters().value?e.getParameters().value:e.getParameters().newValue;n=jQuery.trim(n);if(n&&!this._sPreviousInput){this.enableConfirmButton(true)}else{if(this._sPreviousInput&&!n&&this._bNoteMandatory){this.enableConfirmButton(false)}}this._sPreviousInput=(n)?n:""},enableConfirmButton:function(e){var b=this.getView().byId(this._CONFIRM_BUTTON_ID);if(b.getEnabled()!==e){b.setEnabled(e);b.rerender()}},formatVisible:function(t){if(t&&t.length>0)return true;return false}});
