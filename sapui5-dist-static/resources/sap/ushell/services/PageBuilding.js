// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.services.PageBuilding");jQuery.sap.require("sap.ui2.srvc.factory");jQuery.sap.require("sap.ui2.srvc.page");sap.ushell.services.PageBuilding=function(a,c){var f=new sap.ui2.srvc.Factory(a.getPageBuildingService());f.readCatalogData=function(r,s,F){function o(R){var C=R.Chips.results||R.Chips,i;r.Chips=R.Chips;for(i=0;i<C.length;i+=1){C[i].remoteCatalogId=r.id}sap.ui2.srvc.call(s.bind(null,r),F)}function b(){c.createAdapter(new sap.ushell.System({alias:r.systemId,platform:'hana',baseUrl:r.baseUrl})).fail(F).done(function(R){R.getPageBuildingService().readCatalog(r.remoteId,o,F)})}function d(l){if(l.type==='H'){r=l;b()}else{sap.ui2.srvc.call(s.bind(null,l),F)}}if(typeof r!=="object"||typeof r.id!=="string"){throw new sap.ushell.utils.Error("Invalid input for readCatalogData: "+r,"sap.ushell.services.PageBuilding")}if(r.type==='H'){b()}else{a.getPageBuildingService().readCatalog(r.id,d,F)}};f.readCatalogChips=function(r,C,s,F){function o(R){var d=R.results,i;for(i=0;i<d.length;i+=1){d[i].remoteCatalogId=r.id}sap.ui2.srvc.call(s.bind(null,R),F)}function b(){c.createAdapter(new sap.ushell.System({alias:r.systemId,platform:'hana',baseUrl:r.baseUrl})).fail(F).done(function(R){R.getPageBuildingService().readCatalogChips(r.remoteId,C,o,F)})}if(r.type===undefined){throw new sap.ui2.srvc.Error("Unknown catalog type","sap.ushell.PageBuilding")}if(r.type==='H'){b()}else{f.getPageBuildingService().readCatalogChips(r.id,C,s,F)}};this.getFactory=function(){return f};this.getPage=function(p){return f.createPage(p)};this.getPageSet=function(i){var d=new jQuery.Deferred();f.createPageSet(i,d.resolve,d.reject.bind(d));return d.promise()}}}());
