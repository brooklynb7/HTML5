// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.core.Control.extend("SearchResultListItemButton",{metadata:{properties:{status:"string",},events:{press:{}}},renderer:function(r,c){r.write('<a href="javascript:void(0);"');r.writeControlData(c);r.addClass("searchResultListItemButton");r.writeClasses();r.write(">");var o=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("open-command-field")});r.renderControl(o);r.write("</a>")},onclick:function(e){this.firePress()}});sap.m.ListItemBase.extend("SearchResultListItem",{metadata:{properties:{title:"string",titleUrl:"string",type:"string",imageUrl:"string",status:"string",previewButton:"string",data:"object",visibleAttributes:"int"},events:{navigate:{},previewOpen:{},previewClose:{}}},renderer:function(r,c){var l,v,a,b;r.write("<div");r.writeControlData(c);if(c.getStatus()==="open"||c.getData()['selected']===true){r.addClass("searchResultListItem-open")}r.addClass("searchResultListItem");r.writeClasses();r.write(">");r.write('<div class="searchResultListItem-main"><div>');r.write('<div class="searchResultListItem-left">');r.write('<div class="searchResultListItem-image searchResultListItem-image1" style="background-image:url(\'');r.write(c.getImageUrl());r.write('\')"></div>');var t=new sap.m.Text({text:c.getType()});t.setTooltip(c.getType().replace(/<b>/gi,'').replace(/<\/b>/gi,''));t.addStyleClass("searchResultListItem-type searchResultListItem-type1");r.renderControl(t);var d=new sap.m.Link({text:c.getTitle(),href:c.getTitleUrl()});d.setTooltip(c.getTitle().replace(/<b>/gi,'').replace(/<\/b>/gi,''));d.addStyleClass("searchResultListItem-title");r.renderControl(d);var e=new sap.m.Text({text:c.getType()});e.setTooltip(c.getType().replace(/<b>/gi,'').replace(/<\/b>/gi,''));e.addStyleClass("searchResultListItem-type searchResultListItem-type2");r.renderControl(e);r.write('<div class="searchResultListItem-attributes">');for(var i=1;i<=c.getVisibleAttributes();i++){var f="attr"+i+"Name";var g="attr"+i;l=c.getData()[f];v=c.getData()[g];if(l===undefined||v===undefined){continue}r.write('<div class="searchResultListItem-attribute">');a=new sap.m.Label({text:l});a.setTooltip((''+l).replace(/<b>/gi,'').replace(/<\/b>/gi,''));a.addStyleClass("searchResultListItem-attribute-label");r.renderControl(a);b=new sap.m.Text({text:v});b.setTooltip((''+v).replace(/<b>/gi,'').replace(/<\/b>/gi,''));b.addStyleClass("searchResultListItem-attribute-value");r.renderControl(b);r.write("</div>")}r.write("</div>");r.write("</div>");r.write('<div class="searchResultListItem-image2Container"><div class="searchResultListItem-image searchResultListItem-image2" style="background-image:url(\'');r.write(c.getImageUrl());r.write('\')"></div></div>');r.write("</div></div>");if(c.getPreviewButton()!=="false"){this.button=new SearchResultListItemButton({status:c.getStatus(),press:function(){if(c.getStatus()==="open"){c.firePreviewClose()}else{c.firePreviewOpen()}}});r.renderControl(this.button)}r.write("</div>")},onAfterRendering:function(){var s=this;$(this.getDomRef()).find(".searchResultListItem-main").on("click",function(){s.fireNavigate()});this._setSafeText($(this.getDomRef()).find(".searchResultListItem-title, .searchResultListItem-attribute-value"))},_setSafeText:function(o){o.each(function(i,d){var a=$(d);var s=a.text().replace(/<b>/gi,'').replace(/<\/b>/gi,'');if(s.indexOf('<')===-1){a.html(a.text())}})}});sap.m.ListItemBase.extend("SearchResultListItemFooter",{metadata:{properties:{showSpinner:{type:"boolean",defaultValue:false},text:"string"},aggregations:{content:{singularName:"content"}},events:{showMore:{}}},renderer:function(r,c){var f=new sap.m.Label({text:c.getText()});f.addStyleClass('resultListMoreFooter');var d=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("sys-overflow")});this.busy=new sap.m.BusyIndicator({size:"22px"});this.busy.addStyleClass('resultListBusyFooter');if(c.getShowSpinner()===false){this.busy.addStyleClass('hidden')}r.write("<div");r.writeControlData(c);r.addClass("resultListFooterContainer");r.writeClasses();r.write(">");r.write("<div class='resultListFooterContent'>");r.renderControl(d);r.renderControl(f);r.renderControl(this.busy);r.write("</div>");r.write("</div>")},onAfterRendering:function(r,c){var s=this;var a=$(this.getDomRef());a.click(function(){s.setShowSpinner(true);s.fireShowMore();a.off('click')})}});sap.m.ListItemBase.extend("CategoryTreeItem",{metadata:{properties:{name:"string",count:"int"},events:{clicked:{}}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("resultListFooterContainer");r.writeClasses();r.write(">");r.write("<div class='resultListFooterContent'>");r.write("</div>");r.write("</div>")},onAfterRendering:function(r,c){var s=this;var a=$(this.getDomRef());a.click(function(){s.fireClicked()})}})}());
